import{j as e,u as ae,b as nt,c as ot,a as c,d as Be,R as qt,Q as jn,e as Ls,H as Nt,f as gt,g as Vt,L as Ge,i as Qn,h as Tt,k as Kt,l as Ot,C as St,m as yn,n as Lt,y as wn,o as bn,q as Nn,V as Xn,p as Jn,t as ea,s as Ms,v as Es,N as es,O as Rs,w as ta,B as sa,x as na,z as Ne,A as Sn,D as aa,E as ia,F as ra,G as oa,I as ca,J as la,P as da,K as ha,M as pa,S as ua,T as ma,U as _a,W as xa,X as ga,Y as va,Z as fa}from"./vendor-react-CoIZ3fvE.js";import{F as ja,H as At,I as Ss,P as ya,S as wa,J as Le}from"./vendor-libs-h7MdDILM.js";import{u as ba,a as Na,m as de,A as Sa}from"./vendor-ui-fQBmKX2v.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const kt=({width:t=32,height:s=32,color:n="rgba(53, 152, 254)",className:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,fill:n,"aria-hidden":"true",viewBox:"0 0 32 32",className:i,children:e.jsx("path",{d:"M22 17v3a3 3 0 0 1-3 3h-2a3 3 0 0 1-3-3v-3h-3v2H9v-2H7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2v-9h2v9h14v-9h2v9h2a1 1 0 0 0 1-1V18a1 1 0 0 0-1-1h-2v2h-2v-2zM2.442 14C.81 14-.163 13.536.015 12.228c.05-.357.19-.676.459-1.153.017-.03.489-.836.631-1.099C1.676 8.924 1.97 8.01 1.97 7s-.293-1.924-.864-2.976c-.142-.263-.614-1.07-.631-1.1-.27-.476-.41-.795-.459-1.152C-.163.464.81 0 2.442 0c4.011 0 7 3.064 7 7s-2.989 7-7 7m0-2c2.895 0 5-2.157 5-5s-2.105-5-5-5q-.103 0-.19.002c.115.198.477.82.612 1.069C3.579 4.39 3.969 5.606 3.969 7s-.39 2.61-1.105 3.93c-.135.249-.498.87-.613 1.068l.19.002zM7 15h22a3 3 0 0 1 3 3v11a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V18a3 3 0 0 1 3-3m7-2h-2v-2a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v2h-2v-2a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1zm2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3z"})}),Yt=({width:t=32,height:s=32,color:n="rgba(53, 152, 254, 1)",className:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,fill:n,"aria-hidden":"true",viewBox:"0 0 32 32",className:i,children:e.jsx("path",{d:"M1.8 15.4a4 4 0 0 1 .8-5.6l4.6-3.45a3 3 0 0 1 3.6 0l4.6 3.45a4 4 0 1 1-4.8 6.4c-.64-.48-1.177-.7-1.6-.7s-.96.22-1.6.7a4 4 0 0 1-5.6-.8M9 13.5c.91 0 1.84.38 2.8 1.1a2 2 0 1 0 2.4-3.2L9.6 7.95a1 1 0 0 0-1.2 0L3.8 11.4a2 2 0 1 0 2.4 3.2c.96-.72 1.89-1.1 2.8-1.1M1.5 8C.672 8 0 7.105 0 6s.672-2 1.5-2S3 4.895 3 6s-.672 2-1.5 2M6 5C4.895 5 4 3.88 4 2.5S4.895 0 6 0s2 1.12 2 2.5S7.105 5 6 5m6 0c-1.105 0-2-1.12-2-2.5S10.895 0 12 0s2 1.12 2 2.5S13.105 5 12 5m4.5 3c-.828 0-1.5-.895-1.5-2s.672-2 1.5-2 1.5.895 1.5 2-.672 2-1.5 2m-.7 22.4a4 4 0 0 1 .8-5.6l4.6-3.45a3 3 0 0 1 3.6 0l4.6 3.45a4 4 0 1 1-4.8 6.4c-.64-.48-1.177-.7-1.6-.7s-.96.22-1.6.7a4 4 0 0 1-5.6-.8m4.4-.8c.96-.72 1.89-1.1 2.8-1.1s1.84.38 2.8 1.1a2 2 0 1 0 2.4-3.2l-4.6-3.45a1 1 0 0 0-1.2 0l-4.6 3.45a2 2 0 1 0 2.4 3.2M15.5 23c-.828 0-1.5-.895-1.5-2s.672-2 1.5-2 1.5.895 1.5 2-.672 2-1.5 2m4.5-3c-1.105 0-2-1.12-2-2.5s.895-2.5 2-2.5 2 1.12 2 2.5-.895 2.5-2 2.5m6 0c-1.105 0-2-1.12-2-2.5s.895-2.5 2-2.5 2 1.12 2 2.5-.895 2.5-2 2.5m4.5 3c-.828 0-1.5-.895-1.5-2s.672-2 1.5-2 1.5.895 1.5 2-.672 2-1.5 2"})}),Zt=({width:t=32,height:s=32,color:n="rgba(53, 152, 254, 1)",className:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,fill:n,"aria-hidden":"true",viewBox:"0 0 32 32",className:i,children:e.jsx("path",{d:"M2.233 25.658a5.96 5.96 0 0 0 1.524 2.585 5.97 5.97 0 0 0 2.753 1.57 7.98 7.98 0 0 1 2.329-5.16 7.98 7.98 0 0 1 4.928-2.311 6 6 0 0 0-1.524-2.585 5.97 5.97 0 0 0-2.751-1.57 7.98 7.98 0 0 1-2.329 5.16 7.98 7.98 0 0 1-4.93 2.311m-.224-1.988a5.98 5.98 0 0 0 3.74-1.737 5.98 5.98 0 0 0 1.749-3.912 5.98 5.98 0 0 0-3.74 1.736 5.98 5.98 0 0 0-1.749 3.913m6.495 6.309a5.98 5.98 0 0 0 3.739-1.736 5.98 5.98 0 0 0 1.748-3.913 5.98 5.98 0 0 0-3.738 1.736 5.98 5.98 0 0 0-1.749 3.913m9.296-3.984c.134-.66.2-1.332.2-2.004 3.56-.061 6.475-.453 8.593-1.075.927-.273 1.645-.577 2.105-.869q.203-.13.302-.227-.016-4.205-.748-9.145C25.472 14.236 21.719 15 17 15q-3.173 0-5.762-.464a10 10 0 0 0-2.042-.465q-1.92-.539-3.448-1.396a79 79 0 0 0-.225 1.635 10 10 0 0 0-2.11.801q.23-2.036.588-4.198c.027-1.567.781-3 1.999-3.914a5 5 0 0 1 5.505-4.974A5.99 5.99 0 0 1 16 0a6 6 0 0 1 4.494 2.024 5 5 0 0 1 4.103 3.005 6 6 0 0 1 5.402 5.885q.776 4.677.95 8.767c.68.535 1.051 1.143 1.051 1.819 0 2.758-6.188 4.393-14.2 4.495m10.17-15.49A4 4 0 0 0 24 7l-.101.001-.795.02-.198-.77A3 3 0 0 0 20 4h-.5l-.3-.4A4 4 0 0 0 16 2a4 4 0 0 0-3.263 1.686l-.39.548-.655-.154a3 3 0 0 0-3.667 3.308l.086.667-.586.332A3 3 0 0 0 6.04 10.51C8.51 12.157 12.16 13 17 13c4.846 0 8.5-.845 10.97-2.495M13.657 29.657A8 8 0 1 1 2.343 18.343a8 8 0 0 1 11.314 11.314m-.708-20.09a1 1 0 0 1-1.898-.633c.851-2.553 3.061-3.437 6.191-2.654a1 1 0 1 1-.485 1.94c-2.202-.55-3.326-.101-3.808 1.346z"})}),Qt=({width:t=32,height:s=32,color:n="rgba(53, 152, 254, 1)",className:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,fill:n,"aria-hidden":"true",viewBox:"0 0 32 32",className:i,children:e.jsx("path",{d:"M4.888 26.54A12 12 0 0 1 4 22c0-6.627 5.373-12 12-12s12 5.373 12 12q0 .424-.029.84c1.924.122 2.853.16 4.029.16v2c-1.412 0-2.465-.052-5.102-.224-5.038-.329-7.498-.329-10.734.21-1.907.318-3.13.726-5.705 1.78C6.389 28.43 4.153 29 0 29v-2c1.94 0 3.412-.13 4.888-.46m21.087-3.826q.024-.354.025-.714c0-5.523-4.477-10-10-10S6 16.477 6 22c0 1.42.296 2.772.83 3.996a44 44 0 0 0 2.871-1.081c2.705-1.107 4.042-1.553 6.135-1.901 3.19-.532 5.643-.57 10.139-.3M16 0a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0V1a1 1 0 0 1 1-1m14.83 10.866a1 1 0 0 1-.366 1.366l-2.598 1.5a1 1 0 0 1-1-1.732l2.598-1.5a1 1 0 0 1 1.366.366m-29.33 0a1 1 0 0 1 1.366-.366L5.464 12a1 1 0 1 1-1 1.732l-2.598-1.5a1 1 0 0 1-.366-1.366m28.571-7.159a1 1 0 0 1 0 1.414l-4.95 4.95a1 1 0 0 1-1.414-1.414l4.95-4.95a1 1 0 0 1 1.414 0m-28.253 0a1 1 0 0 1 1.414 0l4.95 4.95a1 1 0 0 1-1.414 1.414l-4.95-4.95a1 1 0 0 1 0-1.414m20.048.793a1 1 0 0 1 .366 1.366l-1 1.732a1 1 0 1 1-1.732-1l1-1.732a1 1 0 0 1 1.366-.366m-12 0a1 1 0 0 1 1.366.366l1 1.732a1 1 0 0 1-1.732 1l-1-1.732A1 1 0 0 1 9.866 4.5M30 15a1 1 0 1 1 0 2 1 1 0 0 1 0-2M2 16a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})}),Xt=({width:t=32,height:s=32,color:n="rgba(53, 152, 254, 1)",className:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,fill:n,"aria-hidden":"true",viewBox:"0 0 32 32",className:i,children:e.jsx("path",{d:"M23.026 12H23v-.024l-5-4.615-10 9.23V30h2v-3a4 4 0 1 1 8 0v3h10V16.592zM30 15.716l1.678 1.55a1 1 0 0 1-1.356 1.469L30 18.438V32H16v-5a2 2 0 0 0-4 0v5H6V18.438l-.322.297a1 1 0 0 1-1.356-1.47L18 4.64l5 4.615V8.5A1.5 1.5 0 0 1 24.5 7h4A1.5 1.5 0 0 1 30 8.5zm-2-1.846V9h-3v2.1zM21 21h2v-3h-2zm4 0h1v2h-8v-2h1v-3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2zM2.442 14C.81 14-.163 13.536.015 12.228c.05-.357.19-.676.459-1.153.017-.03.489-.836.631-1.099C1.676 8.924 1.97 8.01 1.97 7s-.293-1.924-.864-2.976c-.142-.263-.614-1.07-.631-1.1-.27-.476-.41-.795-.459-1.152C-.163.464.81 0 2.442 0c4.011 0 7 3.064 7 7s-2.989 7-7 7m0-2c2.895 0 5-2.157 5-5s-2.105-5-5-5q-.103 0-.19.002c.115.198.477.82.612 1.069C3.579 4.39 3.969 5.606 3.969 7s-.39 2.61-1.105 3.93c-.135.249-.498.87-.613 1.068l.19.002z"})}),ds={boarding:kt,walking:Yt,homevisits:Zt,daycare:Qt,"house-sitting":Xt,default:kt},hs={boarding:{id:"boarding",enabled:!0,iconKey:"boarding",header:{translationKey:"header.services.boarding",defaultText:"Передержка"},search:{nameKey:"SearchSitter.tabs.service1.name",descKey:"SearchSitter.tabs.service1.description",itemTitleKey:"SearchSitter.itemTitle.service1"},sitterPage:{nameKey:"sitterServices.boarding.title",descKey:"sitterServices.boarding.desc",highlightKey:"sitterServices.boarding.highlight"}},walking:{id:"walking",enabled:!0,iconKey:"walking",header:{translationKey:"header.services.walking",defaultText:"Выгул"},search:{nameKey:"SearchSitter.tabs.service2.name",descKey:"SearchSitter.tabs.service2.description",itemTitleKey:"SearchSitter.itemTitle.service2"},sitterPage:{nameKey:"sitterServices.walking.title",descKey:"sitterServices.walking.desc"}},drop_in_visit:{id:"drop_in_visit",enabled:!0,iconKey:"homevisits",header:null,search:{nameKey:"SearchSitter.tabs.service3.name",descKey:"SearchSitter.tabs.service3.description",itemTitleKey:"SearchSitter.itemTitle.service3"},sitterPage:{nameKey:"sitterServices.homevisits.title",descKey:"sitterServices.homevisits.desc"}},doggy_day_care:{id:"doggy_day_care",enabled:!0,iconKey:"daycare",header:{translationKey:"header.services.daycare",defaultText:"Дневной присмотр"},search:{nameKey:"SearchSitter.tabs.service4.name",descKey:"SearchSitter.tabs.service4.description",itemTitleKey:"SearchSitter.itemTitle.service4"},sitterPage:{nameKey:"sitterServices.daycare.title",descKey:"sitterServices.daycare.desc"}},house_sitting:{id:"house_sitting",enabled:!1,iconKey:"house-sitting",header:{translationKey:"header.services.houseSitting",defaultText:"Присмотр дома"},search:{nameKey:"SearchSitter.tabs.service5.name",descKey:"SearchSitter.tabs.service5.description",itemTitleKey:"SearchSitter.itemTitle.service5"},sitterPage:{nameKey:"sitterServices.housevisits.title",descKey:"sitterServices.homevisits.desc"}},puppy_nanny:{id:"puppy_nanny",enabled:!1,iconKey:"default",header:null,search:null,sitterPage:null}};Object.values(hs).filter(t=>t.enabled&&t.header).map(t=>({key:t.id,labelKey:t.header.translationKey,defaultLabel:t.header.defaultText}));const kn=Object.values(hs).filter(t=>t.enabled&&t.search).map(t=>({id:t.id,nameKey:t.search.nameKey,descriptionKey:t.search.descKey,itemTitleKey:t.search.itemTitleKey,IconComponent:ds[t.iconKey]||ds.default})),ka=Object.values(hs).filter(t=>t.enabled&&t.sitterPage).map(t=>({id:t.id,IconComponent:ds[t.iconKey]||ds.default,...t.sitterPage}));Object.values(hs).filter(t=>!t.enabled&&t.search).map(t=>({nameKey:t.search.nameKey}));const Re={siteUrl:"https://petsok.ru",referralParamName:"ref",apiBaseUrl:"https://petsok.ru/api/v1",googleClientIdWeb:"568554314984-7c6ar6adjkq4qoj50djjeqp4ih7qi00n.apps.googleusercontent.com",appStoreUrl:"https://apps.apple.com/app/example",googlePlayUrl:"https://play.google.com/store/apps/details?id=com.example",appUniversalUrl:"https://petsok.ru/app"},Ca=Re.apiBaseUrl,ee=ja.create({baseURL:Ca,headers:{"Content-Type":"application/json",Accept:"application/json"}});ee.interceptors.request.use(t=>{const s=localStorage.getItem("authToken");return s&&t.headers&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));ee.interceptors.response.use(t=>t,t=>(t.response&&t.response.status===401&&(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),window.dispatchEvent(new CustomEvent("authError401"))),Promise.reject(t)));const ps=t=>{var a;let s,n,i;if(t.data&&t.data.object==="User"?s=t.data:t.user&&typeof t.user=="object"?s=t.user:t.data&&typeof t.data=="object"&&(t.data.id||t.data.email)&&(s=t.data),t.accessToken?n=t.accessToken:t.access_token?n=t.access_token:(a=t.meta)!=null&&a.token&&(n=t.meta.token),t.refreshToken?i=t.refreshToken:t.refresh_token&&(i=t.refresh_token),!n)throw new Error("Access token missing in API response");return{data:s,user:s,accessToken:n,refreshToken:i}},Ia=async t=>(await ee.post("/check/user",t)).data,Aa=async t=>{const s=t.operation==="register"?"/code":"/code/reset",n={};t.phone&&(n.phone=t.phone),t.email&&(n.email=t.email);const i=await ee.post(s,n);return i.data&&i.data.data&&i.data.data.message?{success:!0,message:i.data.data.message,data:i.data.data}:i.data},Ba=async t=>{const s=t.operation==="register"?"/code/check":"/code/reset/check",n={code:t.code};return t.phone&&(n.phone=t.phone),t.email&&(n.email=t.email),(await ee.post(s,n)).data},Pa=async t=>{const s={...t};t.fullName&&!t.first_name&&(s.first_name=t.fullName.split(" ")[0],t.fullName.split(" ").length>1&&(s.last_name=t.fullName.split(" ").slice(1).join(" ")),delete s.fullName);const n=await ee.post("/register",s);return ps(n.data)},Ta=async t=>{const s=await ee.post("/login",t);return ps(s.data)},La=async t=>{const s=await ee.post("/auth/google",{access_token:t});return ps(s.data)},Ma=async t=>{var i,a;const s={identity_token:t.identityToken,user_identifier:t.user,email:t.email,first_name:(i=t.fullName)==null?void 0:i.givenName,last_name:(a=t.fullName)==null?void 0:a.familyName},n=await ee.post("/auth/apple",s);return ps(n.data)},Cn=async()=>{const t=await ee.get("/user/profile"),s=t.data.user||t.data.data||t.data;if(!s||!s.id)throw new Error("User data not found");return s},Ea=async t=>{const s=new FormData;return["first_name","last_name","gender","birth","phone","address_q","address_details","additional_contact_name","additional_contact_phone","timezone"].forEach(a=>{t[a]!==void 0&&s.append(a,String(t[a]))}),s.append("_method","put"),t.avatar instanceof File&&s.append("avatar",t.avatar),(await ee.post("/users",s,{headers:{"Content-Type":"multipart/form-data"}})).data},Ra=async()=>{try{return(await ee.get("/config")).data.data}catch(t){throw console.error("Config fetch failed",t),t}},In=async()=>(await ee.get("/pets?include=avatar,files,breed,type,size")).data.data,us=async t=>(await ee.get(`/pets/${t}?include=avatar,files,breed,type,size`)).data.data,$a=async(t,s)=>(await ee.get("/pets/breeds",{params:{q:t,type_id:s}})).data.data,Fa=async(t,s)=>{const i=(await ee.post("/pets",t)).data.data;return s.length>0&&i.id?(await An(i.id,s),us(i.id)):i},Oa=async(t,s,n)=>(await ee.post(`/pets/${t}`,{...s,_method:"PATCH"}),n.length>0&&await An(t,n),us(t)),Da=async t=>{await ee.delete(`/pets/${t}`)},An=async(t,s)=>{const n=new FormData;s.forEach((i,a)=>n.append(`files[${a}]`,i)),await ee.post(`/pets/photos/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}})},Wa=async t=>{await ee.delete(`/files/${t}`)},za=async(t,s)=>{await ee.post(`/pets/${t}`,{avatar_id:s,_method:"PATCH"})},Ga=async({searchParams:t,page:s})=>{let n="/filtered/users";const i=new URLSearchParams;s&&i.append("page",s.toString()),t!=null&&t.limit&&i.append("limit",t.limit.toString()),i.toString()&&(n+=`?${i.toString()}`);const a={...t},r=a.searchReason;a.address&&(a.city=a.address),r==="map_bounds"&&a.sw_lat&&a.ne_lat?(delete a.city,delete a.address,delete a.latitude,delete a.longitude,delete a.radius_km):(r==="city"||r==="initial")&&a.city?(delete a.latitude,delete a.longitude,delete a.radius_km,delete a.sw_lat,delete a.sw_lon,delete a.ne_lat,delete a.ne_lon):r==="coordinates"&&a.latitude&&a.longitude&&(delete a.city,delete a.address,delete a.sw_lat,delete a.sw_lon,delete a.ne_lat,delete a.ne_lon,a.radius_km||(a.radius_km=30)),delete a.searchReason,delete a.address,delete a.addressPoint,delete a.latitudeDelta,delete a.longitudeDelta,delete a.role_id,delete a.limit,a.pet_type_ids=a.pet_type_ids||[],a.dog_size_ids=a.dog_size_ids||[],a.cat_size_ids=a.cat_size_ids||[];try{return{status:"success",data:(await ee.post(n,a)).data}}catch(l){return{status:"error",message:l.message,data:null}}},$s=async t=>{if(!t.trim())return Promise.resolve([]);try{return(await ee.get("/address/suggest",{params:{query:t}})).data}catch{return[]}},Ua=async t=>(await ee.get(`/sitters/${t}`)).data,Bn=async()=>(await ee.get("/worker/application/status")).data,Ha=async()=>(await ee.get("/worker/available-countries")).data,qa=async t=>(await ee.get(`/worker/available-cities?country_id=${t}`)).data,Va=async t=>(await ee.post("/worker/create",t)).data,Ka=async t=>(await ee.post("/worker/profile/submit-kyc",t,{headers:{"Content-Type":"multipart/form-data"},transformRequest:s=>s})).data,Ya=async()=>(await ee.get("/worker/application/required-tests")).data,Za=async(t,s=[])=>(await ee.get(`/worker/application/test-structure?test_id=${t}&include=${s.join(",")}`)).data,Qa=async t=>(await ee.post("/worker/application/test/submit-answers",t)).data,Pn=async()=>(await ee.get("/worker/available-services")).data,Xa=async t=>(await ee.post("/worker/settings/submit",t)).data,Ja=async(t,s)=>{const n=new FormData;return Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&n.append(i,String(t[i]))}),s.forEach((i,a)=>n.append(`files[${a}]`,i)),(await ee.post("/worker/additional-profile/submit",n,{headers:{"Content-Type":"multipart/form-data"},transformRequest:i=>i})).data},ei=async t=>(await ee.post("/promo/check",t)).data,ti=async t=>(await ee.post("/orders",t)).data,si=async(t=1,s={})=>(await ee.get("/orders/my/client",{params:{page:t,include:s.include||"client,promo_code,client_review,worker_review,payments,requests,dog_walk_logs,billing_periods",...s}})).data,ni=async(t,s)=>(await ee.get(`/orders/id/${t}${`?include=${s}`}`)).data,ai=async(t,s)=>(await ee.delete(`/orders/${t}`,{data:s})).data,Tn=async()=>(await ee.get("/balance")).data,Fs=async()=>(await ee.get("/payment-methods")).data,Os=async t=>(await ee.post("/payment-methods/verification-url",t)).data,ks=async t=>(await ee.post(`/payment-methods/${t}/default`)).data,ii=async(t,s,n,i=!0,a=null)=>(await ee.post(`/orders/${t}/initiate-payment`,{payment_method_id:s,save_new_card:i,use_balance:n,return_url_mobile:a})).data,ri=async(t={})=>{const s=await ee.get("/subscriptions/available",{params:t});return{data:s.data.data||s.data}},oi=async t=>(await ee.post("/subscriptions",t)).data,ci=async(t,s=1,n=50)=>(await ee.get("/chat/dialog",{params:{group_id:t,per_page:n,page:s,messages:!0,orders:!0}})).data,li=async(t,s,n=[],i=null)=>{const a=new FormData;return a.append("group_id",t),s&&a.append("message",s),i&&a.append("reply_to_id",String(i)),n.forEach((r,l)=>a.append(`gallery[${l}]`,r)),(await ee.post("/chat/message",a,{headers:{"Content-Type":"multipart/form-data"}})).data},Gs=async t=>ee.post("/chat/as_read",{group_id:t}),di=async(t=1,s=15)=>(await ee.get("/chat/dialogues",{params:{per_page:s,page:t,messages:!0,orders:!0}})).data,Ln=async(t,s)=>(await ee.post("/orders/chat/initiate-with-worker",{order_id:t,worker_id:s})).data.data,hi=async(t=1)=>(await ee.get(`/transactions?page=${t}`)).data,pi=async t=>(await ee.delete(`/payment-methods/${t}`)).data,ui=async()=>(await ee.get("/settings")).data,mi=async t=>(await ee.post("/settings",t)).data,_i=async()=>(await ee.get("/my/profile?include=media")).data,xi=async(t,s=[],n=[],i=[])=>{const a=new FormData;return t.title!==void 0&&a.append("title",t.title),t.description!==void 0&&a.append("description",t.description),t.care_experience!==void 0&&a.append("care_experience",String(t.care_experience)),t.children_under_twelve_yo!==void 0&&a.append("children_under_twelve_yo",t.children_under_twelve_yo?"1":"0"),t.constant_supervision!==void 0&&a.append("constant_supervision",t.constant_supervision?"1":"0"),s.forEach((l,d)=>{a.append(`files[${d}]`,l)}),i.forEach((l,d)=>{a.append(`media_ids_to_remove[${d}]`,String(l))}),n.forEach((l,d)=>{a.append(`final_media_order[${d}]`,String(l))}),(await ee.post("/my/profile/update",a,{headers:{"Content-Type":"multipart/form-data"}})).data},gi=async(t,s={})=>{const n=new URLSearchParams;return s.page&&n.append("page",s.page.toString()),n.append("include",s.include||"sender.avatar,recipient,order"),s.status&&n.append("status",s.status),s.request_type&&n.append("request_type",s.request_type),(await ee.get(`/orders/${t}/requests?${n.toString()}`)).data},vi=async(t,s,n)=>{const i={worker_id:s,accepted_request_id:n};return(await ee.post(`/orders/${t}/select-worker`,i)).data},fi="_searchContainer_xa8qk_1",ji="_searchBar_xa8qk_7",yi="_activeBar_xa8qk_20",wi="_inputWrapper_xa8qk_37",bi="_inputTransparent_xa8qk_58",Ni="_searchBtnWrapper_xa8qk_94",Si="_searchBtn_xa8qk_94",ki="_searchBtnText_xa8qk_131",Ci="_dropdownMenu_xa8qk_136",Ii="_dropdownItem_xa8qk_150",Ai="_mainText_xa8qk_176",ut={searchContainer:fi,searchBar:ji,activeBar:yi,inputWrapper:wi,inputTransparent:bi,searchBtnWrapper:Ni,searchBtn:Si,searchBtnText:ki,dropdownMenu:Ci,dropdownItem:Ii,mainText:Ai},Mn=t=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",...t,children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"})}),Bi=t=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",...t,children:e.jsx("path",{d:"M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z"})}),Pi=(t,s)=>{let n=null;return(...i)=>new Promise(a=>{n&&clearTimeout(n),n=setTimeout(()=>a(t(...i)),s)})},Ti=({serviceType:t})=>{const{t:s}=ae(),n=nt();ot();const i=c.useRef(null),[a,r]=c.useState(""),[l,d]=c.useState([]),[o,h]=c.useState(!1),x=m=>{switch(m){case"boarding":return s("search.placeholders.boarding","В каком районе искать ситтера?");case"walking":return s("search.placeholders.walking","В каком районе нужен выгул?");case"doggy_day_care":return s("search.placeholders.doggy_day_care","Где нужна дневная няня?");case"drop_in_visit":return s("search.placeholders.drop_in_visit","Куда должен приехать ситтер?");case"house_sitting":return s("search.placeholders.house_sitting","Где требуется присмотр?");default:return s("search.location_placeholder","Поиск по району или адресу")}},w=c.useMemo(()=>Pi(async m=>{if(m.length<3){d([]);return}try{const j=await $s(m);d(j)}catch{d([])}},400),[]),N=m=>{m&&m.preventDefault();const j=new URLSearchParams;a&&j.append("address",a),j.append("service_key",t),n(`/search?${j.toString()}`)},v=m=>{r(m),d([]),h(!1)};return c.useEffect(()=>{const m=j=>{i.current&&!i.current.contains(j.target)&&(h(!1),d([]))};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),e.jsx("div",{className:ut.searchContainer,ref:i,children:e.jsxs("form",{className:`${ut.searchBar} ${o?ut.activeBar:""}`,onSubmit:N,onClick:()=>h(!0),children:[e.jsx("div",{className:ut.inputWrapper,children:e.jsx("input",{type:"text",placeholder:x(t),value:a,onChange:m=>{r(m.target.value),w(m.target.value)},className:ut.inputTransparent})}),e.jsx("div",{className:ut.searchBtnWrapper,children:e.jsxs("button",{type:"submit",className:ut.searchBtn,children:[e.jsx(Bi,{width:24,height:24}),e.jsx("span",{className:ut.searchBtnText,children:s("SearchSitterItem.searchButtonText","Найти")})]})}),o&&l.length>0&&e.jsx("div",{className:ut.dropdownMenu,children:l.map((m,j)=>e.jsxs("div",{className:ut.dropdownItem,onClick:P=>{P.stopPropagation(),v(m)},children:[e.jsx(Mn,{width:20})," ",e.jsx("span",{className:ut.mainText,children:m})]},j))})]})})},Li="_searchSitterWrapper_10ke0_1",Mi="_searchSitter_10ke0_1",Ei="_tabs_10ke0_24",Ri="_tabItem_10ke0_39",$i="_active_10ke0_47",Fi="_tabIcon_10ke0_56",Oi="_tabContent_10ke0_60",Di="_tabText_10ke0_72",Wi="_tabName_10ke0_77",zi="_tabDescription_10ke0_83",Gi="_body_10ke0_94",mt={searchSitterWrapper:Li,searchSitter:Mi,tabs:Ei,tabItem:Ri,active:$i,tabIcon:Fi,tabContent:Oi,tabText:Di,tabName:Wi,tabDescription:zi,body:Gi},Ui=()=>{var d;const[t,s]=c.useState(0),{t:n}=ae(),{activeServices:i,isConfigLoaded:a}=Be(o=>o.config),r=kn.filter(o=>a?i.includes(o.id):!0).map(o=>({id:o.id,name:n(o.nameKey),description:n(o.descriptionKey,""),itemTitle:n(o.itemTitleKey),Icon:o.IconComponent}));if(r.length===0)return null;const l=((d=r[t])==null?void 0:d.id)||(r.length>0?r[0].id:"boarding");return e.jsx("div",{className:mt.searchSitterWrapper,children:e.jsxs("div",{className:mt.searchSitter,children:[e.jsx("ul",{className:mt.tabs,children:r.map((o,h)=>{var x,w;return e.jsx("li",{className:`${mt.tabItem} ${((x=r[t])==null?void 0:x.id)===o.id?mt.active:""}`,onClick:()=>s(h),role:"tab","aria-selected":((w=r[t])==null?void 0:w.id)===o.id,tabIndex:0,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&s(h)},children:e.jsxs("div",{className:mt.tabContent,children:[e.jsx(o.Icon,{className:mt.tabIcon,width:22,height:22,color:"currentColor"}),e.jsxs("div",{className:mt.tabText,children:[e.jsx("h3",{className:mt.tabName,children:o.name}),e.jsx("span",{className:mt.tabDescription,children:o.description})]})]})},o.id)})}),e.jsx("div",{className:mt.body,children:e.jsx(Ti,{serviceType:l})})]})})},Hi=({isPreloading:t,backgroundImage:s,onCreateOrderClick:n})=>{const{t:i}=ae(),{scrollY:a}=ba(),r=Na(a,[0,1e3],[0,400]);return e.jsxs("section",{className:"hero",children:[e.jsxs("div",{className:"hero__bg-container",children:[e.jsx(de.div,{className:"hero__bg-layer",style:{backgroundImage:`url(${s})`,y:r}}),e.jsx("div",{className:"hero__overlay"})]}),e.jsxs(de.div,{className:"hero__main-content",initial:{opacity:0,y:30},animate:t?{}:{opacity:1,y:0},transition:{delay:.2,duration:.8,ease:[.25,.8,.25,1]},children:[e.jsx("h1",{children:i("hero.welcome")}),e.jsx(de.p,{className:"hero__description",initial:{opacity:0,y:20},animate:t?{}:{opacity:1,y:0},transition:{delay:.4,duration:.8,ease:"easeOut"},children:i("hero.heroDescription")}),e.jsx("div",{className:"search-sitter-wrapper",children:e.jsx(Ui,{})}),e.jsxs(de.div,{className:"hero__alternative-cta",initial:{opacity:0},animate:t?{}:{opacity:1},transition:{delay:.6,duration:.5},children:[e.jsx("div",{className:"divider-with-text",children:e.jsx("span",{children:i("hero.orDivider","ИЛИ")})}),e.jsxs("button",{onClick:n,className:"btn-create-request",children:[e.jsx("span",{className:"icon",children:"⚡️"}),e.jsxs("div",{className:"text-col",children:[e.jsx("span",{className:"btn-title",children:i("hero.createRequestTitle","Создать заявку")}),e.jsx("span",{className:"btn-sub",children:i("hero.createRequestSub","Опишите задачу — ситтеры откликнутся сами")})]}),e.jsx("span",{className:"arrow",children:"→"})]})]})]})]})},qi="/assets/step1-DK2_w_zr.png",Vi="/assets/step2-4EQcI170.png",Ki="/assets/step3-CQFmXxwq.png",Yi=()=>{const{t}=ae(),s=[{id:"step1",imageUrl:qi,titleKey:"howItWorksSimple.step1.title",descriptionKey:"howItWorksSimple.step1.desc"},{id:"step2",imageUrl:Vi,titleKey:"howItWorksSimple.step2.title",descriptionKey:"howItWorksSimple.step2.desc"},{id:"step3",imageUrl:Ki,titleKey:"howItWorksSimple.step3.title",descriptionKey:"howItWorksSimple.step3.desc"}],n={hidden:{opacity:0,y:25},visible:r=>({opacity:1,y:0,transition:{delay:r*.2,duration:.55,ease:"easeOut"}})},i={hidden:{scaleX:0,opacity:0,originX:0},visible:{scaleX:1,opacity:1,transition:{duration:.4,ease:"circOut"}}},a={hidden:{scaleY:0,opacity:0,originY:0},visible:{scaleY:1,opacity:1,transition:{duration:.4,ease:"circOut"}}};return e.jsxs("section",{className:"how-it-works-simple",children:[" ",e.jsxs("div",{className:"wrapper",children:[e.jsx(de.h2,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.6,ease:"easeOut"},children:t("howItWorksSimple.sectionTitle","Как это работает? Всего 3 шага!")}),e.jsx("div",{className:"steps-container",children:s.map((r,l)=>e.jsxs(qt.Fragment,{children:[e.jsxs(de.div,{className:"step",custom:l,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},variants:n,children:[e.jsx("img",{src:r.imageUrl,alt:t(r.titleKey),className:"step-image"}),e.jsx("h3",{children:t(r.titleKey)}),e.jsx("p",{children:t(r.descriptionKey)})]}),l<s.length-1&&e.jsx(de.div,{className:"step-connector",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{delay:l*.2+.25,duration:.5,ease:"easeOut"},variants:window.innerWidth>768?i:a})]},r.id))})]})]})},Zi=()=>e.jsxs("svg",{width:"32",height:"36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{filter:"url(#filter0_ii_google)",children:[" ",e.jsx("path",{d:"M.914 1.176C.526 1.592.297 2.237.297 3.073v29.856c0 .837.23 1.481.617 1.897l.099.097 16.519-16.725v-.394L1.012 1.078l-.098.098z",fill:"url(#paint0_linear_google)"}),e.jsx("path",{d:"M23.037 23.775l-5.506-5.577v-.394l5.507-5.575.124.071 6.524 3.753c1.863 1.072 1.863 2.826 0 3.899l-6.524 3.753-.125.07z",fill:"url(#paint1_linear_google)"}),e.jsx("g",{filter:"url(#filter1_i_google)",children:e.jsx("path",{d:"M23.162 23.704L17.53 18 .914 34.828c.613.658 1.628.74 2.77.083l19.478-11.206z",fill:"url(#paint2_linear_google)"})}),e.jsx("path",{d:"M23.162 12.299L3.685 1.094C2.542.436 1.527.519.915 1.178L17.53 18.003l5.631-5.704z",fill:"url(#paint3_linear_google)"})]}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"paint0_linear_google",x1:"16.067",y1:"2.757",x2:"-6.587",y2:"25.131",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#00A0FF"}),e.jsx("stop",{offset:".007",stopColor:"#00A1FF"}),e.jsx("stop",{offset:".26",stopColor:"#00BEFF"}),e.jsx("stop",{offset:".512",stopColor:"#00D2FF"}),e.jsx("stop",{offset:".76",stopColor:"#00DFFF"}),e.jsx("stop",{offset:"1",stopColor:"#00E3FF"})]}),e.jsxs("linearGradient",{id:"paint1_linear_google",x1:"32.111",y1:"18.001",x2:"-.151",y2:"18.001",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#FFE000"}),e.jsx("stop",{offset:".409",stopColor:"#FFBD00"}),e.jsx("stop",{offset:".775",stopColor:"orange"}),e.jsx("stop",{offset:"1",stopColor:"#FF9C00"})]}),e.jsxs("linearGradient",{id:"paint2_linear_google",x1:"20.104",y1:"21.098",x2:"-10.618",y2:"51.441",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#FF3A44"}),e.jsx("stop",{offset:"1",stopColor:"#C31162"})]}),e.jsxs("linearGradient",{id:"paint3_linear_google",x1:"-3.271",y1:"-8.761",x2:"10.447",y2:"4.787",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#32A071"}),e.jsx("stop",{offset:".069",stopColor:"#2DA771"}),e.jsx("stop",{offset:".476",stopColor:"#15CF74"}),e.jsx("stop",{offset:".801",stopColor:"#06E775"}),e.jsx("stop",{offset:"1",stopColor:"#00F076"})]}),e.jsxs("filter",{id:"filter0_ii_google",x:".297",y:".64",width:"30.786",height:"34.723",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[e.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),e.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),e.jsx("feOffset",{dy:"-.15"}),e.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),e.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),e.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow"}),e.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),e.jsx("feOffset",{dy:".15"}),e.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),e.jsx("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),e.jsx("feBlend",{in2:"effect1_innerShadow",result:"effect2_innerShadow"})]}),e.jsxs("filter",{id:"filter1_i_google",x:".914",y:"18.002",width:"22.248",height:"17.362",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[e.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),e.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),e.jsx("feOffset",{dy:"-.15"}),e.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),e.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),e.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow"})]})]})]}),Qi=()=>e.jsx("svg",{width:"28",height:"33",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M23.153 17.451a7.483 7.483 0 013.535-6.228A7.692 7.692 0 0020.7 7.986c-2.519-.264-4.96 1.508-6.244 1.508-1.309 0-3.285-1.481-5.413-1.437a8.038 8.038 0 00-6.71 4.091c-2.9 5.023-.737 12.404 2.042 16.465 1.39 1.988 3.016 4.208 5.142 4.13 2.08-.087 2.857-1.327 5.369-1.327 2.488 0 3.217 1.326 5.386 1.276 2.233-.036 3.64-1.997 4.981-4.003a16.443 16.443 0 002.278-4.64c-2.624-1.109-4.376-3.75-4.379-6.598zM19.055 5.316A7.309 7.309 0 0020.727.081a7.436 7.436 0 00-4.811 2.489A7.018 7.018 0 0014.2 7.612a6.22 6.22 0 004.855-2.296z",fill:"#fff"})}),Xi=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Ji=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})}),er=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),tr=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 16H7V8h10v11zM9 10h2v2H9zm4 0h2v2h-2zm-4 3h2v2H9zm4 0h2v2h-2z"})}),sr=768,gs=(t,s,n)=>{if(!n)return t;const i=t.includes("?")?"&":"?";return`${t}${i}${s}=${n}`},nr=()=>{const{t}=ae(),[s,n]=c.useState(!1),{versionConfig:i}=Be(g=>g.config),a="https://2865b09b-9c30-4898-857f-c4fc1f7d0cab.selstorage.ru/appdemo.mp4",r="https://petsok.fra1.cdn.digitaloceanspaces.com/frontend/app-poster.jpg",[l,d]=c.useState(Re.appUniversalUrl),[o,h]=c.useState(Re.appStoreUrl),[x,w]=c.useState(Re.googlePlayUrl);c.useEffect(()=>{const g=()=>{n(window.innerWidth<sr)};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),c.useEffect(()=>{var S,B;const g=((S=i==null?void 0:i.ios)==null?void 0:S.url)||Re.appStoreUrl,u=((B=i==null?void 0:i.android)==null?void 0:B.url)||Re.googlePlayUrl,y=Re.appUniversalUrl,_=Rw();_?(d(gs(y,Re.referralParamName,_)),h(gs(g,Re.referralParamName,_)),w(gs(u,Re.referralParamName,_))):(d(y),h(g),w(u))},[i]);const N=[{icon:e.jsx(Xi,{}),titleKey:"mobileAppPromo.features.search"},{icon:e.jsx(Ji,{}),titleKey:"mobileAppPromo.features.chat"},{icon:e.jsx(er,{}),titleKey:"mobileAppPromo.features.photos"},{icon:e.jsx(tr,{}),titleKey:"mobileAppPromo.features.manage"}],v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},m={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5,ease:"easeOut"}}},j={hidden:{opacity:0,x:20,scale:.95},visible:{opacity:1,x:0,scale:1,transition:{duration:.6,ease:"easeOut",delay:.1}}},P={hidden:{opacity:0,scale:.8,y:10},visible:{opacity:1,scale:1,y:0,transition:{duration:.4,ease:"easeOut",delay:.2}}};return e.jsx(de.section,{className:"mobile-app-promo-section",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:v,children:e.jsxs("div",{className:"wrapper",children:[" ",e.jsx("div",{className:"mobile-app-promo-section__main-title-wrapper",children:e.jsx(de.h2,{variants:m,children:t("mobileAppPromo.sectionTitle","PetsOk в вашем кармане: Максимум удобства для вас и вашего любимца!")})}),e.jsxs("div",{className:"mobile-app-promo-section__content",children:[e.jsxs(de.div,{className:"mobile-app-promo-section__info-block",children:[e.jsx(de.h3,{variants:m,children:t("mobileAppPromo.featuresTitle","Всё для вашего удобства в приложении:")}),e.jsx("ul",{className:"features-list",children:N.map((g,u)=>e.jsxs(de.li,{initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.8},variants:m,transition:{delay:u*.08+.2},children:[e.jsx("span",{className:"feature-icon",children:g.icon}),e.jsx("span",{className:"feature-title",children:t(g.titleKey)})]},g.titleKey))}),e.jsx(de.p,{className:"mobile-app-promo-section__cta-text",variants:m,transition:{delay:.4},children:t("mobileAppPromo.ctaText","Установите приложение PetsOk сегодня и сделайте заботу о питомце проще, чем когда-либо!")}),e.jsx(de.div,{className:"download-buttons-wrapper",variants:m,transition:{delay:.5},children:e.jsxs("div",{className:"download-buttons",children:[e.jsxs(de.a,{className:"download-button apple",href:o,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05,y:-3,boxShadow:"0 10px 20px -5px rgba(0,0,0,0.2)"},whileTap:{scale:.97},"aria-label":t("mobileApp.downloadIOS","Загрузите в App Store"),children:[e.jsx(Qi,{}),e.jsx("span",{children:t("mobileApp.downloadIOSShort","App Store")})]}),e.jsxs(de.a,{className:"download-button google",href:x,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05,y:-3,boxShadow:"0 10px 20px -5px rgba(0,0,0,0.2)"},whileTap:{scale:.97},"aria-label":t("mobileApp.downloadAndroid","Доступно в Google Play"),children:[e.jsx(Zi,{}),e.jsx("span",{children:t("mobileApp.downloadAndroidShort","Google Play")})]})]})}),e.jsx(de.p,{className:"mobile-app-promo-section__availability-note",variants:m,transition:{delay:.6},children:t("mobileAppPromo.availabilityNote","Бесплатно для iOS и Android")})]}),e.jsx(de.div,{className:"mobile-app-promo-section__qr-center-block",variants:P,children:e.jsxs("div",{className:"qr-code-item",children:[e.jsx(jn,{value:l,size:120,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#1A202C"}),e.jsxs("p",{className:"qr-code-cta-text",children:[e.jsx("strong",{children:t("mobileAppPromo.scanToDownloadStrong","Сканируйте")}),t("mobileAppPromo.scanToDownloadRest"," для загрузки!")]})]})}),!s&&e.jsx(de.div,{className:"mobile-app-promo-section__video-block",variants:j,children:e.jsx("div",{className:"phone-video-wrapper",children:e.jsxs("video",{className:"phone-mockup-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata",poster:r,"aria-label":t("mobileAppPromo.videoAlt","Демонстрация мобильного приложения PetsOk"),children:[e.jsx("source",{src:a,type:"video/mp4"}),"Ваш браузер не поддерживает тэг video."]})})})]})]})})},ar=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("polyline",{points:"9 12 12 15 22 5"})]}),ir=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),rr=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),or=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),cr={boarding:{title:"ourServices.boarding.title",desc:"ourServices.boarding.desc"},walking:{title:"ourServices.walking.title",desc:"ourServices.walking.desc"},drop_in_visit:{title:"ourServices.dropIn.title",desc:"ourServices.dropIn.desc"},doggy_day_care:{title:"ourServices.dayNanny.title",desc:"ourServices.dayNanny.desc"},house_sitting:{title:"ourServices.houseSitting.title",desc:"ourServices.houseSitting.desc"}},lr=()=>{const{t}=ae(),{activeServices:s,isConfigLoaded:n}=Be(o=>o.config),i=c.useMemo(()=>kn.filter(o=>n?s.includes(o.id):!0).map(o=>{const h=cr[o.id];return{id:o.id,icon:e.jsx(o.IconComponent,{width:28,height:28}),titleKey:(h==null?void 0:h.title)||o.nameKey,descriptionKey:(h==null?void 0:h.desc)||o.descriptionKey}}),[s,n]),a=[{icon:e.jsx(ar,{}),titleKey:"ourGuarantees.verifiedSitters.title",descriptionKey:"ourGuarantees.verifiedSitters.desc"},{icon:e.jsx(ir,{}),titleKey:"ourGuarantees.photoUpdates.title",descriptionKey:"ourGuarantees.photoUpdates.desc"},{icon:e.jsx(rr,{}),titleKey:"ourGuarantees.support.title",descriptionKey:"ourGuarantees.support.desc"},{icon:e.jsx(or,{}),titleKey:"ourGuarantees.securePayments.title",descriptionKey:"ourGuarantees.securePayments.desc"}],r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},d=i.length>0;return e.jsx(de.section,{className:"why-petsok-section",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.15},variants:r,children:e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{className:"why-petsok-section__main-title-wrapper",children:[e.jsx(de.h2,{variants:l,children:t("whyPetsOkNew.sectionTitle")}),e.jsx(de.p,{className:"subtitle",variants:l,children:t("whyPetsOkNew.sectionSubtitle")})]}),e.jsxs("div",{className:"why-petsok-section__content",children:[d&&e.jsxs(de.div,{className:"why-petsok-section__column services-column",variants:l,children:[e.jsx("h3",{children:t("whyPetsOkNew.servicesTitle")}),e.jsx("ul",{className:"info-list",children:i.map((o,h)=>e.jsxs(de.li,{custom:h,variants:l,children:[e.jsx("div",{className:"info-icon",children:o.icon}),e.jsxs("div",{className:"info-text",children:[e.jsx("h4",{children:t(o.titleKey)}),e.jsx("p",{children:t(o.descriptionKey)})]})]},o.id))})]}),e.jsxs(de.div,{className:"why-petsok-section__column guarantees-column",variants:l,children:[e.jsx("h3",{children:t("whyPetsOkNew.guaranteesTitle")}),e.jsx("ul",{className:"info-list",children:a.map((o,h)=>e.jsxs(de.li,{custom:h,variants:l,children:[e.jsx("div",{className:"info-icon",children:o.icon}),e.jsxs("div",{className:"info-text",children:[e.jsx("h4",{children:t(o.titleKey)}),e.jsx("p",{children:t(o.descriptionKey)})]})]},o.titleKey))}),e.jsx(de.a,{href:"/search",className:"cta-button-main",variants:l,whileHover:{scale:1.03,boxShadow:"0 8px 25px rgba(53, 152, 254, 0.4)"},whileTap:{scale:.98},children:t("header.link2","Найти ситтера")})]})]})]})})},dr=({isPreloading:t})=>{const{t:s}=ae(),n=nt(),{onAuthClick:i}=Ls(),a={"@context":"https://schema.org","@type":"Organization",name:"PetsOk",url:Re.siteUrl,logo:`${Re.siteUrl}/logo512.png`,contactPoint:{"@type":"ContactPoint",telephone:"+7-XXX-XXX-XX-XX",contactType:"Customer Service"}},r="/hero-bg.webp",l=()=>{localStorage.getItem("authToken")?n("/cabinet/orders/create"):i("register","client")};return e.jsxs(e.Fragment,{children:[e.jsxs(Nt,{children:[e.jsx("title",{children:s("seo.home.title")}),e.jsx("meta",{name:"description",content:s("seo.home.description")}),e.jsx("link",{rel:"preload",as:"image",href:r,fetchPriority:"high"}),e.jsx("link",{rel:"preload",href:"/fonts/raleway-v37-cyrillic_latin-700.woff2",as:"font",type:"font/woff2",crossOrigin:"anonymous"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(a)})]}),e.jsx(Hi,{isPreloading:t,backgroundImage:r,onCreateOrderClick:l}),e.jsx(lr,{}),e.jsx(Yi,{}),e.jsx(nr,{})]})},hr="/assets/sitter-hero-bg-DbJBwbhB.jpg",pr=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.65 6.35C16.2 7.8 14.2 7.8 12.75 6.35C11.3 4.9 11.3 2.9 12.75 1.45C14.2 0 16.2 0 17.65 1.45C19.1 2.9 19.1 4.9 17.65 6.35ZM6.35 6.35C7.8 4.9 7.8 2.9 6.35 1.45C4.9 0 2.9 0 1.45 1.45C0 2.9 0 4.9 1.45 6.35C2.9 7.8 4.9 7.8 6.35 6.35ZM22.55 1.45C21.1 0 19.1 0 17.65 1.45C16.2 2.9 16.2 4.9 17.65 6.35C19.1 7.8 21.1 7.8 22.55 6.35C24 4.9 24 2.9 22.55 1.45ZM1.45 12.55C2.9 11.1 4.9 11.1 6.35 12.55C7.8 14 7.8 16 6.35 17.45C4.9 18.9 2.9 18.9 1.45 17.45C0 16 0 14 1.45 12.55ZM12 9C9.24 9 7 11.24 7 14C7 16.76 9.24 19 12 19C14.76 19 17 16.76 17 14C17 11.24 14.76 9 12 9ZM12 24C9.24 24 7 21.76 7 19H17C17 21.76 14.76 24 12 24Z"})}),ur=()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#4CAF50",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),mr=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M6 11h8a4 4 0 0 0 0-8H9v18"}),e.jsx("path",{d:"M6 15h8"})]}),_r=({isPreloading:t,onGetStartedClick:s})=>{const{t:n}=ae();return e.jsxs("section",{className:"become-sitter-hero",children:[e.jsxs("div",{className:"become-sitter-hero__bg-container",children:[e.jsx("div",{className:"become-sitter-hero__bg-image",style:{backgroundImage:`url(${hr})`}}),e.jsx("div",{className:"become-sitter-hero__overlay"})]}),e.jsxs("div",{className:"become-sitter-hero__content wrapper",children:[e.jsxs("div",{className:"become-sitter-hero__text-col",children:[e.jsxs(de.div,{className:"become-sitter-hero__badge",initial:{opacity:0,y:20},animate:t?{}:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(pr,{}),e.jsx("span",{children:n("becomeSitter.heroBadge")})]}),e.jsx(de.h1,{initial:{opacity:0,y:30},animate:t?{}:{opacity:1,y:0},transition:{delay:.3,duration:.7},children:n("becomeSitter.heroTitle")}),e.jsx(de.p,{className:"become-sitter-hero__subtitle",initial:{opacity:0,y:20},animate:t?{}:{opacity:1,y:0},transition:{delay:.5,duration:.7},children:n("becomeSitter.heroSubtitle")}),e.jsx(de.button,{type:"button",onClick:s,className:"become-sitter-hero__cta-button",initial:{opacity:0,scale:.9},animate:t?{}:{opacity:1,scale:1},transition:{delay:.7,duration:.4},whileHover:{scale:1.05},whileTap:{scale:.95},children:n("becomeSitter.ctaButton")})]}),e.jsx(de.div,{className:"become-sitter-hero__visual-col",initial:{opacity:0,x:50},animate:t?{}:{opacity:1,x:0},transition:{delay:.6,duration:.8},children:e.jsxs("div",{className:"income-card",children:[e.jsxs("div",{className:"income-card__header",children:[e.jsx("div",{className:"icon-box",children:e.jsx(mr,{})}),e.jsx("span",{children:n("becomeSitter.earningsLabel")})]}),e.jsxs("div",{className:"income-card__amount",children:[n("becomeSitter.earningsAmount"),e.jsxs("small",{children:["/ ",n("common.month")]})]}),e.jsx("div",{className:"income-card__divider"}),e.jsxs("div",{className:"income-card__footer",children:[e.jsx(ur,{}),e.jsx("span",{children:n("becomeSitter.earningsNote")})]}),e.jsxs("div",{className:"zero-commission-sticker",children:[e.jsx("span",{className:"percent",children:"0%"}),e.jsx("span",{className:"text",children:"Комиссия"})]})]})})]})]})},xr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#FFC107",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),gr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#3598FE",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),vr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#38A169",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}),fr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#E53E3E",children:e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),jr=()=>{const{t}=ae(),s=[{id:"benefit1",icon:e.jsx(xr,{}),titleKey:"becomeSitter.benefit1Title",descriptionKey:"becomeSitter.benefit1Desc",isHighlight:!0},{id:"benefit2",icon:e.jsx(gr,{}),titleKey:"becomeSitter.benefit2Title",descriptionKey:"becomeSitter.benefit2Desc"},{id:"benefit3",icon:e.jsx(vr,{}),titleKey:"becomeSitter.benefit3Title",descriptionKey:"becomeSitter.benefit3Desc"},{id:"benefit4",icon:e.jsx(fr,{}),titleKey:"becomeSitter.benefit4Title",descriptionKey:"becomeSitter.benefit4Desc"}],n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return e.jsx(de.section,{className:"why-become-sitter",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:n,children:e.jsxs("div",{className:"wrapper",children:[e.jsx(de.h2,{className:"why-become-sitter__title",variants:i,children:t("becomeSitter.benefitsTitle")}),e.jsx("div",{className:"why-become-sitter__benefits-grid",children:s.map((a,r)=>e.jsxs(de.div,{className:`benefit-card ${a.isHighlight?"benefit-card--highlight":""}`,custom:r,variants:i,children:[e.jsx("div",{className:"benefit-card__icon-wrapper",children:a.icon}),e.jsx("h3",{className:"benefit-card__title",children:t(a.titleKey)}),e.jsx("p",{className:"benefit-card__description",children:t(a.descriptionKey)})]},a.id))})]})})},yr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#3598FE",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),wr=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#3598FE",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}),br=()=>e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#3598FE",children:e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})}),Nr=()=>{const{t}=ae(),s=[{icon:e.jsx(yr,{}),titleKey:"becomeSitter.step1Title",descriptionKey:"becomeSitter.step1Desc"},{icon:e.jsx(wr,{}),titleKey:"becomeSitter.step2Title",descriptionKey:"becomeSitter.step2Desc"},{icon:e.jsx(br,{}),titleKey:"becomeSitter.step3Title",descriptionKey:"becomeSitter.step3Desc"}],n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return e.jsx(de.section,{className:"how-it-works-sitter-steps",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:n,children:e.jsxs("div",{className:"wrapper",children:[e.jsx(de.h2,{variants:i,children:t("becomeSitter.stepsTitle")}),e.jsx("div",{className:"how-it-works-sitter-steps__grid",children:s.map((a,r)=>e.jsxs(de.div,{className:"step-card",variants:i,children:[e.jsxs("div",{className:"step-card__top",children:[e.jsxs("span",{className:"step-card__number",children:["0",r+1]}),e.jsx("div",{className:"step-card__icon",children:a.icon})]}),e.jsx("h3",{className:"step-card__title",children:t(a.titleKey)}),e.jsx("p",{className:"step-card__description",children:t(a.descriptionKey)})]},r))})]})})},Sr=({onGetStartedClick:t})=>{const{t:s}=ae();return e.jsx(de.section,{className:"final-sitter-cta",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.3},transition:{duration:.7,ease:"easeOut"},children:e.jsxs("div",{className:"final-sitter-cta__content",children:[e.jsx(de.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,ease:"easeOut",delay:.1},children:s("finalCtaSitter.title")}),e.jsx(de.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,ease:"easeOut",delay:.25},children:s("finalCtaSitter.subtitle")}),e.jsx(de.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,ease:"backOut",delay:.4},children:e.jsx("button",{type:"button",onClick:t,className:"final-sitter-cta__button",children:s("finalCtaSitter.cta")})})]})})},kr=()=>{const{t}=ae(),{activeServices:s,isConfigLoaded:n}=Be(l=>l.config),i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},r=ka.filter(l=>n?s.includes(l.id):!0);return r.length===0?null:e.jsxs(de.section,{className:"offerable-services-section wrapper",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.15},variants:i,children:[e.jsx(de.h2,{variants:a,children:t("offerableServicesSection.sectionTitle")}),e.jsx(de.p,{className:"offerable-services-section__subtitle",variants:a,children:t("offerableServicesSection.sectionSubtitle")}),e.jsx("div",{className:"offerable-services-section__grid",children:r.map((l,d)=>e.jsxs(de.div,{className:`service-item-card ${l.highlightKey?"highlighted":""}`,custom:d,variants:a,children:[l.highlightKey&&e.jsx("span",{className:"service-item-card__highlight-badge",children:t(l.highlightKey)}),e.jsx("div",{className:"service-item-card__icon",children:l.IconComponent&&e.jsx(l.IconComponent,{width:28,height:28,color:"currentColor"})}),e.jsx("h3",{className:"service-item-card__title",children:t(l.nameKey)}),e.jsx("p",{className:"service-item-card__description",children:t(l.descKey)})]},l.id))})]})},Cr=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"#4CAF50",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ir=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"#3598FE",children:e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"})}),Ar=()=>{const{t}=ae(),s=[{titleKey:"becomeSitter.appFeature1Title",descKey:"becomeSitter.appFeature1Desc"},{titleKey:"becomeSitter.appFeature2Title",descKey:"becomeSitter.appFeature2Desc"},{titleKey:"becomeSitter.appFeature3Title",descKey:"becomeSitter.appFeature3Desc"}];return e.jsx("section",{className:"sitter-app-preview wrapper",children:e.jsxs("div",{className:"sitter-app-preview__content",children:[e.jsxs(de.div,{className:"sitter-app-preview__text",initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{children:t("becomeSitter.appPreviewTitle")}),e.jsx("p",{children:t("becomeSitter.appPreviewSubtitle")}),e.jsx("ul",{className:"app-features-list",children:s.map((n,i)=>e.jsxs("li",{children:[e.jsx("div",{className:"check-icon",children:e.jsx(Cr,{})}),e.jsxs("div",{children:[e.jsx("strong",{children:t(n.titleKey)}),e.jsx("span",{children:t(n.descKey)})]})]},i))})]}),e.jsx(de.div,{className:"sitter-app-preview__visual",initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:e.jsx("div",{className:"phone-mockup",children:e.jsxs("div",{className:"phone-screen",children:[e.jsxs("div",{className:"app-top-bar",children:[e.jsxs("div",{children:["Добрый вечер, ",e.jsx("br",{}),e.jsx("b",{children:"Александр"})]}),e.jsx("div",{className:"avatar",children:"А"})]}),e.jsxs("div",{className:"metrics-row",children:[e.jsxs("div",{className:"metric-card green",children:[e.jsx("div",{className:"icon",children:"💰"}),e.jsx("div",{className:"val",children:"45 500 ₽"}),e.jsx("div",{className:"lbl",children:"За 30 дней"})]}),e.jsxs("div",{className:"metric-card blue",children:[e.jsx("div",{className:"icon",children:"⏳"}),e.jsx("div",{className:"val",children:"3 200 ₽"}),e.jsx("div",{className:"lbl",children:"В ожидании"})]})]}),e.jsxs("div",{className:"tabs-row",children:[e.jsxs("div",{className:"tab active",children:[e.jsx(Ir,{})," Активность (2)"]}),e.jsx("div",{className:"tab",children:"Заказы"})]}),e.jsxs("div",{className:"feed-list",children:[e.jsxs("div",{className:"feed-item invite",children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("div",{className:"badge blue",children:"Новое приглашение"}),e.jsx("div",{className:"time",children:"2 мин"})]}),e.jsxs("div",{className:"feed-body",children:[e.jsx("h4",{children:"Передержка • Корги"}),e.jsx("p",{children:"15 — 17 мая (2 ночи)"})]}),e.jsx("div",{className:"feed-price",children:"4 500 ₽"}),e.jsx("div",{className:"btn-row",children:e.jsx("div",{className:"btn-sml accept",children:"Принять"})})]}),e.jsxs("div",{className:"feed-item payout",children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("div",{className:"badge green",children:"Выплачено"}),e.jsx("div",{className:"time",children:"Вчера"})]}),e.jsx("div",{className:"feed-body",children:e.jsx("h4",{children:"Выплата за неделю"})}),e.jsx("div",{className:"feed-price success",children:"+ 12 400 ₽"})]})]})]})})})]})})},Br=({isPreloading:t=!1})=>{const{t:s}=ae(),n=nt(),{onAuthClick:i}=Ls(),{isAuthenticated:a}=Be(d=>d.auth),r=()=>{a?n("/cabinet/become-sitter"):i&&i("register","sitter")},l={"@context":"https://schema.org","@type":"Service",serviceType:"Pet Sitting Job",provider:{"@type":"Organization",name:"PetsOk"},description:s("seo.becomeASitter.description"),name:s("seo.becomeASitter.title")};return e.jsxs(e.Fragment,{children:[e.jsxs(Nt,{children:[e.jsx("title",{children:s("seo.becomeASitter.title")}),e.jsx("meta",{name:"description",content:s("seo.becomeASitter.description")}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(l)})]}),e.jsx(_r,{isPreloading:t,onGetStartedClick:r}),e.jsx(jr,{}),e.jsx(Nr,{}),e.jsx(Ar,{}),e.jsx(kr,{}),e.jsx(Sr,{onGetStartedClick:r}),e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#718096",fontSize:"14px",backgroundColor:"#F8F9FB"},children:s("becomeSitter.trustFooter")})]})},Pr="_cookieConsentBanner_1hz2p_1",Tr="_cookieText_1hz2p_26",Lr="_cookieLink_1hz2p_38",Mr="_acceptButton_1hz2p_48",ts={cookieConsentBanner:Pr,cookieText:Tr,cookieLink:Lr,acceptButton:Mr},Us="cookie_consent_given",Er=()=>{const{t}=ae(),[s,n]=c.useState(!1);c.useEffect(()=>{At.get(Us)||n(!0)},[]);const i=()=>{At.set(Us,"true",{expires:365,path:"/"}),n(!1)};return s?e.jsxs("div",{className:ts.cookieConsentBanner,children:[e.jsxs("p",{className:ts.cookieText,children:[t("cookieConsent.text","Мы используем файлы cookie, чтобы улучшить ваш опыт на нашем сайте. Оставаясь на сайте, вы соглашаетесь с нашей "),e.jsx("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:ts.cookieLink,children:t("cookieConsent.policyLink","Политикой конфиденциальности и использования cookie")}),"."]}),e.jsx("button",{onClick:i,className:ts.acceptButton,children:t("cookieConsent.acceptButton","Понятно")})]}):null},Rr={user:null,token:localStorage.getItem("authToken"),refreshToken:localStorage.getItem("refreshToken"),isAuthenticated:!!localStorage.getItem("authToken"),isLoading:!1,status:"idle",error:null,contactCheckError:null,otpError:null},ms=async t=>{localStorage.setItem("authToken",t.accessToken),t.refreshToken&&localStorage.setItem("refreshToken",t.refreshToken);try{const s=await Cn();return{...t,user:s,data:s}}catch(s){return console.error("Failed to fetch profile immediately after auth",s),t}},is=gt("auth/checkContactExists",async(t,{rejectWithValue:s})=>{var n,i;try{const a=t.contactType==="phone"?{phone:t.contactValue}:{email:t.contactValue};return await Ia(a)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Failed to check contact")}}),Wt=gt("auth/sendOtp",async(t,{rejectWithValue:s})=>{var n,i;try{const r={...t.contactType==="phone"?{phone:t.contactValue}:{email:t.contactValue},operation:t.operation};return await Aa(r)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Failed to send OTP")}}),rs=gt("auth/verifyOtp",async(t,{rejectWithValue:s})=>{var n,i;try{const r={...t.contactType==="phone"?{phone:t.contactValue}:{email:t.contactValue},code:t.code,operation:t.operation};return await Ba(r)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Invalid OTP code")}}),Cs=gt("auth/register",async({registrationData:t,registrationType:s},{rejectWithValue:n})=>{var i,a;try{const r={...t,source:"website",registration_type:s};["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(o=>{const h=At.get(o);h&&(r[o]=h)});const d=await Pa(r);return await ms(d)}catch(r){return n(((a=(i=r.response)==null?void 0:i.data)==null?void 0:a.message)||r.message||"Registration failed")}}),En=gt("auth/login",async(t,{rejectWithValue:s})=>{var n,i;try{const a=await Ta(t);return await ms(a)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Login failed")}}),$r=gt("auth/loginWithGoogle",async(t,{rejectWithValue:s})=>{var n,i;try{const a=await La(t.idToken);return await ms(a)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Google login failed")}}),Fr=gt("auth/loginWithApple",async(t,{rejectWithValue:s})=>{var n,i;try{const a=await Ma(t.appleAuthData);return await ms(a)}catch(a){return s(((i=(n=a.response)==null?void 0:n.data)==null?void 0:i.message)||a.message||"Apple login failed")}}),Bt=gt("auth/loadUser",async(t,{getState:s,rejectWithValue:n})=>{var a,r;if(!s().auth.token)return n("No token found");try{return await Cn()}catch(l){return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),n(((r=(a=l.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to load user")}}),Rn=Vt({name:"auth",initialState:Rr,reducers:{logout:t=>{t.user=null,t.token=null,t.refreshToken=null,t.isAuthenticated=!1,t.isLoading=!1,t.status="idle",t.error=null,t.contactCheckError=null,t.otpError=null,localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken")},clearAuthErrors:t=>{t.error=null,t.contactCheckError=null,t.otpError=null},resetAuthFlow:t=>{t.status="idle",t.contactCheckError=null,t.otpError=null,t.error=null,t.isLoading=!1}},extraReducers:t=>{const s=(a,r)=>{a.isLoading=!0,r&&(a.status=r),a.contactCheckError=null,a.otpError=null,a.error=null},n=(a,r)=>{var d,o;a.isLoading=!1,a.status="succeeded",a.isAuthenticated=!0;const l=r.payload.user||r.payload.data;l?a.user={...l,isSitter:((d=l.roles)==null?void 0:d.includes("sitter"))||((o=l.roles)==null?void 0:o.includes("admin"))||l.isSitter}:(a.user=null,console.warn("User data was still null in fulfilled auth action payload (fetch failed?).")),a.token=r.payload.accessToken,a.refreshToken=r.payload.refreshToken||null,a.error=null},i=(a,r)=>{a.isLoading=!1,a.status="failed",a.error=r.payload??"An unknown error occurred"};t.addCase(is.pending,a=>s(a,"checking_contact")).addCase(is.fulfilled,(a,r)=>{a.isLoading=!1,a.status=r.payload.exists?"contact_exists":"contact_new"}).addCase(is.rejected,(a,r)=>{a.isLoading=!1,a.status="failed",a.contactCheckError=r.payload??"An unknown error occurred"}),t.addCase(Wt.pending,a=>s(a,"otp_sending")).addCase(Wt.fulfilled,(a,r)=>{var l,d;a.isLoading=!1,((l=r.payload.data)==null?void 0:l.code)===200||r.payload.success===!0?a.status="otp_sent":(a.status="failed",a.otpError=r.payload.message||((d=r.payload.data)==null?void 0:d.message)||"Failed to send OTP")}).addCase(Wt.rejected,(a,r)=>{a.isLoading=!1,a.status="failed",a.otpError=r.payload??"An unknown error occurred"}),t.addCase(rs.pending,a=>s(a,"otp_verifying")).addCase(rs.fulfilled,(a,r)=>{a.isLoading=!1,a.status=r.payload.success?r.meta.arg.operation==="register"?"otp_verified_register":"otp_verified_reset":"failed",r.payload.success||(a.otpError=r.payload.message||"Invalid OTP code")}).addCase(rs.rejected,(a,r)=>{a.isLoading=!1,a.status="failed",a.otpError=r.payload??"An unknown error occurred"}),[Cs,En,$r,Fr].forEach(a=>{t.addCase(a.pending,r=>{let l="logging_in";a.typePrefix===Cs.typePrefix&&(l="registering"),s(r,l)}),t.addCase(a.fulfilled,n),t.addCase(a.rejected,i)}),t.addCase(Bt.pending,a=>{a.isLoading=!0}).addCase(Bt.fulfilled,(a,r)=>{var l,d;a.isLoading=!1,a.isAuthenticated=!0,a.user={...r.payload,isSitter:((l=r.payload.roles)==null?void 0:l.includes("sitter"))||((d=r.payload.roles)==null?void 0:d.includes("admin"))||r.payload.isSitter}}).addCase(Bt.rejected,(a,r)=>{a.isLoading=!1,a.isAuthenticated=!1,a.user=null,a.token=null,a.refreshToken=null,console.warn("AuthSlice: Load user rejected - ",r.payload)})}}),{logout:Jt,clearAuthErrors:pt,resetAuthFlow:ss}=Rn.actions,Or=Rn.reducer,Dr={headers:{},maintenance:{enabled:!1,message:""},versionConfig:null,activeServices:[],headerMessages:[],systemMessages:[],isConfigLoaded:!1,loading:!1,error:null},os=gt("config/loadAppConfig",async(t,{rejectWithValue:s})=>{try{return await Ra()}catch(n){return s(n.message||"Failed to fetch config")}}),$n=Vt({name:"config",initialState:Dr,reducers:{updateHeaders(t,s){t.headers={...t.headers,...s.payload}}},extraReducers:t=>{t.addCase(os.pending,s=>{s.loading=!0,s.error=null}).addCase(os.fulfilled,(s,n)=>{var a,r;const i=n.payload;s.loading=!1,s.isConfigLoaded=!0,i.custom_headers&&(s.headers={...s.headers,...i.custom_headers}),s.maintenance=i.maintenance||{enabled:!1,message:""},s.versionConfig=i.versions||null,s.activeServices=((a=i.features)==null?void 0:a.active_services)||[],s.headerMessages=((r=i.ui)==null?void 0:r.header_messages)||[],s.systemMessages=i.messages||[]}).addCase(os.rejected,(s,n)=>{s.loading=!1,s.error=n.payload||"Unknown error",s.isConfigLoaded=!0})}}),{updateHeaders:Kw}=$n.actions,Wr=$n.reducer,zr="_visuallyHidden_urdhb_1",Gr="_headerContainer_urdhb_13",Ur="_lightBackground_urdhb_27",Hr="_logo_urdhb_35",qr="_desktopNav_urdhb_38",Vr="_navItem_urdhb_38",Kr="_langButton_urdhb_40",Yr="_userMenuButtonDesktop_urdhb_41",Zr="_mobileMenuButton_urdhb_42",Qr="_active_urdhb_61",Xr="_container_urdhb_74",Jr="_headerWrapper_urdhb_95",eo="_open_urdhb_180",to="_userPopupPortalClass_urdhb_188",so="_headerActionsDesktop_urdhb_246",no="_userMenuContainer_urdhb_282",ao="_burgerIcon_urdhb_298",io="_userAvatarIcon_urdhb_302",ro="_userAvatarImage_urdhb_306",oo="_mobileMenuTrigger_urdhb_318",co="_mobileNavPanel_urdhb_361",lo="_mobileNavLinks_urdhb_382",ho="_mobileNavItem_urdhb_392",po="_mobileUserSection_urdhb_414",uo="_mobileLangButton_urdhb_422",mo="_authButton_urdhb_434",_o="_authButtonSecondary_urdhb_444",we={visuallyHidden:zr,headerContainer:Gr,lightBackground:Ur,logo:Hr,desktopNav:qr,navItem:Vr,langButton:Kr,userMenuButtonDesktop:Yr,mobileMenuButton:Zr,active:Qr,container:Xr,headerWrapper:Jr,open:eo,userPopupPortalClass:to,headerActionsDesktop:so,userMenuContainer:no,burgerIcon:ao,userAvatarIcon:io,userAvatarImage:ro,mobileMenuTrigger:oo,mobileNavPanel:co,mobileNavLinks:lo,mobileNavItem:ho,mobileUserSection:po,mobileLangButton:uo,authButton:mo,authButtonSecondary:_o},xo="_userPopupWrapper_v3kz2_1",go="_loadingText_v3kz2_8",vo="_userInfo_v3kz2_14",fo="_userAvatar_v3kz2_22",jo="_avatarPlaceholder_v3kz2_30",yo="_userDetails_v3kz2_43",wo="_userName_v3kz2_48",bo="_userRole_v3kz2_55",No="_popupLink_v3kz2_61",So="_popupAction_v3kz2_62",ko="_popupActionStrong_v3kz2_63",Co="_logoutButton_v3kz2_92",Io="_separator_v3kz2_100",He={userPopupWrapper:xo,loadingText:go,userInfo:vo,userAvatar:fo,avatarPlaceholder:jo,userDetails:yo,userName:wo,userRole:bo,popupLink:No,popupAction:So,popupActionStrong:ko,logoutButton:Co,separator:Io},Ao=({hide:t,handleOpenAuthModal:s,onClosePopup:n})=>{var x,w;const{t:i}=ae(),a=ot(),r=nt(),{user:l,isAuthenticated:d,isLoading:o}=Be(N=>N.auth),h=()=>{a(Jt()),n(),r("/")};return t?e.jsx("div",{className:`${He.userPopupContainer} ${t?He.visible:""}`,children:e.jsxs("div",{className:He.userPopupWrapper,children:[o&&!l&&e.jsx("p",{className:He.loadingText,children:i("loading","Загрузка...")}),d&&l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:He.userInfo,children:[(w=(x=l.avatar)==null?void 0:x.data)!=null&&w.preview_url?e.jsx("img",{src:l.avatar.data.preview_url,alt:l.name||"User Avatar",className:He.userAvatar}):e.jsx("div",{className:He.avatarPlaceholder,children:(l.name||l.email||"U")[0].toUpperCase()}),e.jsxs("div",{className:He.userDetails,children:[e.jsx("span",{className:He.userName,children:l.name||l.email}),l.isSitter?e.jsx("span",{className:He.userRole,children:i("userRoles.sitter","Ситтер")}):e.jsx("span",{className:He.userRole,children:i("cabinet.modeClient","Клиент")})]})]}),e.jsx(Ge,{to:"/cabinet",className:He.popupLink,onClick:n,children:i("cabinet.title","Личный кабинет")}),e.jsx(Ge,{to:"/help",className:He.popupLink,onClick:n,children:i("profile.help","Помощь и поддержка")}),e.jsx("hr",{className:He.separator}),e.jsx("button",{onClick:h,className:`${He.popupLink} ${He.logoutButton}`,children:i("profile.logout","Выйти")})]}):!o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{s("register","client"),n()},className:He.popupActionStrong,children:i("profile.signIn","Регистрация")}),e.jsx("button",{onClick:()=>{s("login","client"),n()},className:He.popupAction,children:i("profile.logIn","Войти")}),e.jsx("hr",{className:He.separator}),e.jsx(Ge,{to:"/become-a-sitter",className:He.popupLink,onClick:n,children:i("header.becomeSitter","Стать ситтером")}),e.jsx(Ge,{to:"/help",className:He.popupLink,onClick:n,children:i("header.help","Помощь")})]})]})}):null},Bo=localStorage.getItem("language")||"ru",Dt=[{code:"ru",name:"Русский",region:"Россия"}],Po={terms:{title:"Пользовательское соглашение (Публичная оферта) PetsOk",updateDate:"Дата вступления в силу: 20 января 2026 г.",content:[{type:"h2",text:"1. Термины и определения"},{type:"p",text:"В настоящем Соглашении используются следующие термины:"},{type:"ul",items:["<strong>Сервис (Платформа)</strong> — программно-аппаратный комплекс PetsOk, доступный на веб-сайте и в мобильных приложениях, предоставляющий Пользователям возможность поиска и предложения услуг по уходу за животными.","<strong>Администрация</strong> — Индивидуальный предприниматель Горохов Александр Олегович (ОГРНИП 324554300038584), являющийся правообладателем Сервиса.","<strong>Пользователь</strong> — дееспособное физическое лицо, прошедшее регистрацию на Сервисе.","<strong>Клиент (Владелец)</strong> — Пользователь, размещающий заявку на поиск услуг по уходу за животным.","<strong>Ситтер (Исполнитель)</strong> — Пользователь, прошедший процедуру верификации и разместивший предложение (оферту) об оказании услуг по уходу за животными (передержка, выгул, няня).","<strong>Сделка (Заказ)</strong> — договор возмездного оказания услуг, заключаемый напрямую между Клиентом и Ситтером с использованием технических средств Сервиса."]},{type:"h2",text:"2. Общие положения и Статус Сервиса"},{type:"p",text:"2.1. Настоящее Соглашение является публичной офертой в соответствии со ст. 437 ГК РФ. Регистрация на Сервисе или его фактическое использование означает безоговорочное принятие (акцепт) условий данного Соглашения."},{type:"p",text:"2.2. <strong>Роль Сервиса.</strong> PetsOk является информационным посредником (агрегатором). Мы предоставляем техническую возможность для встречи Клиентов и Ситтеров. <strong>Администрация не оказывает услуги по уходу за животными, не является работодателем Ситтеров и не несет ответственности за качество исполнения Сделок.</strong> Все обязательства по уходу за животным возникают непосредственно между Ситтером и Клиентом."},{type:"p",text:"2.3. Администрация оставляет за собой право вносить изменения в Соглашение. Продолжение использования Сервиса после публикации изменений означает согласие с ними."},{type:"h2",text:"3. Регистрация и Безопасность"},{type:"p",text:"3.1. Для доступа к функционалу Сервиса необходима регистрация. Пользователь обязуется предоставлять достоверные данные."},{type:"p",text:"3.2. <strong>Верификация Ситтеров.</strong> Для получения статуса Ситтера пользователь обязан пройти процедуру проверки (KYC), предоставив паспортные данные и иную информацию по запросу службы безопасности. Администрация вправе отказать в присвоении статуса без объяснения причин, руководствуясь внутренними критериями надежности."},{type:"p",text:"3.3. Пользователь несет ответственность за сохранность своих учетных данных. Действия, совершенные в Личном кабинете, признаются совершенными самим Пользователем."},{type:"h2",text:"4. Порядок заключения Сделок"},{type:"p",text:"4.1. Публикация анкеты Ситтера является приглашением делать оферты. Направление Клиентом запроса на бронирование является офертой на заключение договора оказания услуг."},{type:"p",text:"4.2. Подтверждение бронирования Ситтером и последующая оплата Заказа (или выбор иного способа расчета) признаются акцептом. С этого момента между Клиентом и Ситтером считается заключенным договор на условиях, указанных в карточке Заказа (вид услуги, даты, стоимость, особые условия)."},{type:"p",text:"4.3. <strong>Автоматическое формирование документов.</strong> Стороны соглашаются, что существенные условия каждой конкретной сделки (предмет, сроки, цена, данные о животном) фиксируются в электронном виде в интерфейсе Сервиса и имеют юридическую силу письменного договора, подписанного аналогом собственноручной подписи (АСП)."},{type:"h2",text:"5. Правила пользования услугами"},{type:"h3",text:"5.1. Обязанности Ситтера"},{type:"ul",items:["Оказать услугу лично, качественно и безопасно, в строгом соответствии с параметрами Заказа.","Обеспечивать животному доступ к воде, питанию и выгулу согласно рекомендациям Владельца.","Ежедневно предоставлять фото- или видеоотчет через мессенджер Сервиса.","В случае ЧП немедленно уведомить Клиента и Службу поддержки."]},{type:"h3",text:"5.2. Обязанности Клиента"},{type:"ul",items:["Предоставить достоверную информацию о здоровье, поведенческих особенностях и агрессивности животного.","Обеспечить Ситтера кормом, амуницией и лекарствами на весь период.","Быть на связи в период выполнения Заказа.","Забрать животное в установленный срок."]},{type:"h2",text:"6. Финансовые условия и Расчеты"},{type:"p",text:"6.1. <strong>Структура стоимости.</strong> Стоимость услуг, отображаемая в интерфейсе («Итоговая цена»), является конечной для Клиента. Она включает в себя:"},{type:"ul",items:["Вознаграждение Ситтера за оказание услуг по уходу.","Лицензионное вознаграждение Сервиса за предоставление права использования Платформы (Сервисный сбор), которое включено в общую стоимость.","Расходы на эквайринг и обработку платежей."]},{type:"p",text:"6.2. <strong>Порядок расчетов.</strong> Расчеты между Сторонами могут производиться с использованием механизма «Безопасная сделка» или иными способами, доступными в интерфейсе Сервиса (включая прямую оплату). В случае использования «Безопасной сделки» средства Клиента резервируются на транзитном счете и переводятся Ситтеру после завершения заказа. При выборе прямой оплаты между участниками (наличными или переводом на карту), Сервис не участвует в обработке платежа, не является получателем средств и не несет ответственности за их передачу или возврат."},{type:"p",text:"6.3. <strong>Подписки и Платные услуги.</strong> На Сервисе могут быть доступны платные подписки и дополнительные опции, расширяющие функциональные возможности аккаунта. В целях обеспечения непрерывности доступа к таким услугам, оплата может производиться на основе рекуррентных (периодических) платежей. Активируя соответствующую услугу, Пользователь дает согласие на автоматические списания денежных средств с привязанного счета согласно действующим тарифам до момента отключения услуги в настройках Личного кабинета."},{type:"p",text:"6.4. <strong>Налогообложение.</strong> Ситтеры самостоятельно несут ответственность за декларирование доходов и уплату налогов (НПД, ИП) в соответствии с законодательством своей юрисдикции. Сервис не является налоговым агентом Пользователей."},{type:"h2",text:"7. Отмена бронирования и Возвраты"},{type:"p",text:"7.1. <strong>Отмена Клиентом.</strong> В случае отмены заказа Клиентом более чем за 24 часа до начала, производится полный возврат средств (при использовании «Безопасной сделки»). При отмене менее чем за 24 часа Сервис вправе удержать часть суммы для компенсации убытков Ситтера."},{type:"p",text:"7.2. <strong>Отмена Ситтером.</strong> Ситтер не вправе отменять подтвержденный заказ без уважительной причины (документально подтвержденная болезнь, форс-мажор). В случае отмены Ситтером, Сервис оказывает содействие в возврате средств и подборе замены. К Ситтеру могут быть применены санкции вплоть до блокировки."},{type:"h2",text:"8. Ответственность и Ограничения"},{type:"p",text:"8.1. Сервис предоставляет программное обеспечение на условиях «как есть» (as is). Мы не гарантируем, что услуги Ситтеров будут соответствовать субъективным ожиданиям Клиента."},{type:"p",text:"8.2. <strong>Ограничение ответственности.</strong> Администрация не возмещает косвенные убытки, упущенную выгоду или моральный вред. Совокупная ответственность Сервиса по любым искам ограничивается суммой вознаграждения Сервиса (Сервисного сбора) по конкретной спорной Сделке."},{type:"p",text:"8.3. <strong>Медицинские расходы.</strong> Если животному потребовалась ветеринарная помощь:"},{type:"ul",items:["По вине Ситтера (доказанная халатность, нарушение инструкций) — расходы покрывает Ситтер.","Вследствие скрытых заболеваний, возраста или естественных причин — расходы покрывает Клиент.","В спорных ситуациях решение принимает Арбитраж Сервиса на основании предоставленных материалов (заключения ветеринаров, переписка)."]},{type:"p",text:"8.4. Сервис оставляет за собой право заблокировать Пользователя за нарушение правил общения, мошеннические действия или жестокое обращение с животными."},{type:"h2",text:"9. Разрешение споров и Арбитраж"},{type:"p",text:"9.1. Все споры между Клиентом и Ситтером решаются путем переговоров. При недостижении согласия любая из сторон вправе привлечь Арбитраж Сервиса."},{type:"p",text:"9.2. Решение Арбитража Сервиса является рекомендательным для сторон, однако является основанием для проведения финансовых корректировок в рамках системы «Безопасная сделка»."},{type:"h2",text:"10. Реквизиты и Контакты"},{type:"p",text:"<strong>Индивидуальный предприниматель Горохов Александр Олегович</strong>"},{type:"p",text:"ОГРНИП: 324554300038584"},{type:"p",text:"ИНН: 551405007273"},{type:"p",text:"Служба поддержки: contact@petsok.ru"},{type:"p",text:"Юридический адрес и почтовая корреспонденция направляются по запросу в службу поддержки."}]},privacy:{title:"Политика конфиденциальности",updateDate:"Дата последнего обновления: 20 января 2026 г.",content:[{type:"p",text:"Настоящая Политика описывает порядок обработки и защиты персональных данных Пользователей сервиса PetsOk."},{type:"h2",text:"1. Собираемые данные"},{type:"ul",items:["<strong>Учетные данные:</strong> ФИО, номер телефона, email, фотографии.","<strong>Данные для проверки (KYC):</strong> Для Ситтеров — паспортные данные (обрабатываются партнером по верификации, не хранятся в открытом виде на серверах Сервиса).","<strong>Финансовые данные:</strong> Маскированные номера карт (token), необходимые для проведения платежей и рекуррентных списаний.","<strong>Геолокация:</strong> Данные о местоположении собираются только при использовании функций трекинга прогулки."]},{type:"h2",text:"2. Цели обработки"},{type:"p",text:"Мы используем данные для: предоставления доступа к Сервису, заключения и исполнения сделок, обеспечения безопасности (предотвращение мошенничества), улучшения качества услуг и разрешения споров."},{type:"h2",text:"3. Передача третьим лицам"},{type:"p",text:"Мы не продаем ваши данные. Передача возможна только: платежным провайдерам (для процессинга), сервисам SMS-информирования, а также по официальным запросам правоохранительных органов в случаях, предусмотренных законом."},{type:"h2",text:"4. Удаление данных"},{type:"p",text:"Пользователь вправе в любой момент запросить удаление своего аккаунта через настройки приложения или обратившись в поддержку."}]},cookie:{title:"Политика использования файлов Cookie",updateDate:"Дата последнего обновления: 20 января 2026 г.",content:[{type:"p",text:"Мы используем файлы cookie для аутентификации, хранения настроек (например, выбранного языка) и аналитики."},{type:"p",text:"Продолжая использовать сайт, вы соглашаетесь на использование cookie. Вы можете отключить их в настройках браузера, однако часть функций Сервиса может стать недоступной."}]}};Ss.use(Qn).init({resources:{ru:{translation:{loading:"Загрузка...",common:{continue:"Продолжить",confirm:"Подтвердить",close:"Закрыть",month:"мес",save:"Сохранить",cancel:"Отмена",exit:"Выйти",delete:"Удалить",add:"Добавить",back:"Назад",edit:"Редактировать",male:"Мальчик",female:"Девочка",yes:"Да",no:"Нет",unknown:"Не знаю",unknownBreed:"Порода не указана",noInfo:"Нет информации",noPhotos:"Нет фото",years_short:"л.",months_short:"мес.",male_people:"Мужской",female_people:"Женский",select:"Выбрать",service:"Услуга"},recomLang:"Рекомендуемые языки и регионы",seo:{html_lang:"ru",home:{title:"PetsOk: Поиск проверенных ситтеров для передержки и выгула",description:"Найдите проверенного догситтера или выгульщика в вашем районе. Заботливая передержка как дома, безопасные платежи и поддержка 24/7. Забронируйте на PetsOk."},becomeASitter:{title:"Стать ситтером и зарабатывать на PetsOk | 0% комиссии",description:"Присоединяйтесь к PetsOk, чтобы предлагать услуги передержки, выгула и дневного ухода за животными. Устанавливайте свой график, цены и получайте 100% дохода."},search:{title:"Поиск ситтеров - PetsOk"}},footer:{copyright:"Все права защищены.",legal:{terms:"Условия использования",privacy:"Политика конфиденциальности",cookies:"Политика Cookie"}},cookieConsent:{text:"Мы используем файлы cookie, чтобы улучшить ваш опыт на нашем сайте. Оставаясь на сайте, вы соглашаетесь с нашей ",policyLink:"Политикой конфиденциальности и использования cookie",acceptButton:"Понятно"},legalContent:Po,header:{link1:"Почему PetsOk?",link2:"Найти вашего ситтера",buttonText:"Стать ситтером",findService:"Найти услугу",help:"Помощь",becomeSitter:"Стать ситтером",register:"Регистрация",login:"Войти",language:"Язык",welcomeUserShort:"Привет, {{name}}!",logout:"Выйти",cabinet:{profile:"Мой профиль",orders:"Мои Заказы",sitterPanel:"Панель ситтера"},services:{boarding:"Передержка",walking:"Выгул",daycare:"Дневной присмотр",houseSitting:"Присмотр на дому",puppyNanny:"Няня для щенка",dropIn:"Визиты"},logoAriaLabel:"PetsOk на Главную",changeLanguageAriaLabel:"Сменить язык",userMenuAriaLabel:"Меню пользователя",openMenuAriaLabel:"Открыть меню",closeMenuAriaLabel:"Закрыть меню",mobileMenuHeading:"Мобильное меню"},profile:{profile:"Профиль",settings:"Настройки",support:"Помощь",help:"Помощь и поддержка",logIn:"Войти",signIn:"Регистрация",logInTitle:"Войдите или зарегистрируйтесь",logout:"Выйти",email:"Email",password:"Пароль",btn:"Войти",forgot:"Забыли свой пароль?",forgotAirbnb:"Забыли пароль?",links:"Не забудьте подписаться на нас",deletion:{confirmMessage:"Вы уверены, что хотите удалить аккаунт? Это действие необратимо.",successMessage:"Запрос на удаление отправлен.",statusRequested:"Запрошено удаление"}},userRoles:{sitter:"Ситтер"},cabinet:{title:"Личный кабинет",profile:"Мой профиль",pets:"Мои питомцы",orders:"Мои заказы",wallet:"Кошелек",chat:"Сообщения",sitterDashboard:"Панель ситтера",sitterJobs:"Мои работы",modeSitter:"Исполнитель",modeClient:"Клиент"},editProfileScreen:{header:{title:"Мой профиль"},avatar:{hint:"Нажмите на фото, чтобы изменить"},sections:{basicInfo:{title:"Личные данные"},contactInfo:{title:"Контакты и адрес"},emergencyContact:{title:"Доверенное лицо"}},labels:{firstName:"Имя",lastName:"Фамилия",gender:"Пол",birthDate:"Дата рождения",phone:"Телефон",address:"Адрес",addressDetails:"Детали адреса",emergencyName:"Имя",emergencyPhone:"Телефон"},placeholders:{firstName:"Иван",lastName:"Иванов"},info:{emergency:{text:"Эти данные нужны нам исключительно для экстренных ситуаций."}},flash:{updateSuccess:"Профиль успешно обновлен!",updateFailed:"Ошибка обновления"}},languageModal:{selectLanguage:"Выберите язык",close:"Закрыть",allLanguages:"Все языки и регионы",noLanguages:"Список языков пуст."},authModal:{defaultTitle:"Аутентификация",contactEntry:{titleAirbnb:"Добро пожаловать в PetsOk"},contactPlaceholderAirbnb:"Email или номер телефона",labelEmail:"Email",labelPhone:"Номер телефона",orDivider:"или",continueWithGoogle:"Продолжить с Google",continueWithApple:"Продолжить с Apple",googleErrorNoCredential:"Не удалось получить данные от Google.",googleErrorGeneral:"Ошибка входа через Google.",appleErrorNoToken:"Не удалось получить данные от Apple.",appleErrorGeneral:"Ошибка входа через Apple.",appleCancelled:"Вход через Apple отменен пользователем.",otpTitleAirbnb:"Подтвердите ваш {{contactType, select, email {email} other {номер}}}",otpSubtitleAirbnb:"Введите 4-значный код, отправленный на ",otpPlaceholderFourDigits:"----",finalRegisterTitleAirbnb:"Завершите регистрацию",finalRegisterSubtitleAirbnb:"Осталось указать несколько деталей.",fullNameLabelAirbnb:"Имя и фамилия",fullNamePlaceholder:"Иван Иванов",passwordLabelAirbnb:"Пароль",confirmPasswordLabelAirbnb:"Подтвердите пароль",loginTitlePassword:"Введите ваш пароль",resetPasswordTitle:"Создание нового пароля",loginSubtitlePassword:"Чтобы войти, введите пароль для аккаунта ",resetPasswordSubtitleNew:"Придумайте новый пароль для аккаунта ",passwordLabel:"Пароль",newPasswordLabel:"Новый пароль",confirmPasswordLabel:"Подтвердите новый пароль"},registration:{agreeToTermsPrefixAirbnb:"Нажимая «Принять и продолжить», я принимаю ",termsAndConditionsAirbnb:"Условия предоставления услуг",paymentTermsAirbnb:"Политику обработки платежей",agreeToTermsSuffixAirbnb:", и подтверждаю ознакомление с ",privacyPolicyMain:"Политикой конфиденциальности",submitting:"Регистрация...",submitButtonAirbnb:"Принять и продолжить"},login:{loggingIn:"Вход..."},resetPassword:{resetting:"Сброс...",setNewPasswordButton:"Установить пароль",notImplemented:"Функционал сброса пароля в разработке."},otp:{resending:"Отправка...",resend:"Отправить код повторно"},validation:{contactRequired:"Введите email или телефон.",contactInvalid:"Некорректный формат email или телефона.",otpRequired:"Введите код подтверждения.",otpMinLengthFour:"Код должен состоять из 4 цифр.",otpMaxLengthFour:"Код должен состоять из 4 цифр.",otpFourDigitsOnly:"Код должен содержать 4 цифры.",nameRequired:"Имя и фамилия обязательны.",passwordRequired:"Пароль обязателен.",passwordMinLength:"Пароль не менее 6 символов.",passwordMinLengthAirbnb:"Пароль не менее 8 символов.",confirmPasswordRequired:"Подтверждение пароля обязательно.",passwordsDoNotMatch:"Пароли не совпадают.",termsRequired:"Для продолжения необходимо принять условия.",termsRequiredShort:"Согласие обязательно"},sitterHero:{title:"Зарабатывайте, занимаясь любимым делом",subtitle:"Станьте пет-ситтером на PetsOk. Наслаждайтесь гибкостью, 0% комиссией и радостью от общения с питомцами.",ctaButton:"Начать сейчас"},sitterServices:{boarding:{title:"Передержка у ситтера",desc:"Принимайте питомцев у себя дома. Самая востребованная и высокооплачиваемая услуга.",highlight:"Наибольший доход"},walking:{title:"Выгул собак",desc:"Предлагайте прогулки, которые идеально впишутся в ваш ежедневный график."},daycare:{title:"Дневная няня",desc:"Отлично подходит, если вы работаете из дома и любите компанию собак."},homevisits:{title:"Визиты на дом",desc:"Посещайте питомцев в их привычной обстановке для кормления и игр."}},whyBecomeSitter:{sectionTitle:"Будьте сами себе боссом, с лапками",sectionSubtitle:"Мы предоставляем инструменты и поддержку. Вы дарите любовь. Вот почему ситтеры выбирают PetsOk.",earnMore:{title:"Получайте 100% заработка",desc:"Верно, 0% комиссии. Цена, которую вы устанавливаете, — это цена, которую вы получаете. Максимизируйте свой доход с первого дня."},flexible:{title:"Абсолютная гибкость",desc:"Вы все контролируете. Устанавливайте собственный график, услуги и тарифы. Идеально для подработки или работы на полную ставку."},love:{title:"Работа, полная радости",desc:"Если вы настоящий любитель животных, это больше, чем работа — это призвание. Получайте деньги за почесывание животиков."},support:{title:"Мы всегда на вашей стороне",desc:"От простого в использовании приложения до поддержки 24/7 — мы здесь, чтобы помочь вам добиться успеха и чувствовать себя в безопасности."}},howItWorksSitterSteps:{sectionTitle:"Начните всего за 3 простых шага",step1:{title:"Создайте свой профиль",desc:"Продемонстрируйте свой опыт и любовь к питомцам. Мы поможем создать профиль, который заметят."},step2:{title:"Получите первый заказ",desc:"Вы устанавливаете свою доступность и цены. Мы будем присылать вам запросы от владельцев."},step3:{title:"Получайте оплату. Это просто!",desc:"Деньги поступят на ваш счет уже через два дня после успешного выполнения услуги."}},offerableServicesSection:{sectionTitle:"Предлагайте разнообразные услуги",sectionSubtitle:"Вы сами решаете, какие услуги предоставлять. Чем больше услуг вы предлагаете, тем больше у вас возможностей заработать.",boarding:{title:"Передержка",desc:"Принимайте питомцев на ночь у себя дома. Часто это самая высокооплачиваемая услуга.",highlight:"Наибольший доход"},walking:{title:"Выгул собак",desc:"Предлагайте прогулки, которые идеально впишутся в ваш распорядок дня."},daycare:{title:"Дневная няня",desc:"Идеально, если вы работаете из дома и любите компанию собак."},homevisits:{title:"Визиты на дом",desc:"Посещайте питомцев в их собственном доме для кормления, игр и выгула."}},supportSafety:{sectionTitle:"Ваш успех и безопасность — наш главный приоритет",sectionSubtitle:"Мы создали платформу, которой доверяют любители животных.",support:{title:"Поддержка ситтеров 24/7",desc:"Наша команда готова помочь с любым вопросом, от технических до экстренных ситуаций."},platform:{title:"Надежная и безопасная платформа",desc:"Мы используем проверку профилей и безопасные онлайн-платежи, чтобы вы чувствовали себя уверенно."},community:{title:"Сильное сообщество ситтеров",desc:"Общайтесь с другими ситтерами, делитесь опытом, находите поддержку и получайте вдохновение."},testimonial:{quote:'"Благодаря PetsOk я смогла превратить свою страсть к собакам в настоящий бизнес. А 0% комиссия — это просто меняет правила игры!"',author:"Анна К., ситтер PetsOk"},imageAlt:"Уверенный ситтер с довольной собакой"},finalCtaSitter:{title:"Готовы начать свое путешествие с PetsOk?",subtitle:"Присоединяйтесь к тысячам ситтеров, которые зарабатывают деньги, устанавливают свой собственный график и занимаются тем, что любят. Ваш следующий пушистый клиент уже ждет!",cta:"Создать профиль ситтера (это бесплатно!)",titleUpdated:"Не упустите свой шанс — зарабатывайте больше с PetsOk!",subtitleUpdated:"0% комиссии, гибкий график и благодарные клиенты ждут вас. Присоединяйтесь к нашей дружной команде профессионалов уже сегодня!",ctaUpdated:"Присоединиться к PetsOk (0% Комиссии)"},SearchSitter:{tabs:{service1:{name:"Передержка",description:"у ситтера дома"},service2:{name:"Выгул собаки",description:"по вашему району"},service3:{name:"Дневные визиты",description:"к вам домой"},service4:{name:"Дневняя няня",description:"у ситтера дома"},service5:{name:"Передержка",description:"у вас дома"}},itemTitle:{service1:"Где нужна передержка?",service2:"Где нужен выгул собаки?",service3:"Где нужен визит на час?",service4:"Где нужна дневная няня?",service5:"Где нужен присмотр на дому?"},searchButtonText:"Найти"},hero:{welcome:"Поиск проверенных ситтеров для передержки и выгула",heroDescription:"Никаких клеток и вольеров. Только заботливая передержка в уютной домашней обстановке.",orDivider:"ИЛИ",createRequestTitle:"Создать заявку",createRequestSub:"Опишите задачу — ситтеры сами откликнутся"},whyPetsOkNew:{sectionTitle:"Почему PetsOk – лучший выбор для вашего питомца?",sectionSubtitle:"Мы предлагаем больше, чем просто присмотр – мы дарим душевное спокойствие благодаря любящему домашнему уходу за вашим питомцем и непревзойденной поддержке для вас.",servicesTitle:"Наши основные услуги",guaranteesTitle:"Наши обязательства перед вами"},ourServices:{boarding:{title:"Передержка в доме ситтера",desc:"Уютная, любящая домашняя обстановка для вашего питомца, пока вы в отъезде."},houseSitting:{title:"Присмотр в вашем доме",desc:"Уход за питомцем в его привычной среде, плюс присмотр за вашим домом."},dropIn:{title:"Визиты на час",desc:"Короткие визиты для кормления, туалета и игр на вашей территории."},dayNanny:{title:"Дневная няня (у ситтера)",desc:"Дневные развлечения, общение и уход в доме ситтера."},walking:{title:"Выгул собаки",desc:"Энергичные прогулки, адаптированные к потребностям и режиму вашей собаки."}},ourGuarantees:{verifiedSitters:{title:"Проверенные и надежные ситтеры",desc:"Анкета каждого ситтера проверяется нашей командой для обеспечения качества и безопасности."},photoUpdates:{title:"Фото- и видеоотчеты",desc:"Оставайтесь на связи и наблюдайте за счастьем вашего питомца благодаря регулярным обновлениям."},support:{title:"Круглосуточная поддержка клиентов",desc:"Наша преданная команда всегда готова помочь вам и вашему ситтеру."},securePayments:{title:"Безопасные и простые платежи",desc:"Бронируйте и оплачивайте с уверенностью через нашу зашифрованную платформу."}},howItWorksSimple:{sectionTitle:"Найти ситтера? Проще простого: 3 шага!",step1:{title:"Создайте заявку",desc:"Расскажите о питомце и нужной услуге."},step2:{title:"Выберите ситтера",desc:"Изучите профили, отзывы или просто ожидайте откликов."},step3:{title:"Бронируйте и отдыхайте!",desc:"Подтвердите бронь и наслаждайтесь спокойствием, зная, что о питомце позаботятся."}},mobileAppPromo:{sectionTitle:"Ваш питомец под надёжной опекой — всегда и везде с приложением PetsOk!",sectionSubtitle:"Забудьте о переживаниях! Наше приложение — это ваш личный ключ к миру проверенных ситтеров, удобного бронирования и полного контроля над благополучием вашего любимца.",featuresTitle:"Почему PetsOk в телефоне — это удобно:",features:{search:"Мгновенный поиск идеального ситтера",chat:"Прямая связь с ситтером в любое время",photos:"Фото- и видеоотчеты о вашем питомце",manage:"Управление заказами в пару кликов"},ctaText:"Подарите себе спокойствие, а питомцу – лучшую заботу. Скачайте приложение PetsOk прямо сейчас!",availabilityNote:"Бесплатно для iOS и Android",videoAlt:"Демонстрация возможностей мобильного приложения PetsOk",scanToDownloadStrong:"Сканируйте",scanToDownloadRest:" и начните!"},mobileApp:{downloadIOS:"Загрузить из App Store",downloadIOSShort:"App Store",downloadAndroid:"Загрузить из Google Play",downloadAndroidShort:"Google Play"},becomeSitter:{heroBadge:"Работа мечты для любителей животных",heroTitle:`Зарабатывай,
играя с питомцами`,heroSubtitle:"Преврати любовь к животным в стабильный доход. Твой график, твои цены, твои правила.",ctaButton:"Стать ситтером",earningsLabel:"Твой потенциальный доход",earningsAmount:"40 000 ₽+",earningsNote:"Средний заработок активных ситтеров",benefitsTitle:"Почему выбирают нас?",benefit1Title:"Доход 100% твой",benefit1Desc:"Уникальное условие на рынке: 0% комиссии с заказов. Ты получаешь ровно столько, сколько установил в прайсе.",benefit2Title:"Свобода действий",benefit2Desc:"Сам выбирай, кого брать: только маленьких собак, кошек или всех подряд.",benefit3Title:"Безопасность",benefit3Desc:"Проверенные клиенты, поддержка 24/7 и защита на случай экстренных ситуаций.",benefit4Title:"Клиенты ждут",benefit4Desc:"Тысячи владельцев ищут надежного друга для своего питомца прямо сейчас.",stepsTitle:"Как начать зарабатывать?",step1Title:"Создать профиль",step1Desc:"Заполни анкету: расскажи о себе, загрузи фото и укажите цены.",step2Title:"Пройти проверку",step2Desc:"Мы быстро проверим данные, чтобы клиенты могли тебе доверять.",step3Title:"Принимать заказы",step3Desc:"Получай заявки в приложении, общайся и зарабатывай!",trustFooter:"Ваши данные в безопасности. Мы не передаем личную информацию третьим лицам.",appPreviewTitle:"Весь бизнес в твоем кармане",appPreviewSubtitle:"Мы сделали приложение, в котором удобно управлять заказами и следить за ростом дохода.",appFeature1Title:"Входящие заявки",appFeature1Desc:"Клиенты сами пишут тебе. Выбирай интересные заказы.",appFeature2Title:"Статистика дохода",appFeature2Desc:"Следи, как растет твой заработок в реальном времени.",appFeature3Title:"Выплаты по понедельникам",appFeature3Desc:"Деньги поступают на карту регулярно и без задержек."},sitterSafety:{title:"Безопасность превыше всего. Всегда.",subtitle:"Мы неустанно работаем, чтобы хвосты продолжали вилять, а владельцы питомцев были спокойны.",guarantee:"Каждая услуга, которую вы предлагаете на PetsOk, поддерживается Гарантией PetsOk.",payments:"Безопасные и удобные онлайн-платежи.",checks:"Возможность прохождения общей проверки биографии для каждого ситтера.",supportTeamUpdated:"Наша команда поддержки всегда готова помочь вам 24/7.",education:"Постоянное обучение и ресурсы по уходу за питомцами для ситтеров."},sitterFlexibility:{title:"Гибкость дает вам контроль",feature1:"Устанавливайте собственный график и доступность",feature2:"Предлагайте любую комбинацию услуг по уходу за питомцами",feature3:"Определяйте размер, возраст и другие предпочтения по питомцам, с которыми вы готовы работать",quoteText:"Это легко. Я просто захожу в календарь и отмечаю себя доступной, когда хочу.",quoteAuthor:"Ирина С."},sitterHowItWorks:{sectionTitle:"Как это работает для ситтеров",step1:{title:"Создайте свой профиль",desc:"Продемонстрируйте свой опыт и любовь к питомцам. Мы поможем создать профиль, который заметят."},step2:{title:"Получите первый заказ",desc:"Вы устанавливаете свою доступность и цены. Мы будем присылать вам запросы от владельцев."},step3:{title:"Получайте оплату. Это просто!",desc:"Деньги поступят на ваш счет уже через два дня после успешного выполнения услуги."},step4:{title:"Наслаждайтесь процессом",desc:"Проводите время с замечательными питомцами и получайте позитивные эмоции."}},sitterTools:{title:"Инструменты для вашего успеха",specialConditions:{title:"0% Комиссии",desc:"Вы получаете ровно столько, сколько установили. Никаких скрытых сборов."},app:{title:"Удобное приложение",desc:"Управляйте заказами, календарем и общайтесь с клиентами в одном месте."},support:{titleUpdated:"Команда поддержки",descUpdated:"Мы всегда на связи, чтобы помочь с любыми вопросами."},imageAlt:"Инструменты для ситтеров PetsOk",quoteText:"Благодаря приложению PetsOk, я мгновенно узнаю о запросах и быстро отвечаю!",quoteAuthor:"Елена К."},whatYouCanOffer:{sectionTitleUpdated:"Выберите свои услуги – управляйте доходом",sectionSubtitleUpdated:"PetsOk предлагает гибкость: вы сами решаете, какие услуги оказывать, и устанавливаете на них цены. Больше услуг – больше возможностей заработать!",boarding:{title:"Домашняя передержка",descUpdated:"Создайте уютную атмосферу для питомцев у себя дома. Идеально, если у вас есть свободное пространство и любовь к животным."},walking:{title:"Прогулки с собаками",descUpdated:"Дарите радость активным собакам и их хозяевам. Отличный способ поддерживать форму и зарабатывать."},daycare:{title:"Дневная няня",descUpdated:"Присматривайте за питомцами в течение дня. Помогите хозяевам, которые не хотят оставлять любимцев одних."},homevisits:{title:"Визиты на дом к питомцу",descUpdated:"Посещайте питомцев в их привычной обстановке для кормления, игр и коротких прогулок. Удобно и востребовано!"}},wallet:{title:"Финансы",balanceTitle:"Текущий баланс",cardsTitle:"Способы оплаты",historyTitle:"История операций",addCard:"Добавить карту",noCards:"Нет привязанных карт",noTransactions:"История операций пуста",defaultCard:"Основная",expires:"Годен до",deleteCardConfirm:"Удалить карту?",income:"Поступление",outcome:"Списание",processing:"Обработка...",status:{pending:"В ожидании",success:"Успешно",failed:"Ошибка"}},sitterSettings:{title:"Настройки исполнителя",tabs:{services:"Услуги и цены",profile:"Анкета и фото"},services:{basePrice:"Базовая цена",unit:"За",active:"Активно",inactive:"Неактивно",testRequired:"Требуется тест",save:"Сохранить настройки",successSaved:"Настройки услуг сохранены"},profile:{mainInfo:"Основная информация",titleLabel:"Заголовок профиля",titlePlaceholder:"Например: Опытный догситтер рядом с парком",aboutLabel:"О себе",aboutPlaceholder:"Расскажите о своем опыте...",experienceLabel:"Опыт (лет)",conditions:"Условия",kidsLabel:"Есть дети до 12 лет",supervisionLabel:"Постоянный присмотр 24/7",media:"Фото и Видео",mediaHint:"Загрузите фото себя и условий содержания. Первое фото будет главным.",uploadBtn:"Загрузить",saveProfile:"Сохранить профиль",successProfile:"Профиль успешно обновлен"}},search:{location_placeholder:"Район или адрес",loading:"Поиск...",noResults:"Никого не найдено в этой области.",placeholders:{boarding:"В каком районе искать ситтера?",walking:"В каком районе нужен выгул?",doggy_day_care:"Где нужна дневная няня?",drop_in_visit:"Куда должен приехать ситтер?",house_sitting:"Где требуется присмотр?"}},searchResults:{foundCount:"Найдено {{count}} ситтеров",subtext:"Проверенные ситтеры рядом с вами"},sitterCard:{price_on_request:"По запросу",price_from_label:"от ",repeat_clients:"повторных",no_reviews_yet:"Нет отзывов"},exploreHeader:{whereToSearchPlaceholder:"Где",anyService:"Любая услуга",filtersAppliedShort:"{{count}} фильтров",anyPetPlaceholderShort:"Любой питомец"},SearchSitterItem:{searchButtonText:"Найти"},petsScreen:{title:"Мои питомцы",noPetsAdded:"У вас пока нет питомцев",clickToAdd:"Нажмите кнопку, чтобы добавить первого!",addPetButton:"Добавить питомца",ageNotSpecified:"Возраст не указан",unnamedPet:"Без клички",breedUnknown:"Порода не указана",loadingPets:"Загружаем питомцев...",loadingMore:"Подгрузка...",errorLoadingPets:"Не удалось загрузить питомцев",errorInvalidResponse:"Ошибка ответа сервера"},petTypes:{dog:"Собака",cat:"Кошка"},petSizes:{mini:{name:"Мини",description:"До 5 кг"},small:{name:"Маленький",description:"5-10 кг"},medium:{name:"Средний",description:"10-20 кг"},big:{name:"Большой",description:"20-40 кг"},huge:{name:"Гигант",description:"40+ кг"}},petForm:{titleAdd:"Добавить питомца",titleEdit:"Редактировать",sectionPhotos:"Фотографии",sectionDetails:"Детали",sectionBehavior:"Характер и привычки",sectionAdditionalInfo:"Дополнительно",labelPetType:"Тип",labelName:"Кличка",labelBreed:"Порода",labelGender:"Пол",labelSize:"Размер",labelAge:"Возраст",labelSterilized:"Стерилизован?",labelVaccinated:"Вакцинирован?",labelHomeAlone:"Остается один?",labelKidsFriendly:"Ладит с детьми?",labelDogsFriendly:"Ладит с собаками?",labelCatsFriendly:"Ладит с кошками?",labelInfoSitting:"Для передержки",labelInfoWalking:"Для выгула",placeholderName:"Например, Бобик",placeholderSelectBreed:"Выберите породу",placeholderSelectTypeFirst:"Сначала тип питомца",placeholderInfoSitting:"Особенности питания, выгула...",placeholderInfoWalking:"Тянет поводок, боится машин...",photoInstructionExtended:"Рекомендуем добавить четкий портрет и фото в полный рост.",addPhoto:"Добавить",setAsAvatarShort:"Главная",avatarInfoNewPhoto:"Главное фото обновится после сохранения.",errorPetIdUnavailable:"ID питомца не получен.",warningPhotoUploadFailed:"Питомец сохранен, но фото не загрузились.",petAdded:"Питомец добавлен.",petUpdated:"Питомец обновлен.",errorSubmitEditNoPet:"Ошибка данных редактирования",errorPetTypeRequired:"Выберите тип питомца",errorNameRequired:"Укажите кличку",errorBreedRequired:"Выберите породу",errorGenderRequired:"Укажите пол",errorSizeRequired:"Укажите размер",errorAgeRequired:"Укажите возраст",errorSterilizedRequired:"Обязательное поле",errorVaccinatedRequired:"Обязательное поле",errorHomeAloneRequired:"Обязательное поле",errorKidsFriendlyRequired:"Обязательное поле",errorDogsFriendlyRequired:"Обязательное поле",errorCatsFriendlyRequired:"Обязательное поле",errorInfoSittingRequired:"Обязательное поле",errorInfoWalkingRequired:"Обязательное поле",maxPhotosReached:"Максимум 10 фото",errorPickingImage:"Ошибка выбора фото",photoRemoved:"Фото удалено",errorDeletingPhoto:"Не удалось удалить фото",homeAloneSub:"Спокойно ли ждет дома?",kidsFriendlySub:"Безопасен ли для детей?",dogsFriendlySub:"Реакция на собак?",catsFriendlySub:"Реакция на кошек?",additionalInfoHelp:"Укажите важные детали: расписание, особенности, страхи."},petDetail:{titleError:"Ошибка",errorParsingData:"Не удалось загрузить данные",petNotFound:"Питомец не найден или удален",errorNoData:"Нет данных",infoForSitting:"Информация для передержки",infoForWalking:"Информация для выгула",vaccinated:"Вакцинирован?",sterilized:"Стерилизован?"},appRedirect:{pageTitle:"Загрузите приложение PetsOk",title:"Загрузите наше приложение",subtitle:"Для лучшего опыта используйте мобильное приложение PetsOk. Отсканируйте QR-код или выберите ваш магазин.",redirecting:"Перенаправляем в магазин приложений..."}}}},lng:Bo,fallbackLng:"ru",supportedLngs:Dt.map(t=>t.code),interpolation:{escapeValue:!1}});const Hs=document.getElementById("modal-root"),To=({open:t,closeLangModal:s})=>{const{i18n:n,t:i}=ae(),a=h=>{n.changeLanguage(h),localStorage.setItem("language",h),s()},r=n.language,l=["ru","en","kk"],d=Dt.filter(h=>h&&typeof h.code=="string"&&l.includes(h.code)),o=Dt.filter(h=>h&&typeof h.code=="string"&&!l.includes(h.code));return qt.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t||!Hs?null:Tt.createPortal(e.jsxs("div",{className:`language ${t?"open":""}`,role:"dialog","aria-modal":"true","aria-labelledby":"language-modal-title",children:[e.jsx("div",{className:"language__overlay",onClick:s,tabIndex:-1}),e.jsxs("div",{className:"language__wrapper",children:[e.jsxs("div",{className:"language__head",children:[e.jsx("h3",{id:"language-modal-title",children:i("languageModal.selectLanguage","Выберите язык")}),e.jsx("button",{onClick:s,"aria-label":i("languageModal.close","Закрыть"),className:"language__close-button",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"language__body",children:[d.length>0&&e.jsxs("div",{className:"language__section",children:[e.jsx("h2",{children:i("recomLang")}),e.jsx("ul",{className:"language__list",children:d.map(h=>e.jsxs("li",{onClick:()=>a(h.code),className:r.startsWith(h.code)?"active":"",role:"button",tabIndex:0,onKeyPress:x=>{(x.key==="Enter"||x.key===" ")&&a(h.code)},"aria-pressed":r.startsWith(h.code),children:[e.jsx("span",{children:h.name}),h.region&&e.jsx("small",{children:h.region})]},h.code))})]}),o.length>0&&e.jsxs("div",{className:"language__section",children:[e.jsx("h2",{children:i("languageModal.allLanguages","Все языки и регионы")}),e.jsx("ul",{className:"language__list",children:o.map(h=>e.jsxs("li",{onClick:()=>a(h.code),className:r.startsWith(h.code)?"active":"",role:"button",tabIndex:0,onKeyPress:x=>{(x.key==="Enter"||x.key===" ")&&a(h.code)},"aria-pressed":r.startsWith(h.code),children:[e.jsx("span",{children:h.name}),h.region&&e.jsx("small",{children:h.region})]},h.code))})]}),Array.isArray(Dt)&&Dt.length===0&&e.jsx("p",{children:i("languageModal.noLanguages","Список языков пуст.")})]})]})]}),Hs)},qs=({className:t})=>e.jsxs("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12H22",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 2C14.5013 4.46682 15.9105 8.16734 16 12C15.9105 15.8327 14.5013 19.5332 12 22C9.49872 19.5332 8.08951 15.8327 8 12C8.08951 8.16734 9.49872 4.46682 12 2V2Z",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]}),Vs=({className:t})=>e.jsx("svg",{className:t,width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Lo=({className:t})=>e.jsx("svg",{className:t,width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Mo=({className:t})=>e.jsxs("svg",{className:t,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M12 2.75C6.89137 2.75 2.75 6.89137 2.75 12C2.75 17.1086 6.89137 21.25 12 21.25C17.1086 21.25 21.25 17.1086 21.25 12C21.25 6.89137 17.1086 2.75 12 2.75Z",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M12 14.75C14.0711 14.75 15.75 13.0711 15.75 11C15.75 8.92893 14.0711 7.25 12 7.25C9.92893 7.25 8.25 8.92893 8.25 11C8.25 13.0711 9.92893 14.75 12 14.75Z",fill:"currentColor",opacity:"0.5"}),e.jsx("path",{d:"M5.14734 18.807C5.92469 17.2956 7.17134 16.049 8.68277 15.2716C10.1942 14.4942 11.9008 14.2458 13.5662 14.5604C15.2316 14.875 16.7832 15.7367 17.9971 16.9993C19.211 18.2619 19.9994 19.862 20.2491 21.5501",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5"})]}),Eo=["/","/become-a-sitter"],Ro=({onAuthClick:t})=>{const{t:s}=ae(),n=Kt(),i=ot(),{isAuthenticated:a,user:r}=Be(T=>T.auth),[l,d]=c.useState(!1),[o,h]=c.useState(!1),[x,w]=c.useState(!1),[N,v]=c.useState(!1),[m,j]=c.useState(null),P=c.useRef(null),g=c.useRef(null),u=c.useRef(null),y=c.useRef(null),_=n.pathname.startsWith("/cabinet");c.useEffect(()=>{const T=Eo.includes(n.pathname),E=()=>{const C=window.scrollY>30;v(T?C:!0)};return E(),window.addEventListener("scroll",E,{passive:!0}),()=>window.removeEventListener("scroll",E)},[n.pathname]);const S=(T,E="left",C)=>{if(T.current&&P.current){const f=T.current.getBoundingClientRect(),W={top:P.current.getBoundingClientRect().bottom+8,minWidth:C};return E==="left"?W.left=f.left:W.right=window.innerWidth-f.right,W}return null},B=c.useCallback(()=>{d(T=>{if(!T){const E=S(g,"right",260);j(E)}return!T})},[]),b=c.useCallback(()=>{w(!1)},[]),p=c.useCallback(()=>{w(T=>!T)},[]),L=c.useCallback(()=>h(!1),[]);c.useEffect(()=>{const T=E=>{const C=E.target,f=document.getElementById("user-popup-menu");l&&g.current&&!g.current.contains(C)&&f&&!f.contains(C)&&d(!1),x&&u.current&&!u.current.contains(C)&&y.current&&!y.current.contains(C)&&b()};return(l||x)&&document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[l,x,b]),c.useEffect(()=>(x||o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[x,o]);const O=typeof document<"u"?document.getElementById("modal-root"):null,F=typeof document<"u"?document.getElementById("dropdown-root"):null,A=()=>{var T,E;return a&&((E=(T=r==null?void 0:r.avatar)==null?void 0:T.data)!=null&&E.preview_url)?e.jsx("img",{src:r.avatar.data.preview_url,alt:r.name||"User Avatar",className:we.userAvatarImage}):e.jsx(Mo,{className:we.userAvatarIcon})};return e.jsxs("header",{ref:P,className:`${we.headerContainer} ${N?we.lightBackground:""}`,children:[e.jsxs("div",{className:`${we.headerWrapper} ${we.container}`,children:[e.jsx("div",{className:we.logo,children:e.jsx(Ge,{to:"/","aria-label":s("header.logoAriaLabel","PetsOk на Главную"),children:"PetsOk"})}),!_&&e.jsx("nav",{className:we.desktopNav,children:e.jsxs("ul",{children:[e.jsx("li",{className:we.navItem,children:e.jsx(Ge,{to:"/help",children:s("header.help","Помощь")})}),e.jsx("li",{className:we.navItem,children:e.jsx(Ge,{to:"/become-a-sitter",children:s("header.becomeSitter","Стать ситтером")})})]})}),e.jsxs("div",{className:we.headerActionsDesktop,children:[e.jsxs("button",{onClick:()=>h(!0),"aria-label":s("header.changeLanguageAriaLabel","Сменить язык"),className:we.langButton,children:[e.jsx(qs,{})," ",e.jsx("span",{children:Ss.language.toUpperCase()})]}),e.jsxs("div",{className:we.userMenuContainer,children:[e.jsx("button",{ref:g,"aria-label":s("header.userMenuAriaLabel","Меню пользователя"),onClick:B,"aria-expanded":l,className:`${we.userMenuButtonDesktop} ${l?we.active:""}`,children:e.jsx(Vs,{className:we.burgerIcon})}),l&&F&&m&&Tt.createPortal(e.jsx("div",{id:"user-popup-menu",className:`${we.userPopupPortalClass} ${l?we.open:""}`,style:{top:`${m.top}px`,left:m.left!==void 0?`${m.left}px`:"auto",right:m.right!==void 0?`${m.right}px`:"auto",minWidth:`${m.minWidth}px`},children:e.jsx(Ao,{hide:l,handleOpenAuthModal:t,onClosePopup:()=>d(!1)})}),F)]})]}),e.jsx("div",{className:we.mobileMenuTrigger,children:e.jsx("button",{ref:y,"aria-label":x?s("header.closeMenuAriaLabel","Закрыть меню"):s("header.openMenuAriaLabel","Открыть меню"),"aria-expanded":x,"aria-controls":"mobile-nav-panel",onClick:p,className:we.mobileMenuButton,children:x?e.jsx(Lo,{}):a?A():e.jsx(Vs,{})})})]}),e.jsxs("div",{id:"mobile-nav-panel",ref:u,className:`${we.mobileNavPanel} ${x?we.open:""}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-heading",children:[e.jsx("h2",{id:"mobile-menu-heading",className:we.visuallyHidden,children:s("header.mobileMenuHeading","Мобильное меню")}),!_&&e.jsx("nav",{className:we.mobileNavLinks,children:e.jsxs("ul",{children:[e.jsx("li",{className:we.mobileNavItem,children:e.jsx(Ge,{to:"/help",onClick:b,children:s("header.help","Помощь")})}),e.jsx("li",{className:we.mobileNavItem,children:e.jsx(Ge,{to:"/become-a-sitter",onClick:b,children:s("header.becomeSitter","Стать ситтером")})})]})}),e.jsxs("div",{className:we.mobileUserSection,children:[e.jsxs("button",{onClick:()=>{h(!0),b()},className:we.mobileLangButton,children:[e.jsx(qs,{})," ",e.jsxs("span",{children:[s("header.language","Язык"),": ",Ss.language.toUpperCase()]})]}),a&&r?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:we.mobileWelcomeUser,children:s("header.welcomeUserShort","Привет, {{name}}!",{name:r.first_name||r.name||r.email})}),e.jsx("button",{onClick:()=>{i(Jt()),b()},className:we.authButtonSecondary,children:s("profile.logout","Выйти")})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t("register"),className:we.authButton,children:s("header.register","Регистрация")}),e.jsx("button",{onClick:()=>t("login"),className:we.authButtonSecondary,children:s("header.login","Войти")})]})]})]}),O&&o&&Tt.createPortal(e.jsx(To,{open:o,closeLangModal:L}),O)]})},$o="_footerContainer_1kxzw_1",Fo="_footerWrapper_1kxzw_17",Oo="_columnTitle_1kxzw_32",Do="_leftColumn_1kxzw_39",Wo="_logo_1kxzw_51",zo="_copyrightText_1kxzw_64",Go="_centerColumn_1kxzw_72",Uo="_popularCitiesList_1kxzw_77",Ho="_rightColumn_1kxzw_107",qo="_legalNav_1kxzw_120",Vo="_socialsWrapper_1kxzw_147",Ko="_disclaimer_1kxzw_161",ht={footerContainer:$o,footerWrapper:Fo,columnTitle:Oo,leftColumn:Do,logo:Wo,copyrightText:zo,centerColumn:Go,popularCitiesList:Uo,rightColumn:Ho,legalNav:qo,socialsWrapper:Vo,disclaimer:Ko},Is={"dog-walking":"walking","pet-boarding":"boarding","home-visits":"drop_in_visit","day-care":"doggy_day_care","house-sitting":"house_sitting"},As={moscow:"Москва",spb:"Санкт-Петербург",kazan:"Казань",novosibirsk:"Новосибирск",yekaterinburg:"Екатеринбург","nizhny-novgorod":"Нижний Новгород",chelyabinsk:"Челябинск",samara:"Самара",omsk:"Омск","rostov-on-don":"Ростов-на-Дону",ufa:"Уфа",krasnoyarsk:"Красноярск",voronezh:"Воронеж",perm:"Пермь",volgograd:"Волгоград",krasnodar:"Краснодар",sochi:"Краснодар"},Bs=t=>{if(!t)return"";const s=t.toLowerCase();return As[s]?As[s]:t.charAt(0).toUpperCase()+t.slice(1)},Yo=(t,s,n)=>{const i=Bs(t),a=s?Is[s]:null;let r=`Ситтеры и выгульщики в г. ${i} | PetsOk`,l=`Найдите проверенного ситтера для вашего питомца в г. ${i}. Передержка, выгул и уход в домашних условиях. Отзывы, фото, безопасная оплата.`,d=`Ситтеры для животных в г. ${i}`;return a==="walking"?(r=`Выгул собак в г. ${i} - Найти выгульщика | PetsOk`,l=`Профессиональный выгул собак в г. ${i}. Найдите надежного выгульщика в вашем районе. Цены, отзывы, маршруты прогулок.`,d=`Выгул собак в г. ${i}`):a==="boarding"?(r=`Домашняя передержка животных в г. ${i} | PetsOk`,l=`Передержка собак и кошек в квартирных условиях в г. ${i}. Никаких клеток, только любовь и забота. Забронируйте ситтера онлайн.`,d=`Передержка животных в г. ${i}`):a==="doggy_day_care"&&(r=`Дневная няня для собаки в г. ${i} | PetsOk`,l=`Оставьте собаку под присмотром опытной няни днем в г. ${i}. Игры, кормление и прогулки, пока вы на работе.`,d=`Дневная няня для собак в г. ${i}`),{title:r,description:l,h1:d}},Zo=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.665 3.333L3.333 10.665L7.999 12.665L18.666 5.999L10.666 13.999L10.665 18.665L14.665 14.665L18.665 17.999L20.665 3.333Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Qo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M16 11.37C16.1234 12.2022 15.9813 13.0522 15.5938 13.799C15.2063 14.5458 14.5931 15.1514 13.8416 15.5297C13.0901 15.9079 12.2384 16.0396 11.4078 15.9059C10.5771 15.7723 9.80976 15.3801 9.21484 14.7852C8.61991 14.1902 8.22773 13.4229 8.09406 12.5922C7.9604 11.7616 8.09206 10.9099 8.47032 10.1584C8.84858 9.40685 9.45418 8.79374 10.201 8.40624C10.9478 8.01874 11.7978 7.87658 12.63 8C13.521 8.13212 14.342 8.56708 14.972 9.24075C15.602 9.91442 16.0076 10.7915 16.12 11.68L16 11.37Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Xo=()=>{const{t}=ae(),s=Object.entries(As).slice(0,12);return e.jsx("footer",{className:ht.footerContainer,children:e.jsxs("div",{className:ht.footerWrapper,children:[e.jsxs("div",{className:ht.leftColumn,children:[e.jsx(Ge,{to:"/",className:ht.logo,children:"PetsOk"}),e.jsxs("p",{className:ht.copyrightText,children:["© ",new Date().getFullYear()," PetsOk.",e.jsx("br",{}),t("footer.copyright","Все права защищены.")]})]}),e.jsxs("div",{className:ht.centerColumn,children:[e.jsx("h4",{className:ht.columnTitle,children:"Популярные города"}),e.jsx("ul",{className:ht.popularCitiesList,children:s.map(([n,i])=>e.jsx("li",{children:e.jsx(Ge,{to:`/${n}`,children:i})},n))})]}),e.jsxs("div",{className:ht.rightColumn,children:[e.jsx("nav",{className:ht.legalNav,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(Ge,{to:"/terms",children:t("footer.legal.terms","Условия использования")})}),e.jsx("li",{children:e.jsx(Ge,{to:"/privacy-policy",children:t("footer.legal.privacy","Политика конфиденциальности")})}),e.jsx("li",{children:e.jsx(Ge,{to:"/cookie-policy",children:t("footer.legal.cookies","Политика Cookie")})})]})}),e.jsxs("div",{className:ht.socialsWrapper,children:[e.jsx("a",{href:"https://t.me/petsokru",target:"_blank",rel:"noreferrer","aria-label":"Telegram",children:e.jsx(Zo,{})}),e.jsx("a",{href:"https://instagram.com/petsok.ru",target:"_blank",rel:"noreferrer","aria-label":"Instagram",children:e.jsx(Qo,{})})]}),e.jsx("p",{className:ht.disclaimer,children:"* Деятельность Meta Platforms Inc. (Facebook, Instagram) запрещена на территории РФ как экстремистская."})]})]})})},Jo="_mainLayoutContainer_nc7w0_1",ec="_mainContent_nc7w0_7",Ks={mainLayoutContainer:Jo,mainContent:ec},tc=["/","/become-a-sitter"],sc=({children:t})=>{const[s,n]=c.useState(0),i=Kt();c.useEffect(()=>{const r=()=>{const d=document.querySelector("header");if(d)n(d.offsetHeight);else{const o=window.innerWidth<=768;n(o?70:90)}},l=setTimeout(r,50);return window.addEventListener("resize",r),()=>{clearTimeout(l),window.removeEventListener("resize",r)}},[i.pathname]);const a=tc.includes(i.pathname);return e.jsxs("div",{className:Ks.mainLayoutContainer,children:[e.jsx("main",{className:Ks.mainContent,style:{paddingTop:a?"0px":`${s}px`},children:t}),e.jsx(Xo,{})]})},nc="_legalPageContainer_41kxq_1",ac="_updateDate_41kxq_21",ic="_legalPageContent_41kxq_52",ns={legalPageContainer:nc,updateDate:ac,legalPageContent:ic},vs=({contentKey:t})=>{const{t:s}=ae(),n=s(`legalContent.${t}`,{returnObjects:!0});if(!n||!n.content||n.content.length===0)return e.jsxs("div",{className:ns.legalPageContainer,children:[e.jsxs(Nt,{children:[e.jsxs("title",{children:[s(`footer.legal.${t}`)," - PetsOk"]}),e.jsx("meta",{name:"robots",content:"noindex, follow"})]}),e.jsx("h1",{children:s(`footer.legal.${t}`)}),e.jsx("p",{children:"Содержимое этой страницы скоро появится."})]});const{title:i,updateDate:a,content:r}=n,l=()=>r.map((d,o)=>{var x;const h={key:o,dangerouslySetInnerHTML:{__html:d.text||""}};switch(d.type){case"h1":return e.jsx("h1",{...h});case"h2":return e.jsx("h2",{...h});case"h3":return e.jsx("h3",{...h});case"p":return e.jsx("p",{...h});case"ul":return e.jsx("ul",{children:(x=d.items)==null?void 0:x.map((w,N)=>e.jsx("li",{children:w},N))},o);default:return null}});return e.jsxs(e.Fragment,{children:[e.jsxs(Nt,{children:[e.jsxs("title",{children:[i," - PetsOk"]}),e.jsx("meta",{name:"robots",content:"noindex, follow"})]}),e.jsxs("div",{className:ns.legalPageContainer,children:[e.jsx("h1",{children:i}),a&&e.jsx("p",{className:ns.updateDate,children:a}),e.jsx("div",{className:ns.legalPageContent,children:l()})]})]})},rc="_redirectContainer_lqy8g_1",oc="_loader_lqy8g_16",cc="_fallbackContainer_lqy8g_30",lc="_fallbackContent_lqy8g_41",dc="_logo_lqy8g_48",hc="_qrCodeWrapper_lqy8g_64",pc="_storeButtons_lqy8g_73",uc="_storeButton_lqy8g_73",mc="_apple_lqy8g_97",_c="_google_lqy8g_101",_t={redirectContainer:rc,loader:oc,fallbackContainer:cc,fallbackContent:lc,logo:dc,qrCodeWrapper:hc,storeButtons:pc,storeButton:uc,apple:mc,google:_c},xc=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":"unknown"},gc=()=>{var l,d;const{t}=ae(),[s,n]=c.useState("redirecting"),{versionConfig:i}=Be(o=>o.config),a=((l=i==null?void 0:i.ios)==null?void 0:l.url)||Re.appStoreUrl,r=((d=i==null?void 0:i.android)==null?void 0:d.url)||Re.googlePlayUrl;return c.useEffect(()=>{const o=xc();o==="iOS"&&a?window.location.href=a:o==="Android"&&r?window.location.href=r:n("fallback")},[a,r]),s==="redirecting"?e.jsxs("div",{className:_t.redirectContainer,children:[e.jsx("div",{className:_t.loader}),e.jsx("p",{children:t("appRedirect.redirecting","Перенаправляем в магазин приложений...")})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{children:e.jsx("title",{children:t("appRedirect.pageTitle","Загрузите приложение PetsOk")})}),e.jsx("div",{className:_t.fallbackContainer,children:e.jsxs("div",{className:_t.fallbackContent,children:[e.jsx("div",{className:_t.logo,children:"📱"}),e.jsx("h1",{children:t("appRedirect.title","Загрузите наше приложение")}),e.jsx("p",{children:t("appRedirect.subtitle","Для лучшего опыта используйте мобильное приложение PetsOk. Отсканируйте QR-код или выберите ваш магазин.")}),e.jsx("div",{className:_t.qrCodeWrapper,children:e.jsx(jn,{value:Re.appUniversalUrl,size:160,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),e.jsxs("div",{className:_t.storeButtons,children:[e.jsxs("a",{href:a,className:`${_t.storeButton} ${_t.apple}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"currentColor",children:e.jsx("path",{d:"M16.511 11.45a5.204 5.204 0 00-3.32-4.432 5.342 5.342 0 00-4.321.465c-.9.6-1.74 1.83-2.2 3.016-1.739 4.381.583 8.79 2.373 11.605.86.1.413 1.748 2.373 1.748 1.54 0 2.219-.997 3.73-.997s1.49.997 3.078.95c1.64-.047 2.68-1.54 3.518-2.916.9-1.588 1.25-3.266 1.299-3.363a.52.52 0 00-.472-.73c-2.115-.28-3.385-1.587-3.41-3.363zm-2.42-4.997a4.91 4.91 0 011.66-3.116c-.058 0-1.719 1.094-3.167 2.373-1.282 1.14-2.228 2.73-1.928 4.431.149 0 1.858-1.14 3.435-3.688z"})}),e.jsx("span",{children:"App Store"})]}),e.jsxs("a",{href:r,className:`${_t.storeButton} ${_t.google}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("svg",{width:"22",height:"24",viewBox:"0 0 22 24",fill:"currentColor",children:e.jsx("path",{d:"M21.47 12.337l-9.752-5.717a.64.64 0 00-.95.556v11.43a.639.639 0 00.95.556l9.752-5.716a.64.64 0 000-1.112zM4.14 23.361a.63.63 0 01-.63-.63V1.272a.63.63 0 01.63-.63.63.63 0 01.63.63v21.458a.63.63 0 01-.63.631zM6.66 21.459a.63.63 0 01-.63-.63V3.172a.63.63 0 111.26 0v17.657a.63.63 0 01-.63.63z"})}),e.jsx("span",{children:"Google Play"})]})]})]})})]})},vc="_authModal_1nhnz_1",fc="_open_1nhnz_16",jc="_authModalWrapper_1nhnz_21",yc="_authModalOverlay_1nhnz_26",wc="_modalTitle_1nhnz_51",bc="_modalSubtitle_1nhnz_60",Nc="_inputGroup_1nhnz_73",Sc="_inputLabel_1nhnz_80",kc="_contactInputContainer_1nhnz_88",Cc="_inputError_1nhnz_101",Ic="_contactInputPrefix_1nhnz_109",Ac="_contactInputFieldElement_1nhnz_124",Bc="_inputField_1nhnz_145",Pc="_otpInput_1nhnz_170",Tc="_checkboxGroup_1nhnz_192",Lc="_checkboxInput_1nhnz_199",Mc="_checkboxLabel_1nhnz_213",Ec="_inlineLink_1nhnz_220",Rc="_checkboxError_1nhnz_229",$c="_errorMessage_1nhnz_236",Fc="_apiError_1nhnz_237",Oc="_submitButton_1nhnz_248",Dc="_submitButtonPrimary_1nhnz_261",Wc="_linkButton_1nhnz_276",zc="_closeButton_1nhnz_291",Gc="_backButton_1nhnz_313",Uc="_visuallyHidden_1nhnz_337",U={authModal:vc,open:fc,authModalWrapper:jc,authModalOverlay:yc,modalTitle:wc,modalSubtitle:bc,inputGroup:Nc,inputLabel:Sc,contactInputContainer:kc,inputError:Cc,contactInputPrefix:Ic,contactInputFieldElement:Ac,inputField:Bc,otpInput:Pc,checkboxGroup:Tc,checkboxInput:Lc,checkboxLabel:Mc,inlineLink:Ec,checkboxError:Rc,errorMessage:$c,apiError:Fc,submitButton:Oc,submitButtonPrimary:Dc,linkButton:Wc,closeButton:zc,backButton:Gc,visuallyHidden:Uc},Hc=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),qc=({isOpen:t,onClose:s,initialMode:n="register",registrationType:i="client"})=>{const{t:a}=ae(),r=ot(),l=nt(),{isLoading:d,status:o,error:h,contactCheckError:x,otpError:w,isAuthenticated:N}=Be(re=>re.auth),[v,m]=c.useState("contactEntry"),[j,P]=c.useState("email"),[g,u]=c.useState(""),[y,_]=c.useState(""),[S,B]=c.useState(n),{control:b,handleSubmit:p,formState:{errors:L},reset:O,trigger:F,setValue:A}=Ot({mode:"onTouched",defaultValues:{contact:""}}),{control:T,handleSubmit:E,formState:{errors:C},reset:f,trigger:k}=Ot({mode:"onTouched",defaultValues:{code:""}}),{control:D,handleSubmit:W,formState:{errors:H},watch:Q,reset:$,setError:R}=Ot({mode:"onTouched",defaultValues:{fullName:"",password:"",password_confirmation:"",termsAccepted:!1}}),{control:X,handleSubmit:te,formState:{errors:oe},reset:Me,setError:ge,watch:ve}=Ot({mode:"onTouched",defaultValues:{password:"",password_confirmation:""}}),Fe=c.useCallback(()=>{m("contactEntry"),P("email"),u(""),_(""),B(n),r(ss()),O({contact:""}),f({code:""}),$({fullName:"",password:"",password_confirmation:"",termsAccepted:!1}),Me({password:"",password_confirmation:""})},[n,r,O,f,$,Me]);c.useEffect(()=>{t&&Fe()},[t,Fe]),c.useEffect(()=>{o==="succeeded"&&N&&(s(),l("/cabinet"))},[o,N,s,l]),c.useEffect(()=>{o==="contact_exists"&&v==="contactEntry"?(B("login"),m("passwordEntry"),r(pt())):o==="contact_new"&&v==="contactEntry"&&(B("register"),g&&j&&r(Wt({contactValue:g,contactType:j,operation:"register"})))},[o,v,g,j,r]),c.useEffect(()=>{o==="otp_sent"&&(v==="contactEntry"||v==="passwordEntry"&&S==="reset")&&(m("otpEntry"),r(pt()))},[o,v,S,r]),c.useEffect(()=>{o==="otp_verified_register"&&v==="otpEntry"&&S==="register"?(m("finalRegister"),r(pt())):o==="otp_verified_reset"&&v==="otpEntry"&&S==="reset"&&(m("passwordEntry"),r(pt()))},[o,v,S,r]);const ye=c.useCallback(re=>{A("contact",re),F("contact"),r(pt())},[j,A,F,r]),Ce=async re=>{const _e=re.contact.trim();u(_e),r(pt()),r(is({contactValue:_e,contactType:j}))},M=async re=>{!g||!j||(_(re.code),r(pt()),S!=="login"&&r(rs({contactValue:g,contactType:j,code:re.code,operation:S})))},K=async re=>{if(!g||!j||!re.termsAccepted||!y){if(re.termsAccepted||R("termsAccepted",{type:"manual",message:a("validation.termsRequired")}),!y){console.error("OTP code not saved. Cannot register.");return}return}r(pt());const _e={fullName:re.fullName,password:re.password,password_confirmation:re.password_confirmation,code:y,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone};j==="email"&&(_e.email=g),j==="phone"&&(_e.phone=g),r(Cs({registrationData:_e,registrationType:i}))},fe=async re=>{if(!g||!j||!re.password){!re.password&&X&&ge("password",{type:"manual",message:a("validation.passwordRequired")});return}r(pt());const _e={password:re.password};if(j==="email"&&(_e.email=g),j==="phone"&&(_e.phone=g),S==="reset"){if(re.password!==re.password_confirmation){ge("password_confirmation",{type:"manual",message:a("validation.passwordsDoNotMatch")});return}alert(a("resetPassword.notImplemented","Функционал сброса пароля в разработке."));return}r(En(_e))},q=c.useMemo(()=>{var re,_e;return o==="failed"?v==="contactEntry"&&x?x:v==="otpEntry"&&w?w:h:v==="finalRegister"&&((re=H.root)!=null&&re.serverError)?H.root.serverError.message:v==="finalRegister"&&H.termsAccepted?H.termsAccepted.message:v==="passwordEntry"&&((_e=oe.root)!=null&&_e.serverError)?oe.root.serverError.message:null},[o,v,x,w,h,H,oe]),se=()=>e.jsxs("form",{onSubmit:p(Ce),children:[e.jsx("h3",{className:U.modalTitle,children:a("authModal.contactEntry.titleAirbnb")}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"contact",className:U.inputLabel,children:a(j==="email"?"authModal.labelEmail":"authModal.labelPhone")}),e.jsxs("div",{className:`${U.contactInputContainer} ${L.contact?U.inputError:""}`,children:[e.jsx("div",{className:U.contactInputPrefix,children:j==="email"?e.jsx(Hc,{}):null}),e.jsx(St,{name:"contact",control:b,defaultValue:"",rules:{required:a("validation.contactRequired"),validate:re=>{const _e=(re||"").trim();return _e?j==="phone"?/^\+?[0-9\s-]{10,}$/.test(_e)||a("validation.contactInvalid"):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_e)||a("validation.contactInvalid"):a("validation.contactRequired")}},render:({field:re})=>e.jsx("input",{...re,id:"contact",type:j==="email"?"email":"tel",placeholder:a("authModal.contactPlaceholderAirbnb"),className:U.contactInputFieldElement,onChange:_e=>ye(_e.target.value)})})]}),L.contact&&e.jsx("p",{className:U.errorMessage,children:L.contact.message})]}),q&&e.jsx("p",{className:U.apiError,children:q}),e.jsx("button",{type:"submit",disabled:d&&o==="checking_contact",className:`${U.submitButton} ${U.submitButtonPrimary}`,children:d&&o==="checking_contact"?a("loading","Проверка..."):a("common.continue")})]}),me=()=>e.jsxs("form",{onSubmit:E(M),children:[e.jsx("button",{type:"button",onClick:()=>{m("contactEntry"),r(ss()),B(n)},className:U.backButton,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 13L1 7L7 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h3",{className:U.modalTitle,children:a("authModal.otpTitleAirbnb",{context:j})}),e.jsxs("p",{className:U.modalSubtitle,children:[a("authModal.otpSubtitleAirbnb","Введите 4-значный код, отправленный на "),e.jsx("strong",{children:g})]}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx(St,{name:"code",control:T,defaultValue:"",rules:{required:a("validation.otpRequired"),minLength:{value:4,message:a("validation.otpMinLengthFour")},maxLength:{value:4,message:a("validation.otpMaxLengthFour")},pattern:{value:/^[0-9]{4}$/,message:a("validation.otpFourDigitsOnly")}},render:({field:re})=>e.jsx("input",{...re,type:"text",inputMode:"numeric",placeholder:a("authModal.otpPlaceholderFourDigits","----"),maxLength:4,className:`${U.inputField} ${U.otpInput} ${C.code?U.inputError:""}`,onChange:_e=>{re.onChange(_e),k("code"),r(pt())}})}),C.code&&e.jsx("p",{className:U.errorMessage,children:C.code.message})]}),q&&e.jsx("p",{className:U.apiError,children:q}),e.jsx("button",{type:"submit",disabled:d&&o==="otp_verifying",className:`${U.submitButton} ${U.submitButtonPrimary}`,children:d&&o==="otp_verifying"?a("loading","Проверка..."):a("common.confirm")}),e.jsx("button",{type:"button",className:U.linkButton,onClick:async()=>{g&&j&&(S==="register"||S==="reset")&&r(Wt({contactValue:g,contactType:j,operation:S}))},disabled:d&&o==="otp_sending",children:a(d&&o==="otp_sending"?"otp.resending":"otp.resend")})]}),Ie=()=>{var re,_e,I;return e.jsxs("form",{onSubmit:W(K),children:[e.jsx("button",{type:"button",onClick:()=>m("otpEntry"),className:U.backButton,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 13L1 7L7 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h3",{className:U.modalTitle,children:a("authModal.finalRegisterTitleAirbnb")}),e.jsx("p",{className:U.modalSubtitle,children:a("authModal.finalRegisterSubtitleAirbnb")}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"fullName",className:U.inputLabel,children:a("authModal.fullNameLabelAirbnb")}),e.jsx(St,{name:"fullName",control:D,defaultValue:"",rules:{required:a("validation.nameRequired")},render:({field:V})=>e.jsx("input",{id:"fullName",type:"text",...V,placeholder:a("authModal.fullNamePlaceholder"),className:`${U.inputField} ${H.fullName?U.inputError:""}`})}),H.fullName&&e.jsx("p",{className:U.errorMessage,children:H.fullName.message})]}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"regPassword",className:U.inputLabel,children:a("authModal.passwordLabelAirbnb")}),e.jsx(St,{name:"password",control:D,defaultValue:"",rules:{required:a("validation.passwordRequired"),minLength:{value:8,message:a("validation.passwordMinLengthAirbnb")}},render:({field:V})=>e.jsx("input",{id:"regPassword",type:"password",...V,placeholder:"••••••••",className:`${U.inputField} ${H.password?U.inputError:""}`})}),H.password&&e.jsx("p",{className:U.errorMessage,children:H.password.message})]}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"regPasswordConfirm",className:U.inputLabel,children:a("authModal.confirmPasswordLabelAirbnb")}),e.jsx(St,{name:"password_confirmation",control:D,defaultValue:"",rules:{required:a("validation.confirmPasswordRequired"),validate:V=>V===Q("password")||a("validation.passwordsDoNotMatch")},render:({field:V})=>e.jsx("input",{id:"regPasswordConfirm",type:"password",...V,placeholder:"••••••••",className:`${U.inputField} ${H.password_confirmation?U.inputError:""}`})}),H.password_confirmation&&e.jsx("p",{className:U.errorMessage,children:H.password_confirmation.message})]}),e.jsxs("div",{className:`${U.inputGroup} ${U.checkboxGroup}`,children:[e.jsx(St,{name:"termsAccepted",control:D,defaultValue:!1,rules:{required:a("validation.termsRequiredShort")},render:({field:V})=>{const{value:be,...De}=V;return e.jsx("input",{id:"termsAccepted",type:"checkbox",...De,checked:!!be,className:`${U.checkboxInput} ${H.termsAccepted?U.inputError:""}`})}}),e.jsxs("label",{htmlFor:"termsAccepted",className:U.checkboxLabel,children:[a("registration.agreeToTermsPrefixAirbnb"),e.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:U.inlineLink,children:a("registration.termsAndConditionsAirbnb")}),a("registration.agreeToTermsSuffixAirbnb"),e.jsx("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:U.inlineLink,children:a("registration.privacyPolicyMain")}),"."]})]}),H.termsAccepted&&e.jsx("p",{className:`${U.checkboxError}`,children:H.termsAccepted.message}),(((re=H.root)==null?void 0:re.serverError)||v==="finalRegister"&&h)&&e.jsx("p",{className:U.apiError,children:((I=(_e=H.root)==null?void 0:_e.serverError)==null?void 0:I.message)||h}),e.jsx("button",{type:"submit",disabled:d&&o==="registering",className:`${U.submitButton} ${U.submitButtonPrimary}`,children:a(d&&o==="registering"?"registration.submitting":"registration.submitButtonAirbnb")})]})},Oe=()=>{var re,_e,I;return e.jsxs("form",{onSubmit:te(fe),children:[e.jsx("button",{type:"button",onClick:()=>{m("contactEntry"),r(ss()),B(n)},className:U.backButton,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 13L1 7L7 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h3",{className:U.modalTitle,children:a(S==="login"?"authModal.loginTitlePassword":"authModal.resetPasswordTitle")}),e.jsxs("p",{className:U.modalSubtitle,children:[a(S==="login"?"authModal.loginSubtitlePassword":"authModal.resetPasswordSubtitleNew"),e.jsx("strong",{children:g})]}),e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"loginPassword",className:U.inputLabel,children:a(S==="login"?"authModal.passwordLabel":"authModal.newPasswordLabel")}),e.jsx(St,{name:"password",control:X,defaultValue:"",rules:{required:a("validation.passwordRequired"),minLength:{value:S==="reset"?8:6,message:a(S==="reset"?"validation.passwordMinLengthAirbnb":"validation.passwordMinLength")}},render:({field:V})=>e.jsx("input",{id:"loginPassword",type:"password",...V,placeholder:"••••••••",className:`${U.inputField} ${oe.password?U.inputError:""}`})}),oe.password&&e.jsx("p",{className:U.errorMessage,children:oe.password.message})]}),S==="reset"&&e.jsxs("div",{className:U.inputGroup,children:[e.jsx("label",{htmlFor:"confirmNewPassword",className:U.inputLabel,children:a("authModal.confirmPasswordLabel")}),e.jsx(St,{name:"password_confirmation",control:X,defaultValue:"",rules:{required:a("validation.confirmPasswordRequired"),validate:V=>V===ve("password")||a("validation.passwordsDoNotMatch")},render:({field:V})=>e.jsx("input",{id:"confirmNewPassword",type:"password",...V,placeholder:"••••••••",className:`${U.inputField} ${oe.password_confirmation?U.inputError:""}`})}),oe.password_confirmation&&e.jsx("p",{className:U.errorMessage,children:oe.password_confirmation.message})]}),(((re=oe.root)==null?void 0:re.serverError)||v==="passwordEntry"&&h)&&e.jsx("p",{className:U.apiError,children:((I=(_e=oe.root)==null?void 0:_e.serverError)==null?void 0:I.message)||h}),e.jsx("button",{type:"submit",disabled:d&&(o==="logging_in"||o==="resetting_password"),className:`${U.submitButton} ${U.submitButtonPrimary}`,children:a(d&&o==="logging_in"?"login.loggingIn":d&&o==="resetting_password"?"resetPassword.resetting":S==="login"?"profile.logIn":"resetPassword.setNewPasswordButton")}),S==="login"&&e.jsx("button",{type:"button",className:U.linkButton,onClick:()=>{g&&j&&(B("reset"),r(Wt({contactValue:g,contactType:j,operation:"reset"})))},children:a("profile.forgotAirbnb")})]})};let Ae;switch(v){case"contactEntry":Ae=se();break;case"otpEntry":Ae=me();break;case"finalRegister":Ae=Ie();break;case"passwordEntry":Ae=Oe();break;default:Ae=se()}return e.jsxs("div",{className:`${U.authModal} ${t?U.open:""}`,role:"dialog","aria-modal":"true","aria-labelledby":"auth-modal-title-id",children:[e.jsx("div",{className:U.authModalOverlay,onClick:s,tabIndex:-1}),e.jsxs("div",{className:U.authModalWrapper,children:[v!=="contactEntry"?e.jsx("button",{type:"button",onClick:()=>{v==="otpEntry"?(m("contactEntry"),r(ss()),B(n)):v==="finalRegister"||v==="passwordEntry"&&S==="reset"?m("otpEntry"):v==="passwordEntry"&&S==="login"&&m("contactEntry"),r(pt())},className:U.backButton,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 13L1 7L7 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):e.jsx("button",{onClick:s,className:U.closeButton,"aria-label":a("common.close","Закрыть"),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h3",{id:"auth-modal-title-id",className:U.visuallyHidden,children:a("authModal.defaultTitle")}),Ae]})]})},Vc={searchParams:{service_key:"boarding",city:void 0,address:void 0,latitude:void 0,longitude:void 0,radius_km:30,sw_lat:void 0,sw_lon:void 0,ne_lat:void 0,ne_lon:void 0,searchReason:"initial",limit:30},searchResults:[],pagination:null,searchMeta:{},isLoading:!1,isFetchingMore:!1,error:null},Pt=gt("search/performSearch",async({params:t,page:s=1,isNewSearch:n=!0},{getState:i,rejectWithValue:a})=>{var o;const l=i().search.searchParams,d={...l,...t,limit:t.limit||l.limit||30};try{const h=await Ga({searchParams:d,page:s});if(h.status==="success"&&h.data){const x=h.data;return{results:x.data||[],pagination:((o=x.meta)==null?void 0:o.pagination)||x.pagination,meta:x.meta,isNewSearch:n,searchParams:t}}return a(h.message||"Ошибка API")}catch(h){return a(h.message||"Network error")}}),Fn=Vt({name:"search",initialState:Vc,reducers:{setSearchParams(t,s){t.searchParams={...t.searchParams,...s.payload}},clearSearchResults(t){t.searchResults=[],t.pagination=null,t.error=null}},extraReducers:t=>{t.addCase(Pt.pending,(s,n)=>{n.meta.arg.isNewSearch?(s.isLoading=!0,s.error=null):s.isFetchingMore=!0}).addCase(Pt.fulfilled,(s,n)=>{const{results:i,pagination:a,meta:r,isNewSearch:l,searchParams:d}=n.payload;s.isLoading=!1,s.isFetchingMore=!1,s.pagination=a,s.searchMeta=r,d&&(s.searchParams={...s.searchParams,...d});const o=(r==null?void 0:r.custom)||{},h=(d==null?void 0:d.searchReason)==="map_bounds";if(l&&!h&&o.search_latitude&&o.search_longitude&&(s.searchParams.latitude=o.search_latitude,s.searchParams.longitude=o.search_longitude,o.search_address&&(s.searchParams.address=o.search_address)),l)s.searchResults=i;else{const x=new Set(s.searchResults.map(N=>N.id)),w=i.filter(N=>!x.has(N.id));s.searchResults=[...s.searchResults,...w]}}).addCase(Pt.rejected,(s,n)=>{s.isLoading=!1,s.isFetchingMore=!1,s.error=n.payload})}}),{setSearchParams:Ps,clearSearchResults:Yw}=Fn.actions,Kc=Fn.reducer,Yc="_card_12ple_1",Zc="_cardHovered_12ple_15",Qc="_title_12ple_20",Xc="_coverImage_12ple_23",Jc="_cardPremium_12ple_26",el="_coverWrapper_12ple_37",tl="_placeholderImage_12ple_59",sl="_proBadge_12ple_68",nl="_onlineStatus_12ple_87",al="_contentWrapper_12ple_99",il="_headerRow_12ple_113",rl="_nameCol_12ple_119",ol="_nameRow_12ple_125",cl="_name_12ple_119",ll="_address_12ple_141",dl="_distance_12ple_159",hl="_ratingBadge_12ple_163",pl="_ratingValue_12ple_173",ul="_reviewsCount_12ple_176",ml="_description_12ple_195",_l="_footerRow_12ple_207",xl="_tags_12ple_216",gl="_tagHighlight_12ple_221",vl="_priceBlock_12ple_233",fl="_priceLabel_12ple_238",jl="_priceValue_12ple_244",Te={card:Yc,cardHovered:Zc,title:Qc,coverImage:Xc,cardPremium:Jc,coverWrapper:el,placeholderImage:tl,proBadge:sl,onlineStatus:nl,contentWrapper:al,headerRow:il,nameCol:rl,nameRow:ol,name:cl,address:ll,distance:dl,ratingBadge:hl,ratingValue:pl,reviewsCount:ul,description:ml,footerRow:_l,tags:xl,tagHighlight:gl,priceBlock:vl,priceLabel:fl,priceValue:jl},yl=()=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"#FFC107",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),wl=()=>e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"#FFFFFF",children:e.jsx("path",{d:"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5ZM19 19C19 19.6 18.6 20 18 20H6C5.4 20 5 19.6 5 19V18H19V19Z"})}),bl=()=>e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Nl=()=>e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",style:{marginLeft:4,display:"inline-block",verticalAlign:"middle"},children:[e.jsx("path",{d:"M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1Z",fill:"#3598FE"}),e.jsx("path",{d:"M10 17L6 13L7.41 11.59L10 14.17L16.59 7.58L18 9L10 17Z",fill:"white"})]}),Sl=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.15",children:e.jsx("path",{d:"M17.65 6.35C16.2 7.8 14.2 7.8 12.75 6.35C11.3 4.9 11.3 2.9 12.75 1.45C14.2 0 16.2 0 17.65 1.45C19.1 2.9 19.1 4.9 17.65 6.35ZM6.35 6.35C7.8 4.9 7.8 2.9 6.35 1.45C4.9 0 2.9 0 1.45 1.45C0 2.9 0 4.9 1.45 6.35C2.9 7.8 4.9 7.8 6.35 6.35ZM22.55 1.45C21.1 0 19.1 0 17.65 1.45C16.2 2.9 16.2 4.9 17.65 6.35C19.1 7.8 21.1 7.8 22.55 6.35C24 4.9 24 2.9 22.55 1.45ZM1.45 12.55C2.9 11.1 4.9 11.1 6.35 12.55C7.8 14 7.8 16 6.35 17.45C4.9 18.9 2.9 18.9 1.45 17.45C0 16 0 14 1.45 12.55ZM12 9C9.24 9 7 11.24 7 14C7 16.76 9.24 19 12 19C14.76 19 17 16.76 17 14C17 11.24 14.76 9 12 9ZM12 24C9.24 24 7 21.76 7 19H17C17 21.76 14.76 24 12 24Z"})}),kl=()=>e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),Cl=({data:t,isHovered:s,onHover:n,onLeave:i})=>{var x,w,N,v,m,j,P,g;const{t:a}=ae(),r=((w=(x=t.avatar)==null?void 0:x.data)==null?void 0:w.preview_url)||((v=(N=t.avatar)==null?void 0:N.data)==null?void 0:v.url),l=((P=(j=(m=t.media)==null?void 0:m.data)==null?void 0:j[0])==null?void 0:P.url)||t.img||r,d=new Intl.NumberFormat("ru-RU",{style:"currency",currency:t.currency_code||"RUB",maximumFractionDigits:0}).format(t.service_price||t.price||0),o=t.address||((g=t.city)==null?void 0:g.name),h=t.distance_km?`~${Number(t.distance_km).toFixed(1)} ${a("common.km","км")}`:null;return e.jsxs(Ge,{to:`/sitter/${t.id}`,className:`${Te.card} ${s?Te.cardHovered:""} ${t.is_premium?Te.cardPremium:""}`,onMouseEnter:n,onMouseLeave:i,children:[e.jsxs("div",{className:Te.coverWrapper,children:[l?e.jsx("img",{src:l,alt:t.name,className:Te.coverImage,loading:"lazy"}):e.jsx("div",{className:Te.placeholderImage,children:e.jsx(Sl,{})}),t.is_premium&&e.jsxs("div",{className:Te.proBadge,children:[e.jsx(wl,{})," ",e.jsx("span",{children:"PRO"})]}),t.is_online&&e.jsx("div",{className:Te.onlineStatus})]}),e.jsxs("div",{className:Te.contentWrapper,children:[e.jsxs("div",{className:Te.headerRow,children:[e.jsxs("div",{className:Te.nameCol,children:[e.jsxs("div",{className:Te.nameRow,children:[e.jsx("h3",{className:Te.name,children:t.name}),e.jsx(Nl,{})]}),(o||h)&&e.jsxs("p",{className:Te.address,children:[e.jsx(bl,{}),o,o&&h&&e.jsx("span",{className:Te.distance,children:" • "}),h&&e.jsx("span",{className:Te.distance,children:h})]})]}),e.jsxs("div",{className:Te.ratingBadge,children:[e.jsx(yl,{}),e.jsx("span",{className:Te.ratingValue,children:Number(t.user_rating||0).toFixed(1)}),e.jsxs("span",{className:Te.reviewsCount,children:["(",t.reviews_count||0,")"]})]})]}),e.jsx("h4",{className:Te.title,children:t.title}),e.jsx("p",{className:Te.description,children:t.description?t.description.length>90?t.description.substring(0,90)+"...":t.description:a("sitterCard.noDescription","")}),e.jsxs("div",{className:Te.footerRow,children:[e.jsx("div",{className:Te.tags,children:t.repeat_order_count>0&&e.jsxs("span",{className:Te.tagHighlight,children:[e.jsx(kl,{})," ",t.repeat_order_count," ",a("sitterCard.repeat_clients","повторных")]})}),e.jsxs("div",{className:Te.priceBlock,children:[e.jsx("span",{className:Te.priceLabel,children:a("common.from","от")}),e.jsx("span",{className:Te.priceValue,children:d})]})]})]})]})},Il="_filterBarWrapper_k9m8a_1",Al="_container_k9m8a_18",Bl="_searchBar_k9m8a_29",Pl="_divider_k9m8a_54",Tl="_fieldSection_k9m8a_66",Ll="_active_k9m8a_81",Ml="_label_k9m8a_109",El="_input_k9m8a_118",Rl="_valueText_k9m8a_135",$l="_searchBtnWrapper_k9m8a_150",Fl="_searchBtn_k9m8a_150",Ol="_dropdown_k9m8a_189",Dl="_suggestionItem_k9m8a_224",Wl="_iconBox_k9m8a_236",zl="_servicesGrid_k9m8a_254",Gl="_serviceItem_k9m8a_260",Ul="_selected_k9m8a_273",Hl="_serviceName_k9m8a_277",ql="_serviceIcon_k9m8a_281",ze={filterBarWrapper:Il,container:Al,searchBar:Bl,divider:Pl,fieldSection:Tl,active:Ll,label:Ml,input:El,valueText:Rl,searchBtnWrapper:$l,searchBtn:Fl,dropdown:Ol,suggestionItem:Dl,iconBox:Wl,servicesGrid:zl,serviceItem:Gl,selected:Ul,serviceName:Hl,serviceIcon:ql},Vl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Kl=(t,s)=>{let n=null;return(...i)=>new Promise(a=>{n&&clearTimeout(n),n=setTimeout(()=>a(t(...i)),s)})},fs=[{key:"boarding",label:"Передержка",Icon:kt},{key:"walking",label:"Выгул",Icon:Yt},{key:"doggy_day_care",label:"Дневная няня",Icon:Qt},{key:"drop_in_visit",label:"Визиты",Icon:Zt},{key:"house_sitting",label:"Присмотр дома",Icon:Xt}],Yl=()=>{const{t}=ae(),s=ot(),{searchParams:n}=Be(_=>_.search),[,i]=yn(),[a,r]=c.useState(null),[l,d]=c.useState(n.address||""),[o,h]=c.useState(n.service_key||"boarding"),[x,w]=c.useState([]),N=c.useRef(null),v=c.useRef(null);c.useEffect(()=>{n.address&&d(n.address),n.service_key&&h(n.service_key)},[n.address,n.service_key]),c.useEffect(()=>{a==="location"&&v.current&&v.current.focus()},[a]);const m=c.useMemo(()=>Kl(async _=>{if(_.length<3){w([]);return}try{const S=await $s(_);w(S)}catch{w([])}},400),[]),j=_=>{const S=_.target.value;d(S),m(S),a!=="location"&&r("location")},P=_=>{d(_),w([]),r(null)},g=_=>{h(_),r(null)},u=()=>{r(null),w([]);const _={...n,address:l,service_key:o,searchReason:"city"};s(Ps(_)),s(Pt({params:_,page:1,isNewSearch:!0}));const S={service_key:o};l&&(S.address=l),i(S)};c.useEffect(()=>{const _=S=>{N.current&&!N.current.contains(S.target)&&(r(null),w([]))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const y=fs.find(_=>_.key===o)||fs[0];return y.Icon,e.jsx("div",{className:ze.filterBarWrapper,ref:N,children:e.jsx("div",{className:ze.container,children:e.jsxs("div",{className:ze.searchBar,children:[e.jsxs("div",{className:`${ze.fieldSection} ${a==="location"?ze.active:""}`,onClick:()=>r("location"),children:[e.jsx("div",{className:ze.label,children:t("exploreHeader.whereToSearchPlaceholder","Где")}),e.jsx("input",{ref:v,type:"text",className:ze.input,placeholder:t("search.location_placeholder","Район или адрес"),value:l,onChange:j,autoComplete:"off"}),a==="location"&&x.length>0&&e.jsx("div",{className:ze.dropdown,children:x.map((_,S)=>e.jsxs("div",{className:ze.suggestionItem,onClick:B=>{B.stopPropagation(),P(_)},children:[e.jsx("div",{className:ze.iconBox,children:e.jsx(Mn,{width:18})}),e.jsx("span",{children:_})]},S))})]}),e.jsx("div",{className:ze.divider}),e.jsxs("div",{className:`${ze.fieldSection} ${a==="service"?ze.active:""}`,onClick:()=>r(a==="service"?null:"service"),children:[e.jsx("div",{className:ze.label,children:t("common.service","Услуга")}),e.jsx("div",{className:ze.valueText,children:y.label}),a==="service"&&e.jsx("div",{className:ze.dropdown,onClick:_=>_.stopPropagation(),children:e.jsx("div",{className:ze.servicesGrid,children:fs.map(_=>e.jsxs("div",{className:`${ze.serviceItem} ${o===_.key?ze.selected:""}`,onClick:()=>g(_.key),children:[e.jsx("div",{className:ze.serviceIcon,children:e.jsx(_.Icon,{width:20,height:20})}),e.jsx("span",{className:ze.serviceName,children:_.label})]},_.key))})})]}),e.jsx("div",{className:ze.searchBtnWrapper,children:e.jsxs("button",{className:ze.searchBtn,onClick:u,children:[e.jsx(Vl,{}),e.jsx("span",{children:t("SearchSitterItem.searchButtonText","Найти")})]})})]})})})},Zl="_searchPageLayout_q9stm_1",Ql="_contentSplitView_q9stm_9",Xl="_resultsListColumn_q9stm_17",Jl="_hiddenOnMobile_q9stm_37",ed="_resultsHeader_q9stm_55",td="_cardsGrid_q9stm_70",sd="_flashEffect_q9stm_76",nd="_loaderContainer_q9stm_99",ad="_miniLoader_q9stm_100",id="_emptyState_q9stm_101",rd="_mapColumn_q9stm_108",od="_yandexMapInstance_q9stm_120",cd="_floatingMapToggle_q9stm_125",at={searchPageLayout:Zl,contentSplitView:Ql,resultsListColumn:Xl,hiddenOnMobile:Jl,resultsHeader:ed,cardsGrid:td,flashEffect:sd,loaderContainer:nd,miniLoader:ad,emptyState:id,mapColumn:rd,yandexMapInstance:od,floatingMapToggle:cd},ld="_container_19ah0_1",dd="_content_19ah0_12",hd="_illustration_19ah0_19",pd="_dogSvg_19ah0_22",ud="_pawText_19ah0_29",md="_tail_19ah0_37",_d="_magnifier_19ah0_42",xd="_title_19ah0_47",gd="_description_19ah0_61",vd="_actions_19ah0_76",fd="_primaryBtn_19ah0_89",jd="_secondaryBtn_19ah0_114",yd="_footerNote_19ah0_135",it={container:ld,content:dd,illustration:hd,dogSvg:pd,pawText:ud,tail:md,magnifier:_d,title:xd,description:gd,actions:vd,primaryBtn:fd,secondaryBtn:jd,footerNote:yd},On=()=>{const t=nt();return e.jsx("div",{className:it.container,children:e.jsxs("div",{className:it.content,children:[e.jsx("div",{className:it.illustration,children:e.jsxs("svg",{viewBox:"0 0 200 160",xmlns:"http://www.w3.org/2000/svg",className:it.dogSvg,children:[e.jsx("ellipse",{cx:"100",cy:"150",rx:"60",ry:"10",fill:"#E2E8F0",opacity:"0.5"}),e.jsxs("g",{className:it.dogBody,children:[e.jsx("path",{d:"M70 110 C 70 80, 130 80, 130 110 L 130 145 C 130 155, 120 155, 120 145 L 120 135 L 80 135 L 80 145 C 80 155, 70 155, 70 145 Z",fill:"#FFA726",stroke:"#F57C00",strokeWidth:"2"}),e.jsx("circle",{cx:"100",cy:"75",r:"35",fill:"#FFA726",stroke:"#F57C00",strokeWidth:"2"}),e.jsx("path",{d:"M65 75 Q 50 100, 60 110",fill:"#FFA726",stroke:"#F57C00",strokeWidth:"2"}),e.jsx("path",{d:"M135 75 Q 150 100, 140 110",fill:"#FFA726",stroke:"#F57C00",strokeWidth:"2"}),e.jsx("ellipse",{cx:"100",cy:"85",rx:"12",ry:"10",fill:"#FFFFFF"}),e.jsx("circle",{cx:"100",cy:"80",r:"4",fill:"#333"}),e.jsx("circle",{cx:"88",cy:"70",r:"3",fill:"#333"}),e.jsx("circle",{cx:"112",cy:"70",r:"3",fill:"#333"}),e.jsx("path",{d:"M70 60 Q 100 30, 130 60 L 140 65 Q 100 45, 60 65 Z",fill:"#8D6E63",stroke:"#5D4037",strokeWidth:"2"}),e.jsx("rect",{x:"98",y:"45",width:"4",height:"15",fill:"#5D4037"})]}),e.jsx("path",{d:"M70 120 Q 50 110, 60 130",fill:"none",stroke:"#FFA726",strokeWidth:"4",strokeLinecap:"round",className:it.tail}),e.jsxs("g",{className:it.magnifier,children:[e.jsx("circle",{cx:"130",cy:"110",r:"15",fill:"rgba(255,255,255,0.3)",stroke:"#607D8B",strokeWidth:"3"}),e.jsx("line",{x1:"140",y1:"120",x2:"155",y2:"135",stroke:"#795548",strokeWidth:"4",strokeLinecap:"round"}),e.jsx("path",{d:"M125 105 Q 130 100, 135 105",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.6"})]}),e.jsx("text",{x:"20",y:"40",className:it.pawText,transform:"rotate(-15 20,40)",children:"4"}),e.jsx("text",{x:"160",y:"30",className:it.pawText,transform:"rotate(15 160,30)",children:"4"}),e.jsx("circle",{cx:"100",cy:"20",r:"12",fill:"none",stroke:"#3598FE",strokeWidth:"3",opacity:"0.3"})," "]})}),e.jsx("h1",{className:it.title,children:"Мы потеряли след..."}),e.jsxs("p",{className:it.description,children:["Страница ",e.jsx("strong",{children:window.location.pathname})," убежала на прогулку и не вернулась.",e.jsx("br",{}),"Наши лучшие ищейки уже ищут её, но пока безуспешно."]}),e.jsxs("div",{className:it.actions,children:[e.jsx(Ge,{to:"/",className:it.primaryBtn,children:"Вернуться домой"}),e.jsx("button",{onClick:()=>t("/search"),className:it.secondaryBtn,children:"Найти ситтера"})]}),e.jsx("div",{className:it.footerNote,children:"Код ошибки: 404 (Not Found)"})]})})},wd=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),bd=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Nd=600,Sd={center:[55.75,37.57],zoom:10},kd=()=>{const{t}=ae(),s=ot(),[n,i]=yn(),{citySlug:a,serviceSlug:r}=Lt(),l=["error","404","undefined","null","api","static","assets","json"].includes((a||"").toLowerCase()),{searchResults:d,searchParams:o,isLoading:h,isFetchingMore:x,pagination:w}=Be(k=>k.search),[N,v]=c.useState("list"),[m,j]=c.useState(null),[P,g]=c.useState(Sd),[u,y]=c.useState(null),_=c.useRef(null),S=c.useRef(null),B=c.useRef(null),b=c.useRef(!1),p=c.useMemo(()=>a&&!l?Yo(a,r):{title:t("seo.search.title","Поиск ситтеров - PetsOk"),description:t("seo.search.description","Найдите лучшего ситтера для вашего питомца."),h1:null},[a,r,t,l]);if(c.useEffect(()=>{if(l)return;const k=n.get("address"),D=n.get("lat"),W=n.get("lon");let H=n.get("service_key")||o.service_key||"boarding";const Q={searchReason:"initial"};if(a?(Q.address=Bs(a),Q.searchReason="city",r&&Is[r]&&(H=Is[r])):k&&(Q.address=k,Q.searchReason="city"),D&&W){const $=parseFloat(D),R=parseFloat(W),X=n.get("zoom")?parseInt(n.get("zoom")):12;Q.latitude=$,Q.longitude=R,Q.searchReason="coordinates",delete Q.address,g({center:[$,R],zoom:X})}else o.latitude&&!a&&g({center:[o.latitude,o.longitude],zoom:12});Q.service_key=H,s(Ps(Q)),s(Pt({params:Q,page:1,isNewSearch:!0}))},[a,r,l]),l)return e.jsx(On,{});c.useEffect(()=>{var k;if(o.searchReason!=="map_bounds"&&o.latitude&&o.longitude){const D=(k=_.current)==null?void 0:k.getCenter();if(!D||Math.abs(D[0]-o.latitude)>.001){if(b.current=!0,g({center:[o.latitude,o.longitude],zoom:12}),!a){const W=new URLSearchParams(n);W.set("lat",o.latitude.toString()),W.set("lon",o.longitude.toString()),W.set("zoom","12"),i(W,{replace:!0})}setTimeout(()=>{b.current=!1},1e3)}}},[o.latitude,o.longitude,o.searchReason,a]);const L=()=>{b.current||(B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{const k=_.current;if(!k)return;const D=k.getBounds(),W=k.getCenter(),H=k.getZoom(),[Q,$]=D;if(!a){const X=new URLSearchParams(n);X.set("lat",W[0].toFixed(6)),X.set("lon",W[1].toFixed(6)),X.set("zoom",H.toString()),i(X,{replace:!0})}const R={...o,searchReason:"map_bounds",sw_lat:Q[0],sw_lon:Q[1],ne_lat:$[0],ne_lon:$[1],latitude:W[0],longitude:W[1],radius_km:void 0};s(Ps(R)),s(Pt({params:R,page:1,isNewSearch:!0}))},Nd))},O=k=>{const{scrollTop:D,clientHeight:W,scrollHeight:H}=k.currentTarget;H-D<=W+300&&!h&&!x&&w&&w.current_page<w.total_pages&&s(Pt({params:o,page:w.current_page+1,isNewSearch:!1}))},F=k=>j(k),A=()=>j(null),T=c.useMemo(()=>u?u.templateLayoutFactory.createClass('<div class="petsok-map-marker $[properties.markerClass]">$[properties.iconContent]</div>'):null,[u]),E=k=>{N==="map"?(v("list"),setTimeout(()=>C(k),100)):C(k)},C=k=>{const D=document.getElementById(`sitter-card-${k}`),W=S.current;if(D&&W){const H=D.offsetTop,Q=W.clientHeight,$=D.clientHeight,R=H-Q/2+$/2;W.scrollTo({top:R,behavior:"smooth"}),D.classList.add(at.flashEffect),setTimeout(()=>D.classList.remove(at.flashEffect),1e3),j(k),setTimeout(()=>j(null),1500)}};c.useEffect(()=>{const k=document.querySelector("header");return k&&k.classList.add("force-light-header"),()=>{k&&k.classList.remove("force-light-header")}},[]);const f=a?{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Главная",item:"https://petsok.ru/"},{"@type":"ListItem",position:2,name:Bs(a),item:`https://petsok.ru/${a}`},...r?[{"@type":"ListItem",position:3,name:p.h1,item:`https://petsok.ru/${a}/${r}`}]:[]]}:null;return e.jsxs("div",{className:at.searchPageLayout,children:[e.jsxs(Nt,{children:[e.jsx("title",{children:p.title}),e.jsx("meta",{name:"description",content:p.description}),e.jsx("link",{rel:"canonical",href:window.location.href}),f&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(f)})]}),e.jsx(Yl,{}),e.jsxs("div",{className:at.contentSplitView,children:[e.jsxs("div",{ref:S,className:`${at.resultsListColumn} ${N==="map"?at.hiddenOnMobile:""}`,onScroll:O,style:{position:"relative"},children:[e.jsx("div",{className:at.resultsHeader,children:a?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:p.h1}),e.jsxs("p",{children:[t("searchResults.foundCount",{count:(w==null?void 0:w.total)||d.length}),". ",t("searchResults.subtext","Проверенные ситтеры рядом с вами")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:h&&d.length===0?t("search.loading","Поиск..."):t("searchResults.foundCount",{count:(w==null?void 0:w.total)||d.length,defaultValue:`Найдено ${(w==null?void 0:w.total)||d.length} ситтеров`})}),e.jsx("p",{children:t("searchResults.subtext","Проверенные ситтеры рядом с вами")})]})}),e.jsxs("div",{className:at.cardsGrid,children:[d.map(k=>e.jsx("div",{id:`sitter-card-${k.id}`,children:e.jsx(Cl,{data:k,isHovered:m===k.id,onHover:()=>F(k.id),onLeave:A})},k.id)),h&&d.length===0&&e.jsx("div",{className:at.loaderContainer,children:"Загрузка..."}),x&&e.jsx("div",{className:at.miniLoader,children:"Подгрузка..."}),!h&&d.length===0&&e.jsx("div",{className:at.emptyState,children:e.jsx("p",{children:t("search.noResults","Никого не найдено в этой области.")})})]})]}),e.jsx("div",{className:`${at.mapColumn} ${N==="list"?at.hiddenOnMobile:""}`,children:e.jsx(wn,{query:{lang:"ru_RU",load:"package.full"},children:e.jsxs(bn,{state:P,options:{suppressMapOpenBlock:!0,minZoom:3,maxZoom:18},instanceRef:k=>{_.current=k},className:at.yandexMapInstance,width:"100%",height:"100%",onBoundsChange:L,onLoad:k=>y(k),children:[e.jsx(Nn,{options:{position:{right:10,top:150}}}),e.jsx(Xn,{options:{preset:"islands#invertedBlueClusterIcons",groupByCoordinates:!1,clusterDisableClickZoom:!1},children:d.map(k=>{if(!k.latitude||!k.longitude)return null;const D=m===k.id,W=k.is_premium,H=Math.round(k.service_price||0),Q=W?"#B45309":"#000000",$=W?"800":"600",R=W?`<span style="font-weight:${$}; color:${Q}; font-family: sans-serif;">👑 ${H}₽</span>`:`<span style="font-weight:${$}; color:${Q}; font-family: sans-serif;">${H}₽</span>`;let X="";return D?X="is-hovered":W&&(X="is-premium"),e.jsx(Jn,{geometry:[parseFloat(k.latitude),parseFloat(k.longitude)],properties:{iconContent:R,markerClass:X,hintContent:`<b>${k.name}</b><br/>${k.title||""}`},options:{iconLayout:T||"default#image",zIndex:D?2e3:W?100:1,iconShape:{type:"Rectangle",coordinates:[[-30,-15],[30,15]]}},onMouseEnter:()=>j(k.id),onMouseLeave:()=>j(null),onClick:()=>E(k.id)},k.id)})})]})})})]}),e.jsx("button",{className:at.floatingMapToggle,onClick:()=>v(k=>k==="list"?"map":"list"),children:N==="list"?e.jsxs(e.Fragment,{children:["Карта ",e.jsx(wd,{})]}):e.jsxs(e.Fragment,{children:["Список ",e.jsx(bd,{})]})})]})},Cd="_pageWrapper_gzrnf_1",Id="_container_gzrnf_8",Ad="_loadingState_gzrnf_19",Bd="_errorState_gzrnf_20",Pd="_contentLayout_gzrnf_29",Td="_leftSidebar_gzrnf_49",Ld="_profileCard_gzrnf_64",Md="_avatarCenteredWrapper_gzrnf_76",Ed="_avatarBox_gzrnf_82",Rd="_shieldBadge_gzrnf_95",$d="_profileInfoCentered_gzrnf_114",Fd="_profileName_gzrnf_118",Od="_profileLocation_gzrnf_128",Dd="_profileRatingRow_gzrnf_134",Wd="_ratingScore_gzrnf_143",zd="_ratingDot_gzrnf_147",Gd="_ratingReviews_gzrnf_151",Ud="_ctaButton_gzrnf_156",Hd="_verificationBlock_gzrnf_175",qd="_verificationItem_gzrnf_184",Vd="_iconBox_gzrnf_194",Kd="_servicesCard_gzrnf_207",Yd="_servicesList_gzrnf_221",Zd="_serviceRow_gzrnf_227",Qd="_serviceIconWrapper_gzrnf_239",Xd="_serviceInfo_gzrnf_252",Jd="_serviceTitle_gzrnf_259",eh="_serviceDesc_gzrnf_266",th="_servicePriceBlock_gzrnf_272",sh="_priceLabel_gzrnf_280",nh="_priceValue_gzrnf_288",ah="_rightContent_gzrnf_295",ih="_gallerySection_gzrnf_308",rh="_mainMediaContainer_gzrnf_331",oh="_subMediaItem_gzrnf_340",ch="_subMediaItemEmpty_gzrnf_352",lh="_mediaWrapper_gzrnf_363",dh="_photoImage_gzrnf_373",hh="_videoContainer_gzrnf_384",ph="_videoBlurBg_gzrnf_392",uh="_videoElement_gzrnf_405",mh="_playIconOverlay_gzrnf_422",_h="_viewAllOverlay_gzrnf_435",xh="_mobileShowAllBtn_gzrnf_460",gh="_headlineSection_gzrnf_483",vh="_aboutSection_gzrnf_500",fh="_descriptionText_gzrnf_507",jh="_contentSection_gzrnf_514",yh="_petsGrid_gzrnf_524",wh="_petCard_gzrnf_531",bh="_petName_gzrnf_550",Nh="_petBreed_gzrnf_555",Sh="_mapWrapper_gzrnf_560",kh="_yandexMapInstance_gzrnf_568",Ch="_mapPrivacyText_gzrnf_574",Ih="_mobileFooter_gzrnf_583",Ah="_mobilePrice_gzrnf_603",Bh="_val_gzrnf_607",Ph="_mobileBookBtn_gzrnf_612",Z={pageWrapper:Cd,container:Id,loadingState:Ad,errorState:Bd,contentLayout:Pd,leftSidebar:Td,profileCard:Ld,avatarCenteredWrapper:Md,avatarBox:Ed,shieldBadge:Rd,profileInfoCentered:$d,profileName:Fd,profileLocation:Od,profileRatingRow:Dd,ratingScore:Wd,ratingDot:zd,ratingReviews:Gd,ctaButton:Ud,verificationBlock:Hd,verificationItem:qd,iconBox:Vd,servicesCard:Kd,servicesList:Yd,serviceRow:Zd,serviceIconWrapper:Qd,serviceInfo:Xd,serviceTitle:Jd,serviceDesc:eh,servicePriceBlock:th,priceLabel:sh,priceValue:nh,rightContent:ah,gallerySection:ih,mainMediaContainer:rh,subMediaItem:oh,subMediaItemEmpty:ch,mediaWrapper:lh,photoImage:dh,videoContainer:hh,videoBlurBg:ph,videoElement:uh,playIconOverlay:mh,viewAllOverlay:_h,mobileShowAllBtn:xh,headlineSection:gh,aboutSection:vh,descriptionText:fh,contentSection:jh,petsGrid:yh,petCard:wh,petName:bh,petBreed:Nh,mapWrapper:Sh,yandexMapInstance:kh,mapPrivacyText:Ch,mobileFooter:Ih,mobilePrice:Ah,val:Bh,mobileBookBtn:Ph},Th=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"#FFC107",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),Lh=()=>e.jsxs("svg",{width:"28",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1Z",fill:"#FFC107"}),e.jsx("path",{d:"M10 17L6 13L7.41 11.59L10 14.17L16.59 7.58L18 9L10 17Z",fill:"#231F20"})]}),Ys=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),Mh=()=>e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:e.jsx("path",{d:"M8 5v14l11-7z"})}),Eh=()=>e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),Rh=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),e.jsx("circle",{cx:"9",cy:"10",r:"2"}),e.jsx("path",{d:"M15 8h2"}),e.jsx("path",{d:"M15 12h2"}),e.jsx("path",{d:"M7 16h10"})]}),$h=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}),e.jsx("path",{d:"M16 3l1.5 1.5 3.5-3.5",stroke:"#34C759"})]}),Fh=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),e.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Oh=t=>({boarding:{label:"Передержка",desc:"у ситтера дома",Icon:kt},walking:{label:"Выгул",desc:"в вашем районе",Icon:Yt},drop_in_visit:{label:"Визиты",desc:"к вам домой",Icon:Zt},doggy_day_care:{label:"Дневная няня",desc:"у ситтера дома",Icon:Qt},house_sitting:{label:"Присмотр",desc:"в вашем доме",Icon:Xt}})[t]||{label:t,desc:"Услуга",Icon:kt},Zs=({item:t,onClick:s})=>t.media_type==="video"?e.jsx("div",{className:Z.mediaWrapper,onClick:s,children:e.jsxs("div",{className:Z.videoContainer,children:[e.jsx("img",{src:t.preview_url||t.url,alt:"background blur",className:Z.videoBlurBg}),e.jsx("video",{src:t.url,poster:t.preview_url,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:Z.videoElement}),e.jsx("div",{className:Z.playIconOverlay,children:e.jsx(Mh,{})})]})}):e.jsx("div",{className:Z.mediaWrapper,onClick:s,children:e.jsx("img",{src:t.url,alt:"Gallery item",className:Z.photoImage})}),Dh=()=>{var y,_,S,B,b,p,L,O,F;const{id:t}=Lt(),{t:s}=ae(),[n,i]=c.useState(null),[a,r]=c.useState(!0),[l,d]=c.useState(!1),[o,h]=c.useState(0);c.useEffect(()=>{(async()=>{if(t)try{const T=await Ua(t);i(T)}catch(T){console.error("Failed to load sitter",T)}finally{r(!1)}})()},[t]),c.useEffect(()=>{const A=document.querySelector("header");return A&&A.classList.add("force-light-header"),()=>{A&&A.classList.remove("force-light-header")}},[]);const x=c.useMemo(()=>{var A,T;return((T=(A=n==null?void 0:n.worker_services)==null?void 0:A.data)==null?void 0:T.filter(E=>E.is_active))||[]},[n]),w=c.useMemo(()=>{var E,C,f;if(!n)return[];let T=(((E=n.media)==null?void 0:E.data)||[]).map(k=>k.media_type==="video"?{type:"video",width:1280,height:720,poster:k.preview_url,sources:[{src:k.url,type:"video/mp4"}]}:{src:k.url});return T.length===0&&((f=(C=n.avatar)==null?void 0:C.data)!=null&&f.url)&&(T=[{src:n.avatar.data.url}]),T},[n]),N=(((y=n==null?void 0:n.media)==null?void 0:y.data)||[]).slice(0,5),v=N[0],m=N.slice(1,5),j=((S=(_=n==null?void 0:n.media)==null?void 0:_.data)==null?void 0:S.length)||0,P=j>5?j-5:0;if(a)return e.jsx("div",{className:Z.loadingState,children:"Загрузка..."});if(!n)return e.jsx("div",{className:Z.errorState,children:"Ситтер не найден"});const g=x.length>0?Math.min(...x.map(A=>A.price_per_unit)):0,u=typeof n.country=="object"?n.country.name:n.country||"RU";return e.jsxs("div",{className:Z.pageWrapper,children:[e.jsxs(Nt,{children:[e.jsxs("title",{children:[n.name," - PetsOk"]}),e.jsx("meta",{name:"description",content:n.title})]}),e.jsx("div",{className:Z.container,children:e.jsxs("div",{className:Z.contentLayout,children:[e.jsxs("aside",{className:Z.leftSidebar,children:[e.jsxs("div",{className:Z.profileCard,children:[e.jsx("div",{className:Z.avatarCenteredWrapper,children:e.jsxs("div",{className:Z.avatarBox,children:[e.jsx("img",{src:((b=(B=n.avatar)==null?void 0:B.data)==null?void 0:b.url)||"/placeholder.jpg",alt:n.name}),e.jsx("div",{className:Z.shieldBadge,children:e.jsx(Lh,{})})]})}),e.jsxs("div",{className:Z.profileInfoCentered,children:[e.jsx("h1",{className:Z.profileName,children:n.name}),e.jsxs("p",{className:Z.profileLocation,children:[(p=n.city)==null?void 0:p.name,", ",u]}),e.jsxs("div",{className:Z.profileRatingRow,children:[e.jsx(Th,{}),e.jsx("span",{className:Z.ratingScore,children:Number(n.user_rating).toFixed(1)}),e.jsx("span",{className:Z.ratingDot,children:"•"}),e.jsxs("span",{className:Z.ratingReviews,children:[n.reviews_count," reviews"]})]})]}),e.jsx("button",{className:Z.ctaButton,children:"Предложить заказ"}),e.jsxs("div",{className:Z.verificationBlock,children:[e.jsxs("div",{className:Z.verificationItem,children:[e.jsx("div",{className:Z.iconBox,children:e.jsx(Rh,{})}),e.jsx("span",{children:"Личность подтверждена"})]}),e.jsxs("div",{className:Z.verificationItem,children:[e.jsx("div",{className:Z.iconBox,children:e.jsx($h,{})}),e.jsx("span",{children:"Телефон подтвержден"})]}),e.jsxs("div",{className:Z.verificationItem,children:[e.jsx("div",{className:Z.iconBox,children:e.jsx(Fh,{})}),e.jsx("span",{children:"Тест пройден"})]})]})]}),x.length>0&&e.jsxs("div",{className:Z.servicesCard,children:[e.jsx("h3",{children:"Услуги"}),e.jsx("div",{className:Z.servicesList,children:x.map(A=>{const T=Oh(A.service_key);return e.jsxs("div",{className:Z.serviceRow,children:[e.jsx("div",{className:Z.serviceIconWrapper,children:e.jsx(T.Icon,{width:24,height:24,color:"currentColor"})}),e.jsxs("div",{className:Z.serviceInfo,children:[e.jsx("span",{className:Z.serviceTitle,children:T.label}),e.jsx("span",{className:Z.serviceDesc,children:T.desc})]}),e.jsxs("div",{className:Z.servicePriceBlock,children:[e.jsx("span",{className:Z.priceLabel,children:"от"}),e.jsxs("span",{className:Z.priceValue,children:[Math.round(A.price_per_unit)," ",n.currency_symbol]})]})]},A.service_key)})})]})]}),e.jsxs("div",{className:Z.rightContent,children:[e.jsxs("div",{className:Z.gallerySection,children:[e.jsx("div",{className:Z.mainMediaContainer,children:v?e.jsx(Zs,{item:v,onClick:()=>{h(0),d(!0)}}):e.jsx("div",{className:Z.mediaWrapper,onClick:()=>{h(0),d(!0)},children:e.jsx("img",{src:((O=(L=n.avatar)==null?void 0:L.data)==null?void 0:O.url)||"/placeholder.jpg",alt:"Avatar",className:Z.photoImage})})}),m.map((A,T)=>e.jsxs("div",{className:Z.subMediaItem,children:[e.jsx(Zs,{item:A,onClick:()=>{h(T+1),d(!0)}}),T===3&&(P>0||j>5)&&e.jsxs("div",{className:Z.viewAllOverlay,onClick:E=>{E.stopPropagation(),d(!0)},children:[e.jsx(Ys,{}),e.jsxs("span",{children:["+",j-5," фото"]})]})]},A.id)),m.length<4&&Array.from({length:4-m.length}).map((A,T)=>e.jsx("div",{className:Z.subMediaItemEmpty},`empty-${T}`)),e.jsxs("button",{className:Z.mobileShowAllBtn,onClick:()=>d(!0),children:[e.jsx(Ys,{})," Все фото"]})]}),e.jsxs("div",{className:Z.headlineSection,children:[e.jsx("h1",{children:n.title}),e.jsxs("div",{className:Z.aboutSection,children:[e.jsx("h2",{children:"Обо мне"}),e.jsx("p",{className:Z.descriptionText,children:n.description})]})]}),((F=n.pets)==null?void 0:F.data)&&n.pets.data.length>0&&e.jsxs("div",{className:`${Z.petsSection} ${Z.contentSection}`,children:[e.jsx("h2",{children:"Питомцы ситтера"}),e.jsx("div",{className:Z.petsGrid,children:n.pets.data.map(A=>{var T,E,C,f;return e.jsxs("div",{className:Z.petCard,children:[e.jsx("img",{src:((E=(T=A.avatar)==null?void 0:T.data)==null?void 0:E.preview_url)||((f=(C=A.avatar)==null?void 0:C.data)==null?void 0:f.url),alt:A.name}),e.jsx("div",{className:Z.petName,children:A.name}),e.jsx("div",{className:Z.petBreed,children:A.breed_name})]},A.id)})})]}),n.latitude&&n.longitude&&e.jsxs("div",{className:`${Z.mapSection} ${Z.contentSection}`,children:[e.jsx("h2",{children:"Местоположение"}),e.jsx("div",{className:Z.mapWrapper,children:e.jsx(wn,{query:{lang:"ru_RU"},children:e.jsxs(bn,{defaultState:{center:[parseFloat(n.latitude),parseFloat(n.longitude)],zoom:13,controls:[]},width:"100%",height:"100%",className:Z.yandexMapInstance,children:[e.jsx(Nn,{options:{position:{right:10,top:50}}}),e.jsx(ea,{geometry:[[parseFloat(n.latitude),parseFloat(n.longitude)],500],options:{draggable:!1,fillColor:"rgba(53, 152, 254, 0.2)",strokeColor:"#3598FE",strokeWidth:2,strokeOpacity:.8}})]},n.user_id)})}),e.jsxs("div",{className:Z.mapPrivacyText,children:[e.jsx(Eh,{})," ",e.jsx("span",{children:"Точный адрес будет доступен после бронирования"})]})]})]})]})}),e.jsxs("div",{className:Z.mobileFooter,children:[e.jsx("div",{className:Z.mobilePrice,children:e.jsxs("span",{className:Z.val,children:["от ",Math.round(g)," ",n.currency_symbol]})}),e.jsx("button",{className:Z.mobileBookBtn,children:"Предложить заказ"})]}),e.jsx(Ms,{open:l,close:()=>d(!1),index:o,slides:w,plugins:[Es],video:{autoPlay:!0,muted:!1,controls:!0}})]})},Wh="_layoutContainer_72txo_1",zh="_sidebar_72txo_7",Gh="_open_72txo_24",Uh="_sidebarHeader_72txo_30",Hh="_logo_72txo_37",qh="_navLinks_72txo_45",Vh="_navItem_72txo_54",Kh="_active_72txo_69",Yh="_userProfileSnippet_72txo_82",Zh="_userInfo_72txo_95",Qh="_logoutBtn_72txo_111",Xh="_mainArea_72txo_122",Jh="_topBar_72txo_135",ep="_mobileMenuBtn_72txo_147",tp="_contentWrapper_72txo_166",sp="_card_72txo_178",np="_statsGrid_72txo_198",ap="_statCard_72txo_204",ip="_icon_72txo_214",rp="_blue_72txo_223",op="_green_72txo_227",cp="_orange_72txo_231",lp="_info_72txo_235",dp="_label_72txo_239",hp="_value_72txo_244",pp="_overlay_72txo_250",up="_visible_72txo_260",pe={layoutContainer:Wh,sidebar:zh,open:Gh,sidebarHeader:Uh,logo:Hh,navLinks:qh,navItem:Vh,active:Kh,userProfileSnippet:Yh,userInfo:Zh,logoutBtn:Qh,mainArea:Xh,topBar:Jh,mobileMenuBtn:ep,contentWrapper:tp,card:sp,statsGrid:np,statCard:ap,icon:ip,blue:rp,green:op,orange:cp,info:lp,label:dp,value:hp,overlay:pp,visible:up},vt={Home:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),User:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Pets:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),List:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Wallet:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Briefcase:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Settings:()=>e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chat:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),LogOut:()=>e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),BecomeSitter:()=>e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v4m-2-2h4"})]})},mp=({isOpen:t,onClose:s})=>{var h,x,w;const{t:n}=ae(),i=ot(),a=Be(N=>N.auth.user),r=a==null?void 0:a.isSitter,l=[{to:"/cabinet/profile",label:n("cabinet.profile","Мой профиль"),icon:vt.User},{to:"/cabinet/pets",label:n("cabinet.pets","Мои питомцы"),icon:vt.Pets},{to:"/cabinet/orders",label:n("cabinet.orders","Мои заказы"),icon:vt.List},{to:"/cabinet/wallet",label:n("cabinet.wallet","Финансы"),icon:vt.Wallet},{to:"/cabinet/chat",label:n("cabinet.chat","Сообщения"),icon:vt.Chat}],d=[{to:"/cabinet/sitter-dashboard",label:n("cabinet.sitterDashboard","Панель ситтера"),icon:vt.Home},{to:"/cabinet/sitter-jobs",label:n("cabinet.sitterJobs","Мои работы"),icon:vt.Briefcase},{to:"/cabinet/sitter-settings",label:n("sitterSettings.title","Настройки исполнителя"),icon:vt.Settings}],o=()=>{i(Jt()),window.location.href="/"};return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:`${pe.sidebar} ${t?pe.open:""}`,children:[e.jsx("div",{className:pe.sidebarHeader,children:e.jsx(es,{to:"/",className:pe.logo,children:"PetsOk"})}),e.jsxs("nav",{className:pe.navLinks,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"0 16px",marginBottom:"8px",fontSize:"12px",color:"#999",fontWeight:600,textTransform:"uppercase"},children:n("cabinet.modeSitter","Исполнитель")}),d.map(N=>e.jsxs(es,{to:N.to,className:({isActive:v})=>`${pe.navItem} ${v?pe.active:""}`,onClick:s,children:[e.jsx(N.icon,{}),N.label]},N.to)),e.jsx("div",{style:{height:"1px",background:"#eee",margin:"16px 0"}})]}),e.jsx("div",{style:{padding:"0 16px",marginBottom:"8px",fontSize:"12px",color:"#999",fontWeight:600,textTransform:"uppercase"},children:n("cabinet.modeClient","Клиент")}),l.map(N=>e.jsxs(es,{to:N.to,className:({isActive:v})=>`${pe.navItem} ${v?pe.active:""}`,onClick:s,children:[e.jsx(N.icon,{}),N.label]},N.to)),!r&&e.jsxs(es,{to:"/cabinet/become-sitter",className:pe.navItem,style:{marginTop:"auto",color:"#3598FE",fontWeight:600},onClick:s,children:[e.jsx(vt.BecomeSitter,{}),n("header.becomeSitter","Стать ситтером")]})]}),e.jsxs("div",{className:pe.userProfileSnippet,children:[(x=(h=a==null?void 0:a.avatar)==null?void 0:h.data)!=null&&x.preview_url?e.jsx("img",{src:a.avatar.data.preview_url,alt:"User"}):e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:"#eee",display:"flex",alignItems:"center",justifyContent:"center"},children:((w=a==null?void 0:a.name)==null?void 0:w[0])||"U"}),e.jsxs("div",{className:pe.userInfo,children:[e.jsx("h4",{children:(a==null?void 0:a.name)||(a==null?void 0:a.email)}),e.jsx("span",{children:r?n("userRoles.sitter","Ситтер"):"Клиент"})]}),e.jsx("div",{className:pe.logoutBtn,onClick:o,title:n("profile.logout","Выйти"),children:e.jsx(vt.LogOut,{})})]})]}),e.jsx("div",{className:`${pe.overlay} ${t?pe.visible:""}`,onClick:s})]})},_p=()=>e.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),xp={"/cabinet":"Обзор","/cabinet/profile":"Мой профиль","/cabinet/pets":"Мои питомцы","/cabinet/orders":"Заказы","/cabinet/chat":"Сообщения","/cabinet/sitter-dashboard":"Панель управления","/cabinet/sitter-jobs":"Мои работы"},gp=()=>{const[t,s]=c.useState(!1),i=Kt().pathname;let a=xp[i];a||(i.startsWith("/cabinet/chat")?a="Сообщения":i.startsWith("/cabinet/pets")?a="Мои питомцы":a="Личный кабинет");const r=()=>s(!0);return e.jsxs("div",{className:pe.layoutContainer,children:[e.jsx(mp,{isOpen:t,onClose:()=>s(!1)}),e.jsxs("div",{className:pe.mainArea,children:[e.jsxs("header",{className:pe.topBar,children:[e.jsx("button",{className:pe.mobileMenuBtn,onClick:()=>s(!0),children:e.jsx(_p,{})}),e.jsx("h1",{children:a})]}),e.jsx("div",{className:pe.contentWrapper,children:e.jsx(Rs,{context:{openMobileMenu:r}})})]})]})},vp={dialoguesList:[],currentChatGroupId:null,lastReceivedMessage:null,isLoading:!1,error:null,typingStates:{}},cs=gt("dialogues/fetchDialogues",async(t,{rejectWithValue:s})=>{var n;try{const i=await di(1,50),a=((n=i.data)==null?void 0:n.data)||i.data||[];return Array.isArray(a)?a.map(l=>{var d,o;if(l.last_message){const h=l.last_message,x=h.owner||h.user,w=String(h.owner_id||(x==null?void 0:x.id)||""),N={_id:w,name:(x==null?void 0:x.name)||h.sender_name||"User",avatar:((d=x==null?void 0:x.avatar)==null?void 0:d.preview_url)||((o=h.sender_avatar)==null?void 0:o.preview_url)};l.last_message={...h,text:h.message||h.text||"",user:N,owner_id:w,is_system:!!h.is_system}}return l}):[]}catch(i){return s(i.message)}}),Dn=Vt({name:"dialogues",initialState:vp,reducers:{setCurrentChatGroupId(t,s){if(t.currentChatGroupId=s.payload,s.payload){const n=t.dialoguesList.find(i=>String(i.id)===String(s.payload));n&&(n.unread_count=0)}},clearCurrentChatGroupId(t){t.currentChatGroupId=null},setDialogueTyping(t,s){const n=String(s.payload.groupId),i=String(s.payload.userId),a=s.payload.isTyping;t.typingStates[n]||(t.typingStates[n]=[]),a?t.typingStates[n].includes(i)||t.typingStates[n].push(i):t.typingStates[n]=t.typingStates[n].filter(r=>r!==i)},clearTypingForUserInGroup(t,s){const n=String(s.payload.groupId),i=String(s.payload.userId);t.typingStates[n]&&(t.typingStates[n]=t.typingStates[n].filter(a=>a!==i))},updateDialogueFromWs(t,s){var x,w;const n=s.payload;if(!n||!n.chat_group_id)return;const i=String(n.chat_group_id),a=String(n.currentUserIdInApp||""),r=n.owner||n.user,l=String(n.owner_id||n.sender_id||(r==null?void 0:r.id)||""),d={_id:l,name:(r==null?void 0:r.name)||n.sender_name||"User",avatar:((x=r==null?void 0:r.avatar)==null?void 0:x.preview_url)||((w=n.user)==null?void 0:w.avatar)||n.sender_avatar},o={id:n.id,text:n.message||n.text||"",createdAt:n.createdAt||n.created_at||new Date().toISOString(),user:d,chat_group_id:i,owner_id:l,read:!1,is_system:!!n.is_system,gallery:n.gallery||[],_receiveTimestamp:Date.now(),tempId:n.tempId};t.lastReceivedMessage=o;const h=t.dialoguesList.findIndex(N=>String(N.id)===i);if(h!==-1){const N=t.dialoguesList[h];N.last_message=o,N.last_message_at=o.createdAt,l!==a&&t.currentChatGroupId!==i?N.unread_count=(N.unread_count||0)+1:t.currentChatGroupId===i&&(N.unread_count=0),t.dialoguesList.splice(h,1),t.dialoguesList.unshift(N)}},markDialogueAsReadOptimistic(t,s){const n=s.payload,i=t.dialoguesList.find(a=>String(a.id)===n);i&&(i.unread_count=0)}},extraReducers:t=>{t.addCase(cs.fulfilled,(s,n)=>{s.dialoguesList=n.payload,s.isLoading=!1}),t.addCase(cs.pending,s=>{s.isLoading=!0}),t.addCase(cs.rejected,(s,n)=>{s.isLoading=!1,s.error=n.payload})}}),{setCurrentChatGroupId:fp,clearCurrentChatGroupId:Qs,setDialogueTyping:Xs,clearTypingForUserInGroup:jp,updateDialogueFromWs:Ts,markDialogueAsReadOptimistic:Zw}=Dn.actions,yp=Dn.reducer,wp={isConnected:!1,isConnecting:!1,error:null},Wn=Vt({name:"websocket",initialState:wp,reducers:{websocketStateChange(t,s){s.payload.connected!==void 0&&(t.isConnected=s.payload.connected),s.payload.connecting!==void 0&&(t.isConnecting=s.payload.connecting),s.payload.error!==void 0&&(t.error=s.payload.error)}}}),{websocketStateChange:Ft}=Wn.actions,bp=Wn.reducer;window.Pusher=ya;const zn="WEBSOCKET_CONNECT",Np="WEBSOCKET_DISCONNECT",Gn="SUBSCRIBE_TO_GROUP_TYPING_CHANNEL",Un="UNSUBSCRIBE_FROM_GROUP_TYPING_CHANNEL",Hn="SEND_TYPING";let st=null,ls=null;const zt={},It={},Sp=t=>{var i,a;if(!t||!t.id)return null;const s=String(t.owner_id||t.sender_id||((i=t.user)==null?void 0:i.id)||((a=t.user)==null?void 0:a._id)||""),n=t.owner||t.user;return{id:Number(t.id),text:t.message||t.text||"",createdAt:t.created_at||new Date().toISOString(),is_system:!!t.is_system,chat_group_id:String(t.chat_group_id||t.group_id),owner_id:s,user:{_id:s,id:s,name:(n==null?void 0:n.name)||t.sender_name||"User",avatar:n==null?void 0:n.avatar},gallery:t.gallery||[],read:t.read||!1,_receiveTimestamp:Date.now()}},kp=t=>s=>n=>{var r,l,d,o,h;const{dispatch:i,getState:a}=t;switch(n.type){case zn:{const x=a(),w=x.auth.token,N=(r=n.payload)!=null&&r.userId?String(n.payload.userId):(l=x.auth.user)!=null&&l.id?String(x.auth.user.id):null;if(!w||!N||st&&st.connector.pusher.connection.state==="connected"&&ls===N)return s(n);st&&Js(i),i(Ft({connecting:!0,error:null})),fetch(`${Re.apiBaseUrl}/chat/verify`,{method:"GET",headers:{Authorization:`Bearer ${w}`,Accept:"application/json"}}).then(v=>v.json()).then(v=>{if(!v.app_key)throw new Error("Invalid WS config");st=new wa({broadcaster:"pusher",key:v.app_key,cluster:v.app_cluster||"mt1",wsHost:v.host||"petsok.ru",wsPort:v.port||443,wssPort:v.port||443,forceTLS:v.scheme==="https"||v.port===443,disableStats:!0,encrypted:!0,authEndpoint:`${Re.apiBaseUrl.replace("/api/v1","")}/broadcasting/auth`,auth:{headers:{Authorization:`Bearer ${w}`,Accept:"application/json"}},enabledTransports:["ws","wss"]}),st.connector.pusher.connection.bind("connected",()=>{ls=N,i(Ft({connected:!0,connecting:!1,error:null}));const m=`App.Containers.User.Models.User.${N}`;st.private(m).listen("Ws.ReceiveUserMessage",j=>{const P=j.resource||j;if(P){const g=Sp(P);g&&(i(Ts({...g,currentUserIdInApp:N})),i(jp({groupId:String(g.chat_group_id),userId:String(g.owner_id)})))}})}),st.connector.pusher.connection.bind("disconnected",()=>{i(Ft({connected:!1,connecting:!1})),ls=null}),st.connector.pusher.connection.bind("error",m=>{var j,P;((P=(j=m==null?void 0:m.error)==null?void 0:j.data)==null?void 0:P.code)!==4004&&i(Ft({connected:!1,connecting:!1,error:"Connection error"}))})}).catch(v=>i(Ft({connecting:!1,error:v.message})));break}case Np:Js(i);break;case Gn:st&&((d=n.payload)!=null&&d.groupId)&&Cp(i,a,String(n.payload.groupId));break;case Un:(o=n.payload)!=null&&o.groupId&&qn(String(n.payload.groupId));break;case Hn:{const{groupId:x}=n.payload,w=zt[String(x)];if(w){const N=(h=a().auth.user)==null?void 0:h.id;w.whisper("typing",{userId:String(N)})}break}}return s(n)},Js=t=>{st&&(Object.keys(zt).forEach(s=>qn(s)),st.disconnect(),st=null,ls=null,t(Ft({connected:!1,connecting:!1,error:null})))},Cp=(t,s,n)=>{if(!st||zt[n])return;const i=st.private(`App.Models.ChatGroup.${n}`);zt[n]=i,i.listenForWhisper("typing",a=>{var o;const r=String((a==null?void 0:a.userId)||"partner"),l=String((o=s().auth.user)==null?void 0:o.id);if(r===l)return;t(Xs({groupId:n,userId:r,isTyping:!0}));const d=`${n}_${r}`;It[d]&&clearTimeout(It[d]),It[d]=setTimeout(()=>{t(Xs({groupId:n,userId:r,isTyping:!1})),delete It[d]},3e3)})},qn=t=>{st&&(Object.keys(It).forEach(s=>{s.startsWith(`${t}_`)&&(clearTimeout(It[s]),delete It[s])}),zt[t]&&(st.leave(`App.Models.ChatGroup.${t}`),delete zt[t]))},Ip="_chatContainer_odwk2_1",Ap="_sidebar_odwk2_25",Bp="_hiddenOnMobile_odwk2_37",Pp="_mobileSidebarHeader_odwk2_42",Tp="_dialoguesList_odwk2_76",Lp="_sectionContainer_odwk2_81",Mp="_sectionHeader_odwk2_87",Ep="_chevron_odwk2_104",Rp="_collapsed_odwk2_110",$p="_dialogueItem_odwk2_114",Fp="_active_odwk2_126",Op="_avatarWrapper_odwk2_132",Dp="_avatar_odwk2_132",Wp="_unreadDot_odwk2_145",zp="_dialogueInfo_odwk2_156",Gp="_dialogueTop_odwk2_161",Up="_dialogueName_odwk2_167",Hp="_unreadName_odwk2_176",qp="_dialogueTime_odwk2_181",Vp="_dialoguePreview_odwk2_186",Kp="_lastMessage_odwk2_192",Yp="_typing_odwk2_200",Zp="_unreadText_odwk2_205",Qp="_emptyState_odwk2_210",Xp="_chatWindow_odwk2_217",Jp="_chatHeader_odwk2_234",eu="_headerLeft_odwk2_246",tu="_headerAvatar_odwk2_254",su="_headerRight_odwk2_262",nu="_backButton_odwk2_268",au="_chatHeaderInfo_odwk2_287",iu="_typingStatus_odwk2_301",ru="_onlineStatus_odwk2_306",ou="_menuBtn_odwk2_311",cu="_dropdownMenu_odwk2_322",lu="_messagesArea_odwk2_351",du="_loadingMore_odwk2_367",hu="_centerLoading_odwk2_368",pu="_emptyPlaceholder_odwk2_375",uu="_messageRow_odwk2_381",mu="_me_odwk2_311",_u="_messageBubble_odwk2_388",xu="_them_odwk2_392",gu="_systemMessageRow_odwk2_401",vu="_systemBubble_odwk2_406",fu="_avatarCol_odwk2_416",ju="_msgText_odwk2_442",yu="_mediaGrid_odwk2_446",wu="_mediaItemWrapper_odwk2_453",bu="_mediaImg_odwk2_462",Nu="_videoPreviewBox_odwk2_472",Su="_playOverlay_odwk2_482",ku="_msgMeta_odwk2_493",Cu="_time_odwk2_501",Iu="_status_odwk2_504",Au="_inputArea_odwk2_508",Bu="_attachmentsPreview_odwk2_521",Pu="_attachItem_odwk2_527",Tu="_previewMedia_odwk2_533",Lu="_removeAttach_odwk2_539",Mu="_inputWrapper_odwk2_555",Eu="_fileBtn_odwk2_563",Ru="_messageInput_odwk2_576",$u="_sendBtn_odwk2_588",G={chatContainer:Ip,sidebar:Ap,hiddenOnMobile:Bp,mobileSidebarHeader:Pp,dialoguesList:Tp,sectionContainer:Lp,sectionHeader:Mp,chevron:Ep,collapsed:Rp,dialogueItem:$p,active:Fp,avatarWrapper:Op,avatar:Dp,unreadDot:Wp,dialogueInfo:zp,dialogueTop:Gp,dialogueName:Up,unreadName:Hp,dialogueTime:qp,dialoguePreview:Vp,lastMessage:Kp,typing:Yp,unreadText:Zp,emptyState:Qp,chatWindow:Xp,chatHeader:Jp,headerLeft:eu,headerAvatar:tu,headerRight:su,backButton:nu,chatHeaderInfo:au,typingStatus:iu,onlineStatus:ru,menuBtn:ou,dropdownMenu:cu,messagesArea:lu,loadingMore:du,centerLoading:hu,emptyPlaceholder:pu,messageRow:uu,me:mu,messageBubble:_u,them:xu,systemMessageRow:gu,systemBubble:vu,avatarCol:fu,msgText:ju,mediaGrid:yu,mediaItemWrapper:wu,mediaImg:bu,videoPreviewBox:Nu,playOverlay:Su,msgMeta:ku,time:Cu,status:Iu,inputArea:Au,attachmentsPreview:Bu,attachItem:Pu,previewMedia:Tu,removeAttach:Lu,inputWrapper:Mu,fileBtn:Eu,messageInput:Ru,sendBtn:$u},en=({className:t})=>e.jsx("svg",{className:t,width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),Fu=()=>e.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Ou=({onSelect:t,activeGroupId:s,className:n,onOpenMenu:i})=>{const{t:a}=ae(),r=ot(),{dialoguesList:l,typingStates:d}=Be(u=>u.dialogues),{user:o}=Be(u=>u.auth),{isConnected:h}=Be(u=>u.websocket),[x,w]=c.useState({});c.useEffect(()=>{const u=[];return h&&l.length>0&&l.forEach(y=>{if(y&&y.id){const _=String(y.id);r({type:Gn,payload:{groupId:_}}),u.push(_)}}),()=>{u.forEach(y=>{r({type:Un,payload:{groupId:y}})})}},[l,h,r]);const N=u=>{w(y=>({...y,[u]:!y[u]}))},v=u=>{if(!u)return"";const y=Le(u);return y.isSame(Le(),"day")?y.format("HH:mm"):y.format("D MMM")},m=u=>{var _;return!u||!(o!=null&&o.id)?!1:String(u.owner_id||((_=u.user)==null?void 0:_._id)||"")===String(o.id)},j=c.useMemo(()=>{const u={support:{title:a("inbox.sectionTitleSupport","Поддержка"),data:[]},active:{title:a("inbox.sectionTitleActiveChats","Активные чаты"),data:[]},other:{title:a("inbox.sectionTitleOtherChats","Другие чаты"),data:[]}};return l.forEach(y=>{y&&(y.type==="support"?u.support.data.push(y):y.status==="open"||y.status==="active"?u.active.data.push(y):u.other.data.push(y))}),u},[l,a]),P=u=>{var F,A,T;const y=u.participant,_=String(u.id),B=(d[_]||[]).some(E=>String(E)!==String(o==null?void 0:o.id)),b=u.last_message;let p=(b==null?void 0:b.text)||(b==null?void 0:b.message)||a("inbox.noMessages","Нет сообщений");b!=null&&b.is_system?p=`Система: ${p}`:(F=b==null?void 0:b.gallery)!=null&&F.length&&!b.text&&!b.message?p="📷 Медиа файл":m(b)&&(p=`${a("common.you","Вы")}: ${p}`);const L=(y==null?void 0:y.name)||(u.type==="support"?a("inbox.supportTeamDefaultName","Поддержка"):"User"),O=((A=y==null?void 0:y.avatar)==null?void 0:A.preview_url)||((T=y==null?void 0:y.avatar)==null?void 0:T.url)||"/placeholder-user.jpg";return e.jsxs("div",{className:`${G.dialogueItem} ${String(u.id)===s?G.active:""}`,onClick:()=>t(String(u.id)),children:[e.jsxs("div",{className:G.avatarWrapper,children:[e.jsx("img",{src:O,alt:"Ava",className:G.avatar}),u.unread_count>0&&e.jsx("div",{className:G.unreadDot})]}),e.jsxs("div",{className:G.dialogueInfo,children:[e.jsxs("div",{className:G.dialogueTop,children:[e.jsx("span",{className:`${G.dialogueName} ${u.unread_count>0?G.unreadName:""}`,children:L}),e.jsx("span",{className:G.dialogueTime,children:v(u.last_message_at)})]}),e.jsx("div",{className:G.dialoguePreview,children:B?e.jsx("span",{className:G.typing,children:a("chat.typing","печатает...")}):e.jsx("span",{className:`${G.lastMessage} ${u.unread_count>0?G.unreadText:""}`,children:p})})]})]},u.id)},g=l.length>0;return e.jsxs("div",{className:`${G.sidebar} ${n||""}`,children:[e.jsxs("div",{className:G.mobileSidebarHeader,children:[e.jsx("button",{onClick:i,children:e.jsx(Fu,{})}),e.jsx("h2",{children:"Сообщения"})]}),e.jsx("div",{className:G.dialoguesList,children:g?e.jsxs(e.Fragment,{children:[j.support.data.length>0&&e.jsx("div",{className:G.sectionContainer,children:P(j.support.data[0])}),j.active.data.length>0&&e.jsxs("div",{className:G.sectionContainer,children:[e.jsxs("div",{className:G.sectionHeader,onClick:()=>N("active"),children:[e.jsx("span",{children:j.active.title}),e.jsx(en,{className:`${G.chevron} ${x.active?G.collapsed:""}`})]}),!x.active&&e.jsx("div",{className:G.sectionList,children:j.active.data.map(P)})]}),j.other.data.length>0&&e.jsxs("div",{className:G.sectionContainer,children:[e.jsxs("div",{className:G.sectionHeader,onClick:()=>N("other"),children:[e.jsx("span",{children:j.other.title}),e.jsx(en,{className:`${G.chevron} ${x.other?G.collapsed:""}`})]}),!x.other&&e.jsx("div",{className:G.sectionList,children:j.other.data.map(P)})]})]}):e.jsx("div",{className:G.emptyState,children:e.jsx("p",{children:a("inbox.noDialogues","У вас пока нет диалогов")})})})]})},Du="_modalOverlay_1fj3i_1",Wu="_modalContent_1fj3i_16",zu="_header_1fj3i_28",Gu="_closeBtn_1fj3i_41",Uu="_subtitle_1fj3i_53",Hu="_list_1fj3i_60",qu="_listItem_1fj3i_69",Vu="_checkCircle_1fj3i_80",Ku="_confirmBtn_1fj3i_96",yt={modalOverlay:Du,modalContent:Wu,header:zu,closeBtn:Gu,subtitle:Uu,list:Hu,listItem:qu,checkCircle:Vu,confirmBtn:Ku},Yu=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),Zu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),tn=document.getElementById("modal-root"),Qu=({isOpen:t,onClose:s})=>{const{t:n}=ae();if(!t||!tn)return null;const i=[n("checklist.food","Корм и лакомства"),n("checklist.leash","Ошейник и поводок"),n("checklist.bowls","Миски (для еды и воды)"),n("checklist.toy","Любимая игрушка"),n("checklist.bed","Лежанка или плед"),n("checklist.passport","Ветпаспорт (если есть)"),n("checklist.meds","Лекарства (если нужны)")];return Tt.createPortal(e.jsx("div",{className:yt.modalOverlay,onClick:s,children:e.jsxs("div",{className:yt.modalContent,onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:yt.header,children:[e.jsx("h3",{children:n("checklist.title","Что взять с собой?")}),e.jsx("button",{className:yt.closeBtn,onClick:s,children:e.jsx(Zu,{})})]}),e.jsx("p",{className:yt.subtitle,children:n("checklist.subtitle","Список вещей, которые рекомендуется передать ситтеру вместе с питомцем:")}),e.jsx("ul",{className:yt.list,children:i.map((a,r)=>e.jsxs("li",{className:yt.listItem,children:[e.jsx("div",{className:yt.checkCircle,children:e.jsx(Yu,{})}),e.jsx("span",{children:a})]},r))}),e.jsx("button",{className:yt.confirmBtn,onClick:s,children:n("common.understood","Понятно")})]})}),tn)},Xu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"5",r:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"}),e.jsx("circle",{cx:"12",cy:"19",r:"2"})]}),Ju=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 11l3 3L22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),em=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),tm=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),e.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),sn="chat_messages_v3_",Rt=t=>t.sort((s,n)=>new Date(s.createdAt).getTime()-new Date(n.createdAt).getTime()),sm=({groupId:t,onBack:s,className:n})=>{var _e;const{t:i}=ae(),a=ot(),{user:r}=Be(I=>I.auth),{typingStates:l,lastReceivedMessage:d}=Be(I=>I.dialogues),[o,h]=c.useState([]),[x,w]=c.useState(1),[N,v]=c.useState(!0),[m,j]=c.useState(""),[P,g]=c.useState(""),[u,y]=c.useState(""),[_,S]=c.useState(""),[B,b]=c.useState([]),[p,L]=c.useState(!0),[O,F]=c.useState(!1),[A,T]=c.useState(!0),[E,C]=c.useState(!1),[f,k]=c.useState(!1),[D,W]=c.useState(!1),[H,Q]=c.useState(0),[$,R]=c.useState([]),X=c.useRef(null),te=c.useRef(null),oe=c.useRef(null),Me=c.useRef(null),ge=c.useRef(0),ve=c.useRef(null),Fe=(_e=l[t])==null?void 0:_e.some(I=>String(I)!==String(r==null?void 0:r.id)),ye=c.useCallback(I=>{var dt,Pe,Ye,We;const V=I.owner||I.user,be=String(I.owner_id||(V==null?void 0:V.id)||""),De=((dt=V==null?void 0:V.avatar)==null?void 0:dt.preview_url)||((Pe=V==null?void 0:V.avatar)==null?void 0:Pe.url)||((Ye=I.sender_avatar)==null?void 0:Ye.url)||((We=I.sender_avatar)==null?void 0:We.preview_url)||(V==null?void 0:V.avatar);let Je=I.gallery||I.media||I.files||I.attachments||[];return Array.isArray(Je)&&(Je=Je.map(Ve=>{var Ze;return{id:Ve.id||Math.random(),url:Ve.url||Ve.src||Ve.preview_url,preview_url:Ve.preview_url||Ve.preview,type:Ve.media_type||Ve.type||((Ze=Ve.mime)!=null&&Ze.startsWith("video")?"video":"photo")}}).filter(Ve=>Ve.url)),{...I,id:String(I.id||I.tempId),tempId:I.tempId,text:I.text||I.message||"",createdAt:I.createdAt||I.created_at,user:{_id:be,name:(V==null?void 0:V.name)||I.sender_name||"User",avatar:{preview_url:De}},owner_id:be,gallery:Je,is_system:!!I.is_system,pending:!!I.pending,failed:!!I.failed,read:!!I.read}},[]);c.useEffect(()=>{if(!t||!(r!=null&&r.id))return;T(!0);const I=localStorage.getItem(`${sn}${r.id}_${t}`);if(I)try{let V=JSON.parse(I).map(ye);V=Rt(V),h(V),L(!1)}catch{console.error("Cache error")}else h([]),L(!0);w(1),v(!0),K(1,!0),Gs(t)},[t,r==null?void 0:r.id]);const Ce=c.useCallback((I="smooth")=>{X.current?X.current.scrollIntoView({behavior:I}):te.current&&(te.current.scrollTop=te.current.scrollHeight)},[]);c.useEffect(()=>{if(!te.current)return;const I=te.current;return ve.current=new ResizeObserver(()=>{A?Ce("auto"):I.scrollHeight-I.scrollTop-I.clientHeight<150&&Ce("smooth")}),ve.current.observe(I),()=>{ve.current&&ve.current.disconnect()}},[A,Ce]),c.useEffect(()=>{!p&&o.length>0&&A&&setTimeout(()=>{Ce("auto"),T(!1)},100)},[p,o,A,Ce]);const M=()=>{(A||te.current&&te.current.scrollHeight-te.current.scrollTop-te.current.clientHeight<200)&&Ce("auto")};c.useEffect(()=>{t&&(r!=null&&r.id)&&o.length>0&&localStorage.setItem(`${sn}${r.id}_${t}`,JSON.stringify(o.slice(-50)))},[o,t,r==null?void 0:r.id]);const K=async(I,V=!1)=>{var be,De,Je,dt,Pe,Ye,We,Ve,Ze,Gt,Ws,zs;try{I>1&&F(!0);const Ue=await ci(t,I,50);if(V&&((be=Ue==null?void 0:Ue.data)!=null&&be.group||Ue!=null&&Ue.data)){const ct=Ue.data.group||(Ue.data.id?Ue.data:null);if(ct){const Mt=ct.name||((De=ct.participant)==null?void 0:De.name)||((Je=ct.worker)==null?void 0:Je.name)||((dt=ct.client)==null?void 0:dt.name);j(Mt||i("chat.defaultPartnerName","Собеседник"));const Et=((Ye=(Pe=ct.participant)==null?void 0:Pe.avatar)==null?void 0:Ye.preview_url)||((Ve=(We=ct.participant)==null?void 0:We.avatar)==null?void 0:Ve.url);y(Et),(Ze=ct.opponent)!=null&&Ze.last_activity_text&&g(ct.opponent.last_activity_text)}}const _s=(((Ws=(Gt=Ue==null?void 0:Ue.data)==null?void 0:Gt.messages)==null?void 0:Ws.data)||((zs=Ue==null?void 0:Ue.messages)==null?void 0:zs.data)||(Array.isArray(Ue==null?void 0:Ue.data)?Ue.data:[])).map(ye);h(ct=>{if(V){const Mt=[..._s].reverse(),Et=new Set(Mt.map(jt=>String(jt.id))),xs=ct.filter(jt=>jt.pending&&!Et.has(String(jt.id))&&!Et.has(String(jt.tempId)));return Rt([...Mt,...xs])}else{const Mt=[..._s].reverse(),Et=new Set(ct.map(jt=>String(jt.id))),xs=Mt.filter(jt=>!Et.has(String(jt.id)));return te.current&&(ge.current=te.current.scrollHeight),Rt([...xs,...ct])}}),v(_s.length>=50)}catch(Ue){console.error("Load messages error",Ue)}finally{L(!1),F(!1)}};c.useEffect(()=>{d&&String(d.chat_group_id)===String(t)&&(h(I=>{const V=String(d.id),be=String(d.owner_id),De=String(r==null?void 0:r.id),Je=I.findIndex(Pe=>String(Pe.id)===V);if(Je!==-1){const Pe=[...I];return Pe[Je]={...Pe[Je],...ye(d)},Pe}if(be===De){const Pe=new Date(d.createdAt).getTime(),Ye=I.findIndex(We=>{if(!We.pending)return!1;const Ve=new Date(We.createdAt).getTime();return We.text===d.text&&Math.abs(Ve-Pe)<15e3});if(Ye!==-1){const We=[...I];return We[Ye]={...ye(d),tempId:I[Ye].tempId},Rt(We)}}const dt=[...I,ye(d)];return setTimeout(()=>Ce("smooth"),100),Rt(dt)}),String(d.owner_id)!==String(r==null?void 0:r.id)&&Gs(t))},[d==null?void 0:d._receiveTimestamp,t,r==null?void 0:r.id,Ce]),c.useEffect(()=>{if(O===!1&&ge.current>0&&te.current){const I=te.current.scrollHeight;te.current.scrollTop=I-ge.current,ge.current=0}},[o,O]);const fe=I=>{const{scrollTop:V}=I.currentTarget;if(V<50&&N&&!O&&!p){const be=x+1;w(be),K(be)}},q=I=>{if(I.target.files&&I.target.files.length>0){const V=Array.from(I.target.files);b(be=>[...be,...V])}oe.current&&(oe.current.value="")},se=I=>{b(V=>V.filter((be,De)=>De!==I))},me=async()=>{var Je,dt;if(!_.trim()&&B.length===0||!t)return;const I=`temp-${Date.now()}`,V=_,be=[...B];S(""),b([]);const De={id:I,tempId:I,text:V,createdAt:new Date().toISOString(),owner_id:String(r==null?void 0:r.id),user:{_id:String(r==null?void 0:r.id),name:r==null?void 0:r.name,avatar:{preview_url:(dt=(Je=r==null?void 0:r.avatar)==null?void 0:Je.data)==null?void 0:dt.preview_url}},gallery:be.map(Pe=>({url:URL.createObjectURL(Pe),type:Pe.type.startsWith("video")?"video":"photo"})),pending:!0,read:!1,failed:!1,chat_group_id:t,is_system:!1};h(Pe=>Rt([...Pe,ye(De)])),setTimeout(()=>Ce("smooth"),50),a(Ts({...De,chat_group_id:t,owner_id:r==null?void 0:r.id,currentUserIdInApp:String(r==null?void 0:r.id)}));try{const Pe=await li(t,V,be);if(Pe.data){const Ye=String(Pe.data.id);h(We=>We.some(Ze=>String(Ze.id)===Ye)?We.filter(Ze=>Ze.tempId!==I):We.map(Ze=>Ze.tempId===I?{...Ze,...ye(Pe.data),id:Ye,tempId:void 0,pending:!1}:Ze)),a(Ts({...Pe.data,chat_group_id:t,currentUserIdInApp:String(r==null?void 0:r.id),_receiveTimestamp:Date.now()}))}}catch(Pe){console.error("Send error",Pe),h(Ye=>Ye.map(We=>We.tempId===I?{...We,failed:!0,pending:!1}:We))}},Ie=I=>{S(I.target.value),t&&a({type:Hn,payload:{groupId:t}})},Oe=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),me())},Ae=(I,V)=>{const be=I.map(De=>({type:De.type==="video"?"video":"image",src:De.url,poster:De.preview_url,sources:De.type==="video"?[{src:De.url,type:"video/mp4"}]:void 0}));R(be),Q(V),W(!0)},re=(I,V)=>{var Pe,Ye,We,Ve;if(I.is_system)return e.jsx("div",{className:G.systemMessageRow,children:e.jsx("div",{className:G.systemBubble,children:e.jsx("span",{className:G.systemText,children:I.text})})},I.id||V);const be=String(I.owner_id)===String(r==null?void 0:r.id),De=o[V-1],Je=!be&&(!De||String(De.owner_id)!==String(I.owner_id)||De.is_system),dt=((Ye=(Pe=I.user)==null?void 0:Pe.avatar)==null?void 0:Ye.preview_url)||((Ve=(We=I.user)==null?void 0:We.avatar)==null?void 0:Ve.url)||"/placeholder-user.jpg";return e.jsxs("div",{className:`${G.messageRow} ${be?G.me:G.them}`,children:[e.jsx("div",{className:G.avatarCol,children:Je&&!be&&e.jsx("img",{src:dt,className:G.avatar,alt:"avatar"})}),e.jsxs("div",{className:G.messageBubble,children:[I.gallery&&I.gallery.length>0&&e.jsx("div",{className:G.mediaGrid,children:I.gallery.map((Ze,Gt)=>e.jsx("div",{className:G.mediaItemWrapper,onClick:()=>Ae(I.gallery,Gt),children:Ze.type==="video"?e.jsxs("div",{className:G.videoPreviewBox,children:[e.jsx("video",{src:Ze.url,className:G.mediaImg}),e.jsx("div",{className:G.playOverlay,children:"▶"})]}):e.jsx("img",{src:Ze.url,className:G.mediaImg,alt:"attachment",onLoad:M})},Gt))}),I.text&&e.jsx("div",{className:G.msgText,children:I.text}),e.jsxs("div",{className:G.msgMeta,children:[e.jsx("span",{className:G.time,children:Le(I.created_at||I.createdAt).format("HH:mm")}),be&&e.jsx("span",{className:G.status,children:I.failed?"❌":I.pending?"🕒":I.read?"✓✓":"✓"})]})]})]},I.id||I.tempId||V)};return e.jsxs("div",{className:`${G.chatWindow} ${n||""}`,children:[e.jsxs("div",{className:G.chatHeader,children:[e.jsxs("div",{className:G.headerLeft,children:[s&&e.jsx("button",{className:G.backButton,onClick:s,children:"←"}),u&&e.jsx("img",{src:u,alt:"",className:G.headerAvatar}),e.jsxs("div",{className:G.chatHeaderInfo,children:[e.jsx("h3",{children:m}),Fe?e.jsx("span",{className:G.typingStatus,children:i("chat.typing","печатает...")}):P&&e.jsx("span",{className:G.onlineStatus,children:P})]})]}),e.jsxs("div",{className:G.headerRight,ref:Me,children:[e.jsx("button",{className:G.menuBtn,onClick:()=>C(!E),children:e.jsx(Xu,{})}),E&&e.jsx("div",{className:G.dropdownMenu,children:e.jsxs("button",{onClick:()=>{C(!1),k(!0)},children:[e.jsx(Ju,{}),e.jsx("span",{children:"Что взять с собой?"})]})})]})]}),e.jsxs("div",{className:G.messagesArea,ref:te,onScroll:fe,style:{opacity:A?0:1},children:[O&&e.jsx("div",{className:G.loadingMore,children:"Загрузка истории..."}),p?e.jsx("div",{className:G.centerLoading,children:"Загрузка..."}):o.length===0?e.jsx("div",{className:G.emptyPlaceholder,children:i("chat.noMessages","Напишите первое сообщение!")}):o.map((I,V)=>re(I,V)),e.jsx("div",{ref:X})]}),e.jsxs("div",{className:G.inputArea,children:[B.length>0&&e.jsx("div",{className:G.attachmentsPreview,children:B.map((I,V)=>e.jsxs("div",{className:G.attachItem,children:[I.type.startsWith("video")?e.jsx("video",{src:URL.createObjectURL(I),className:G.previewMedia}):e.jsx("img",{src:URL.createObjectURL(I),alt:"preview",className:G.previewMedia}),e.jsx("div",{className:G.removeAttach,onClick:()=>se(V),children:"✕"})]},V))}),e.jsxs("div",{className:G.inputWrapper,children:[e.jsx("button",{className:G.fileBtn,onClick:()=>{var I;return(I=oe.current)==null?void 0:I.click()},title:"Прикрепить файл",children:e.jsx(em,{})}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,ref:oe,onChange:q,accept:"image/*,video/*"}),e.jsx("textarea",{className:G.messageInput,placeholder:i("chat.inputPlaceholder","Сообщение..."),value:_,onChange:Ie,onKeyDown:Oe,rows:1}),e.jsx("button",{className:G.sendBtn,onClick:me,disabled:!_.trim()&&B.length===0,children:e.jsx(tm,{})})]})]}),e.jsx(Qu,{isOpen:f,onClose:()=>k(!1)}),e.jsx(Ms,{open:D,close:()=>W(!1),index:H,slides:$,plugins:[Es],video:{autoPlay:!0,controls:!0,muted:!1}})]})},nn=()=>{const{t}=ae(),s=ot(),n=nt(),{id:i}=Lt(),{openMobileMenu:a}=Ls()||{},{user:r}=Be(w=>w.auth),{currentChatGroupId:l}=Be(w=>w.dialogues),[d,o]=c.useState(null);c.useEffect(()=>(s(cs()),r!=null&&r.id&&s({type:zn,payload:{userId:r.id}}),()=>{s(Qs())}),[s,r]),c.useEffect(()=>{i?(o(i),s(fp(i))):(o(null),s(Qs()))},[i,s]);const h=w=>{n(`/cabinet/chat/${w}`)},x=()=>{n("/cabinet/chat")};return e.jsxs("div",{className:G.chatContainer,children:[e.jsx(Ou,{onSelect:h,activeGroupId:d,className:d?G.hiddenOnMobile:"",onOpenMenu:a}),d?e.jsx(sm,{groupId:d,onBack:x}):e.jsx("div",{className:`${G.chatWindow} ${G.hiddenOnMobile} ${G.emptyState}`,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:50,marginBottom:20},children:"💬"}),e.jsx("p",{style:{fontSize:18,color:"#666"},children:t("chat.selectChatToStart","Выберите чат для начала общения")})]})})]})},nm="_profileContainer_x95lx_2",am="_headerSection_x95lx_12",im="_avatarWrapper_x95lx_33",rm="_avatarOverlay_x95lx_40",om="_avatarImage_x95lx_44",cm="_avatarPlaceholder_x95lx_53",lm="_hiddenInput_x95lx_84",dm="_userInfo_x95lx_88",hm="_userName_x95lx_93",pm="_userEmail_x95lx_104",um="_headerActions_x95lx_110",mm="_logoutButtonMain_x95lx_119",_m="_profileForm_x95lx_140",xm="_sectionCard_x95lx_146",gm="_formGrid_x95lx_168",vm="_inputGroup_x95lx_179",fm="_fullWidth_x95lx_185",jm="_label_x95lx_189",ym="_input_x95lx_179",wm="_select_x95lx_196",bm="_inputError_x95lx_220",Nm="_errorText_x95lx_228",Sm="_footer_x95lx_235",km="_submitButton_x95lx_239",ie={profileContainer:nm,headerSection:am,avatarWrapper:im,avatarOverlay:rm,avatarImage:om,avatarPlaceholder:cm,hiddenInput:lm,userInfo:dm,userName:hm,userEmail:pm,headerActions:um,logoutButtonMain:mm,profileForm:_m,sectionCard:xm,formGrid:gm,inputGroup:vm,fullWidth:fm,label:jm,input:ym,select:wm,inputError:bm,errorText:Nm,footer:Sm,submitButton:km},Cm=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),Im=()=>{const{t}=ae(),s=ot(),{user:n,isLoading:i,token:a}=Be(p=>p.auth),[r,l]=c.useState(!1),[d,o]=c.useState(null),[h,x]=c.useState(null),[w,N]=c.useState([]),[v,m]=c.useState(!1),{register:j,handleSubmit:P,setValue:g,reset:u,watch:y,formState:{errors:_}}=Ot({defaultValues:{first_name:"",last_name:"",gender:"0",birth:"",phone:"",address_q:"",address_details:"",additional_contact_name:"",additional_contact_phone:""}}),S=y("address_q");c.useEffect(()=>{a&&s(Bt())},[s,a]),c.useEffect(()=>{var p,L,O,F;if(n){const A=String(n.gender)==="1"?"1":"0",T=n.birth?n.birth:"";u({first_name:n.first_name||((p=n.name)==null?void 0:p.split(" ")[0])||"",last_name:n.last_name||((L=n.name)==null?void 0:L.split(" ")[1])||"",gender:A,birth:T,phone:n.phone||"",address_q:n.address||n.address_q||"",address_details:n.address_details||"",additional_contact_name:n.additional_contact_name||"",additional_contact_phone:n.additional_contact_phone||""}),(F=(O=n.avatar)==null?void 0:O.data)!=null&&F.preview_url&&x(n.avatar.data.preview_url)}},[n,u]),c.useEffect(()=>{const p=setTimeout(async()=>{if(S&&S.length>2&&v)try{const L=await $s(S);N(L)}catch(L){console.error("Error fetching suggestions",L)}},500);return()=>clearTimeout(p)},[S,v]);const B=p=>{if(p.target.files&&p.target.files[0]){const L=p.target.files[0];o(L),x(URL.createObjectURL(L))}},b=async p=>{var L,O;l(!0);try{const F={...p,gender:parseInt(p.gender,10),avatar:d||void 0};await Ea(F),await s(Bt()),alert(t("editProfileScreen.flash.updateSuccess","Профиль успешно обновлен!"))}catch(F){console.error(F);const A=((O=(L=F.response)==null?void 0:L.data)==null?void 0:O.message)||t("editProfileScreen.flash.updateFailed","Ошибка обновления");alert(A)}finally{l(!1)}};return i&&!n?e.jsx("div",{style:{padding:40,textAlign:"center"},children:t("loading")}):e.jsxs("div",{className:ie.profileContainer,children:[e.jsxs("div",{className:ie.headerSection,children:[e.jsxs("div",{className:ie.avatarWrapper,children:[h?e.jsx("img",{src:h,alt:"Avatar",className:ie.avatarImage}):e.jsx("div",{className:ie.avatarPlaceholder,children:((n==null?void 0:n.name)||(n==null?void 0:n.email)||"U")[0].toUpperCase()}),e.jsx("label",{htmlFor:"avatar-upload",className:ie.avatarOverlay,children:e.jsx(Cm,{})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:ie.hiddenInput,onChange:B})]}),e.jsxs("div",{className:ie.userInfo,children:[e.jsx("h1",{className:ie.userName,children:(n==null?void 0:n.name)||(n==null?void 0:n.email)}),e.jsx("p",{className:ie.userEmail,children:n==null?void 0:n.email}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666"},children:n!=null&&n.isSitter?t("userRoles.sitter","Ситтер"):t("cabinet.modeClient","Клиент")})]}),e.jsx("div",{className:ie.headerActions,children:e.jsx("button",{className:ie.logoutButtonMain,onClick:()=>s(Jt()),children:t("profile.logout","Выйти")})})]}),e.jsxs("form",{onSubmit:P(b),className:ie.profileForm,children:[e.jsxs("div",{className:ie.sectionCard,children:[e.jsx("h2",{children:t("editProfileScreen.sections.basicInfo.title","Личные данные")}),e.jsxs("div",{className:ie.formGrid,children:[e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.firstName","Имя")}),e.jsx("input",{...j("first_name",{required:t("editProfileScreen.validation.firstNameRequired","Введите имя")}),className:`${ie.input} ${_.first_name?ie.inputError:""}`,placeholder:t("editProfileScreen.placeholders.firstName","Иван")}),_.first_name&&e.jsx("span",{className:ie.errorText,children:_.first_name.message})]}),e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.lastName","Фамилия")}),e.jsx("input",{...j("last_name"),className:ie.input,placeholder:t("editProfileScreen.placeholders.lastName","Иванов")})]}),e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.gender","Пол")}),e.jsxs("select",{...j("gender"),className:ie.select,children:[e.jsx("option",{value:"0",children:t("common.male_people","Мужской")}),e.jsx("option",{value:"1",children:t("common.female_people","Женский")})]})]}),e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.birthDate","Дата рождения")}),e.jsx("input",{type:"date",...j("birth"),className:ie.input})]})]})]}),e.jsxs("div",{className:ie.sectionCard,children:[e.jsx("h2",{children:t("editProfileScreen.sections.contactInfo.title","Контакты и адрес")}),e.jsxs("div",{className:ie.formGrid,children:[e.jsxs("div",{className:`${ie.inputGroup} ${ie.fullWidth}`,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.phone","Телефон")}),e.jsx("input",{...j("phone",{required:!0,minLength:7}),className:ie.input,placeholder:"+7..."})]}),e.jsx("div",{style:{marginBottom:10,gridColumn:"1 / -1"},children:e.jsxs("div",{style:{backgroundColor:"#E3F2FD",padding:"15px",borderRadius:"12px",display:"flex",gap:"10px",alignItems:"flex-start"},children:[e.jsx("div",{style:{color:"#1565C0",marginTop:"2px"},children:"ℹ️"}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"0.95rem",color:"#1565C0"},children:t("editProfileScreen.info.addressPrivacy.title","Конфиденциальность адреса")}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#1E40AF",lineHeight:"1.4"},children:t("editProfileScreen.info.addressPrivacy.text","Точный адрес (квартира, этаж) будет доступен исполнителю только после подтверждения заказа.")})]})]})}),e.jsxs("div",{className:`${ie.inputGroup} ${ie.fullWidth}`,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.address","Адрес")}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{...j("address_q",{required:t("editProfileScreen.validation.addressRequired","Введите адрес")}),className:`${ie.input} ${_.address_q?ie.inputError:""}`,placeholder:t("editProfileScreen.placeholders.address","Начните вводить адрес..."),autoComplete:"off",onFocus:()=>m(!0)}),_.address_q&&e.jsx("span",{className:ie.errorText,children:_.address_q.message}),v&&w.length>0&&e.jsx("ul",{style:{position:"absolute",top:"100%",left:0,width:"100%",background:"#fff",border:"1px solid #ddd",borderRadius:8,listStyle:"none",padding:0,margin:0,zIndex:10,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:w.map((p,L)=>e.jsx("li",{style:{padding:"10px 15px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseDown:()=>{g("address_q",p),N([]),m(!1)},children:p},L))})]})]}),e.jsxs("div",{className:`${ie.inputGroup} ${ie.fullWidth}`,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.addressDetails","Детали адреса")}),e.jsx("input",{...j("address_details"),className:ie.input,placeholder:t("editProfileScreen.placeholders.addressDetails","Подъезд, этаж, домофон...")})]})]})]}),e.jsxs("div",{className:ie.sectionCard,children:[e.jsx("h2",{children:t("editProfileScreen.sections.emergencyContact.title","Доверенное лицо")}),e.jsx("div",{style:{marginBottom:20},children:e.jsxs("div",{style:{backgroundColor:"#E8F5E9",padding:"15px",borderRadius:"12px",display:"flex",gap:"10px",alignItems:"flex-start"},children:[e.jsx("div",{style:{color:"#2E7D32",marginTop:"2px"},children:"🛡️"}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"0.95rem",color:"#2E7D32"},children:t("editProfileScreen.info.emergency.title","Зачем это нужно?")}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#1B5E20",lineHeight:"1.4"},children:t("editProfileScreen.info.emergency.text","Эти данные нужны нам исключительно для экстренных ситуаций.")})]})]})}),e.jsxs("div",{className:ie.formGrid,children:[e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.emergencyName","Имя")}),e.jsx("input",{...j("additional_contact_name"),className:ie.input,placeholder:t("editProfileScreen.placeholders.emergencyName","Имя родственника или друга")})]}),e.jsxs("div",{className:ie.inputGroup,children:[e.jsx("label",{className:ie.label,children:t("editProfileScreen.labels.emergencyPhone","Телефон")}),e.jsx("input",{...j("additional_contact_phone"),className:ie.input,placeholder:"+7..."})]})]})]}),e.jsx("div",{className:ie.footer,children:e.jsx("button",{type:"submit",disabled:r,className:ie.submitButton,children:r?t("loading"):t("common.save","Сохранить изменения")})})]})]})},Am="_headerRow_1duog_1",Bm="_addButton_1duog_15",Pm="_petsGrid_1duog_31",Tm="_petCard_1duog_37",Lm="_petAvatar_1duog_56",Mm="_petAvatarPlaceholder_1duog_65",Em="_petInfo_1duog_77",Rm="_petMeta_1duog_95",$m="_emptyState_1duog_101",wt={headerRow:Am,addButton:Bm,petsGrid:Pm,petCard:Tm,petAvatar:Lm,petAvatarPlaceholder:Mm,petInfo:Em,petMeta:Rm,emptyState:$m},Fm=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Om=()=>{const{t}=ae(),[s,n]=c.useState([]),[i,a]=c.useState(!0);c.useEffect(()=>{r()},[]);const r=async()=>{try{const l=await In();n(l)}catch(l){console.error(l)}finally{a(!1)}};return i?e.jsx("div",{children:t("loading")}):e.jsxs("div",{children:[e.jsxs("div",{className:wt.headerRow,children:[e.jsx("h1",{children:t("cabinet.pets","Мои питомцы")}),e.jsxs(Ge,{to:"/cabinet/pets/add",className:wt.addButton,children:[e.jsx(Fm,{}),t("petForm.addPetButton","Добавить питомца")]})]}),s.length===0?e.jsxs("div",{className:wt.emptyState,children:[e.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:"🐾"}),e.jsx("h3",{children:t("petsScreen.noPetsAdded","У вас пока нет питомцев")}),e.jsx("p",{children:t("petsScreen.clickToAdd","Нажмите кнопку, чтобы добавить первого!")})]}):e.jsx("div",{className:wt.petsGrid,children:s.map(l=>{var d,o,h,x,w,N,v,m,j,P,g,u;return e.jsxs(Ge,{to:`/cabinet/pets/${l.id}`,className:wt.petCard,children:[(o=(d=l.avatar)==null?void 0:d.data)!=null&&o.preview_url||(x=(h=l.avatar)==null?void 0:h.data)!=null&&x.url?e.jsx("img",{src:((N=(w=l.avatar)==null?void 0:w.data)==null?void 0:N.preview_url)||((m=(v=l.avatar)==null?void 0:v.data)==null?void 0:m.url),alt:l.name,className:wt.petAvatar}):e.jsx("div",{className:wt.petAvatarPlaceholder,children:l.name&&l.name[0]||"P"}),e.jsxs("div",{className:wt.petInfo,children:[e.jsx("h3",{children:l.name}),e.jsxs("p",{children:[((P=(j=l.type)==null?void 0:j.data)==null?void 0:P.name)||(l.type_id===1?t("petTypes.dog"):t("petTypes.cat")),(u=(g=l.breed)==null?void 0:g.data)!=null&&u.name?`, ${l.breed.data.name}`:""]}),e.jsx("p",{className:wt.petMeta,children:Vn(l.year,l.month,t)})]})]},l.id)})})]})},Vn=(t,s,n)=>{if(!t&&!s)return"";const i=[];return t&&i.push(`${t} ${n("common.years_short","л.")}`),s&&i.push(`${s} ${n("common.months_short","мес.")}`),i.join(" ")},Dm="_container_1guig_1",Wm="_header_1guig_7",zm="_createBtn_1guig_20",Gm="_loader_1guig_37",Um="_emptyState_1guig_43",Hm="_ordersList_1guig_62",qm="_loadMoreBtn_1guig_68",Vm="_orderCard_1guig_81",Km="_cardHeader_1guig_95",Ym="_serviceInfo_1guig_103",Zm="_serviceType_1guig_109",Qm="_statusBadge_1guig_115",Xm="_statusWarning_1guig_123",Jm="_statusSuccess_1guig_128",e1="_statusError_1guig_133",t1="_statusInfo_1guig_138",s1="_statusDefault_1guig_143",n1="_cardBody_1guig_243",a1="_infoRow_1guig_250",i1="_timerAlert_1guig_261",r1="_cardFooter_1guig_273",o1="_payBtn_1guig_281",c1="_detailsBtn_1guig_282",l1="_offersBtn_1guig_283",ke={container:Dm,header:Wm,createBtn:zm,loader:Gm,emptyState:Um,ordersList:Hm,loadMoreBtn:qm,orderCard:Vm,cardHeader:Km,serviceInfo:Ym,serviceType:Zm,statusBadge:Qm,statusWarning:Xm,statusSuccess:Jm,statusError:e1,statusInfo:t1,statusDefault:s1,cardBody:n1,infoRow:a1,timerAlert:i1,cardFooter:r1,payBtn:o1,detailsBtn:c1,offersBtn:l1},d1=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),h1=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),p1=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),u1=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),m1=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Qe={PENDING_WORKER:"pending_worker",PENDING_PLATFORM_PAYMENT:"pending_platform_payment",PENDING_PLATFORM_FEE:"pending_platform_fee",CONFIRMED:"confirmed",IN_PROGRESS:"in_progress",COMPLETED:"completed",CANCELED_CLIENT:"canceled_client",CANCELED_WORKER:"canceled_worker",CANCELED_ADMIN:"canceled_admin",RECURRING_PAYMENT_FAILED:"recurring_payment_failed"},an={PENDING_PAYMENT:"pending_payment",PAYMENT_FAILED:"payment_failed"},_1=({order:t,onPay:s,onDetails:n,disabled:i})=>{var u,y;const{t:a,i18n:r}=ae(),l=nt(),[d,o]=c.useState(null);c.useEffect(()=>{Le.locale(r.language)},[r.language]),c.useEffect(()=>{const _=()=>{if(!t.payment_due_at_utc||![Qe.PENDING_PLATFORM_PAYMENT,Qe.PENDING_PLATFORM_FEE].includes(t.status)){o(null);return}const B=Le.utc(t.payment_due_at_utc).local(),b=Le(),p=B.diff(b);if(p<=0)o(null);else{const L=Le.duration(p),O=Math.floor(L.asHours()),F=L.minutes();o(`${O}ч ${F}мин`)}};_();const S=setInterval(_,6e4);return()=>clearInterval(S)},[t]);const x=(_=>{switch(_){case Qe.PENDING_WORKER:return{label:a("orderStatus.new","Поиск исполнителя"),className:ke.statusWarning};case Qe.PENDING_PLATFORM_PAYMENT:case Qe.PENDING_PLATFORM_FEE:return{label:a("orderStatus.awaitingPrepayment","Ожидает оплаты"),className:ke.statusWarning};case Qe.CONFIRMED:return{label:a("orderStatus.confirmed","Подтвержден"),className:ke.statusSuccess};case Qe.IN_PROGRESS:return{label:a("orderStatus.inProgress","В процессе"),className:ke.statusInfo};case Qe.COMPLETED:return{label:a("orderStatus.completed","Завершен"),className:ke.statusSuccess};case Qe.CANCELED_CLIENT:case Qe.CANCELED_WORKER:case Qe.CANCELED_ADMIN:return{label:a("orderStatus.canceled","Отменен"),className:ke.statusError};case Qe.RECURRING_PAYMENT_FAILED:return{label:a("orderStatus.paymentFailed","Ошибка оплаты"),className:ke.statusError};default:return{label:_,className:ke.statusDefault}}})(t.status),w=(u=t.worker)==null?void 0:u.data,N=a(`header.services.${t.service_type}`,t.service_type),j=!!(((y=t.billing_periods)==null?void 0:y.data)||[]).find(_=>_.status===an.PENDING_PAYMENT||_.status===an.PAYMENT_FAILED)||[Qe.PENDING_PLATFORM_PAYMENT,Qe.PENDING_PLATFORM_FEE,Qe.RECURRING_PAYMENT_FAILED].includes(t.status);new Intl.NumberFormat("ru-RU",{style:"currency",currency:t.currency||"RUB",maximumFractionDigits:0}).format(t.agreed_price||0);const P=t.requests_pending_count||0,g=_=>{_.stopPropagation(),i||l(`/cabinet/orders/${t.id}/responses`)};return e.jsxs("div",{className:ke.orderCard,onClick:i?void 0:n,children:[e.jsx("div",{className:ke.cardHeader,children:e.jsxs("div",{className:ke.serviceInfo,children:[e.jsx("span",{className:ke.serviceType,children:N}),e.jsx("span",{className:`${ke.statusBadge} ${x.className}`,children:x.label})]})}),e.jsxs("div",{className:ke.cardBody,children:[e.jsxs("div",{className:ke.infoRow,children:[e.jsx(d1,{}),e.jsxs("span",{children:[Le(t.start_date_local).format("D MMM"),t.end_date_local&&t.end_date_local!==t.start_date_local?` - ${Le(t.end_date_local).format("D MMM")}`:""]})]}),w&&e.jsxs("div",{className:ke.infoRow,children:[e.jsx(h1,{}),e.jsxs("span",{children:[w.first_name," ",w.last_name]})]}),d&&e.jsxs("div",{className:ke.timerAlert,children:[e.jsx(u1,{}),e.jsxs("span",{children:[a("orders.paymentTimer","Оплатите в течение"),": ",e.jsx("strong",{children:d})]})]})]}),e.jsx("div",{className:ke.cardFooter,children:e.jsxs("div",{className:ke.actionsWrapper,children:[t.status===Qe.PENDING_WORKER&&e.jsxs("button",{className:ke.offersBtn,onClick:g,disabled:i,style:{backgroundColor:"#3182CE",color:"#fff"},children:[e.jsx(m1,{}),P>0?a("orders.viewAndSelectOfferButtonCount",{count:P,defaultValue:`Отклики (${P})`}):a("orders.responsesAndInvitesTitle","Отклики и приглашения")]}),j?e.jsxs("button",{className:ke.payBtn,onClick:_=>{_.stopPropagation(),i||s()},disabled:i,children:[e.jsx(p1,{})," ",a("orders.payButton","Оплатить")]}):t.status!==Qe.PENDING_WORKER&&e.jsx("button",{className:ke.detailsBtn,onClick:_=>{_.stopPropagation(),i||n()},disabled:i,children:a("orders.viewDetails","Подробнее")})]})})]})},x1="_overlay_1643e_1",g1="_modal_1643e_14",v1="_header_1643e_34",f1="_closeBtn_1643e_46",j1="_content_1643e_56",y1="_optionRow_1643e_60",w1="_active_1643e_74",b1="_rowIcon_1643e_79",N1="_rowInfo_1643e_83",S1="_rowTitle_1643e_89",k1="_rowSub_1643e_94",C1="_checkbox_1643e_99",I1="_radio_1643e_100",A1="_summary_1643e_105",B1="_sumRow_1643e_112",P1="_total_1643e_118",T1="_discount_1643e_125",L1="_payButton_1643e_129",M1="_addCardBtn_1643e_149",Se={overlay:x1,modal:g1,header:v1,closeBtn:f1,content:j1,optionRow:y1,active:w1,rowIcon:b1,rowInfo:N1,rowTitle:S1,rowSub:k1,checkbox:C1,radio:I1,summary:A1,sumRow:B1,total:P1,discount:T1,payButton:L1,addCardBtn:M1},E1=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),R1=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),$1=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"}),e.jsx("path",{d:"M4 6v12a2 2 0 0 0 2 2h14v-4"}),e.jsx("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4h-4z"})]}),Ut={PLATFORM_PREPAY:"platform_prepay",PLATFORM_FEE_ONLY:"platform_fee_only"},rn={PENDING_PAYMENT:"pending_payment",PAYMENT_FAILED:"payment_failed"},on={PENDING_PLATFORM_PAYMENT:"pending_platform_payment",PENDING_PLATFORM_FEE:"pending_platform_fee"},cn=document.getElementById("modal-root"),Kn=({isOpen:t,onClose:s,order:n,userBalance:i,paymentMethods:a,loadingData:r,onPaymentSuccess:l})=>{const{t:d}=ae(),[o,h]=c.useState(null),[x,w]=c.useState(!0),[N,v]=c.useState(!1);c.useEffect(()=>{if(a&&a.length>0){const g=a.find(u=>u.is_default)||a[0];g&&h(g.id)}},[a]);const m=c.useMemo(()=>{var k;if(!n)return null;let{payment_flow_type:g,status:u}=n;g||(u===on.PENDING_PLATFORM_FEE?g=Ut.PLATFORM_FEE_ONLY:(on.PENDING_PLATFORM_PAYMENT,g=Ut.PLATFORM_PREPAY));const{billing_periods:y,currency:_,agreed_price:S,discount_amount:B,amount_due_to_platform:b}=n;let p=0,L="orders.paymentTitle",O="orders.payButtonAmount";const F=(k=y==null?void 0:y.data)==null?void 0:k.find(D=>D.status===rn.PENDING_PAYMENT||D.status===rn.PAYMENT_FAILED);g===Ut.PLATFORM_PREPAY?F?p=parseFloat(F.amount_due_from_client||"0"):p=parseFloat(S||"0")-parseFloat(B||"0"):g===Ut.PLATFORM_FEE_ONLY&&(L="orders.prepaymentTitle",O="orders.payBookingFeeButtonAmount",F?p=parseFloat(F.amount_due_to_platform||F.amount_due_from_client||"0"):p=parseFloat(b||"0")),p=Math.max(0,p);const A=parseFloat((i==null?void 0:i.amount)||"0"),T=_||"RUB",E=T==="RUB"?"₽":(i==null?void 0:i.currency_symbol)||T;let C=0,f=0;return x&&p>0?(C=Math.min(p,A),f=Math.max(0,p-C)):f=p,{dueAmount:p.toFixed(2),fromBalance:C.toFixed(2),fromCard:f.toFixed(2),currencySymbol:E,paymentTitleKey:L,payButtonTextKey:O,cardRequired:f>.001}},[n,i,x]),j=async()=>{var g,u;if(!(N||!m)){if(m.cardRequired&&!o)return alert(d("orders.selectCardPrompt","Выберите карту"));v(!0);try{const y=window.location.origin+window.location.pathname,_=await ii(n.id,o,x,!0,y);_.success?_.confirmation_needed&&_.confirmation_url?window.location.href=_.confirmation_url:l():alert(_.message||"Ошибка оплаты")}catch(y){alert(((u=(g=y.response)==null?void 0:g.data)==null?void 0:u.message)||"Ошибка оплаты")}finally{v(!1)}}},P=async()=>{try{const g=window.location.origin+window.location.pathname,u=await Os({return_url_mobile_base:g});(u.checkout_url||u.webview_url)&&(window.location.href=u.checkout_url||u.webview_url)}catch(g){console.error(g),alert("Ошибка добавления карты")}};return!t||!cn?null:Tt.createPortal(e.jsx("div",{className:Se.overlay,onClick:s,children:e.jsxs("div",{className:Se.modal,onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:Se.header,children:[e.jsx("h3",{children:m?d(m.paymentTitleKey,"Оплата"):d("loading")}),e.jsx("button",{onClick:s,className:Se.closeBtn,children:e.jsx(E1,{})})]}),r?e.jsx("div",{className:Se.loader,children:"Загрузка данных..."}):e.jsxs("div",{className:Se.content,children:[e.jsxs("div",{className:`${Se.optionRow} ${x?Se.active:""}`,onClick:()=>w(!x),children:[e.jsx("div",{className:Se.rowIcon,children:e.jsx($1,{})}),e.jsxs("div",{className:Se.rowInfo,children:[e.jsx("span",{className:Se.rowTitle,children:d("orders.payFromBalance","Списать с баланса")}),e.jsxs("span",{className:Se.rowSub,children:[i==null?void 0:i.amount," ",i==null?void 0:i.currency_symbol]})]}),e.jsx("div",{className:Se.checkbox,children:x?"✓":""})]}),(m==null?void 0:m.cardRequired)&&e.jsxs("div",{className:Se.section,children:[e.jsx("h4",{children:d("orders.selectPaymentMethod","Выберите карту")}),a&&a.map(g=>e.jsxs("div",{className:`${Se.optionRow} ${o===g.id?Se.active:""}`,onClick:()=>h(g.id),children:[e.jsx("div",{className:Se.rowIcon,children:e.jsx(R1,{})}),e.jsxs("div",{className:Se.rowInfo,children:[e.jsxs("span",{className:Se.rowTitle,children:["•••• ",g.last4]}),e.jsx("span",{className:Se.rowSub,children:g.brand})]}),e.jsx("div",{className:Se.radio,children:o===g.id?"●":""})]},g.id)),e.jsxs("button",{className:Se.addCardBtn,onClick:P,children:["+ ",d("paymentMethods.addCard","Добавить карту")]})]}),e.jsxs("div",{className:Se.summary,children:[e.jsxs("div",{className:Se.sumRow,children:[e.jsxs("span",{children:[d("orders.paymentDueFull","К оплате"),":"]}),e.jsxs("span",{className:Se.sumVal,children:[m==null?void 0:m.dueAmount," ",m==null?void 0:m.currencySymbol]})]}),x&&parseFloat((m==null?void 0:m.fromBalance)||"0")>0&&e.jsxs("div",{className:`${Se.sumRow} ${Se.discount}`,children:[e.jsxs("span",{children:[d("orders.fromBalance","Баланс"),":"]}),e.jsxs("span",{children:["- ",m==null?void 0:m.fromBalance," ",m==null?void 0:m.currencySymbol]})]}),e.jsxs("div",{className:`${Se.sumRow} ${Se.total}`,children:[e.jsxs("span",{children:[d("orders.fromCard","С карты"),":"]}),e.jsxs("span",{children:[m==null?void 0:m.fromCard," ",m==null?void 0:m.currencySymbol]})]})]}),e.jsx("button",{className:Se.payButton,onClick:j,disabled:N||(m==null?void 0:m.cardRequired)&&!o,children:N?d("common.processing","Обработка..."):d((m==null?void 0:m.payButtonTextKey)||"orders.payButtonAmount",{amount:m==null?void 0:m.dueAmount})})]})]})}),cn)},F1=()=>e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#A0AEC0",strokeWidth:"1",children:[e.jsx("path",{d:"M9 17h6"}),e.jsx("path",{d:"M9 12h6"}),e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 8 20 8"})]}),O1=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),D1=()=>{const{t}=ae(),s=nt(),{isAuthenticated:n}=Be(F=>F.auth),[i,a]=c.useState([]),[r,l]=c.useState(!0),[d,o]=c.useState(1),[h,x]=c.useState(1),[w,N]=c.useState(!1),[v,m]=c.useState(!1),[j,P]=c.useState(null),[g,u]=c.useState({amount:"0.00",currency:"RUB",currency_symbol:"₽"}),[y,_]=c.useState([]),[S,B]=c.useState(!1),b=c.useRef(!0);c.useEffect(()=>(b.current=!0,()=>{b.current=!1}),[]);const p=c.useCallback(async(F=1,A=!1)=>{var T;if(n){A?N(!0):l(!0);try{const C=await si(F,{include:"pets,worker.avatar,promo_code,requests,canceledBy,client,billing_periods.payment,billing_periods"});if(b.current&&C.data){const f=C.data;a(A?k=>[...k,...f.filter(D=>!k.find(W=>W.id===D.id))]:f),x(((T=C.pagination)==null?void 0:T.total_pages)||1),o(F)}}catch(E){console.error(E)}finally{b.current&&(l(!1),N(!1))}}},[n]);c.useEffect(()=>{p(1)},[p]);const L=async F=>{var A;P(F),m(!0),B(!0);try{const[T,E]=await Promise.all([Tn(),Fs()]);if(b.current){const C=((A=T.data)==null?void 0:A.data)||T.data;u({amount:(C==null?void 0:C.amount)||"0.00",currency:F.currency||"RUB",currency_symbol:(C==null?void 0:C.currency_symbol)||(F.currency==="RUB"?"₽":F.currency)});const f=E.data||[];_(f.filter(k=>k.status==="active"))}}catch(T){console.error(T),alert(t("errors.fetchPaymentDataError","Не удалось загрузить данные для оплаты")),m(!1)}finally{b.current&&B(!1)}},O=()=>{!w&&d<h&&p(d+1,!0)};return r&&d===1?e.jsx("div",{className:ke.loader,children:t("loading")}):e.jsxs("div",{className:ke.container,children:[e.jsxs("div",{className:ke.header,children:[e.jsx("h1",{children:t("cabinet.orders","Мои заказы")}),e.jsxs("button",{className:ke.createBtn,onClick:()=>s("/cabinet/orders/create"),children:[e.jsx(O1,{})," ",t("orders.createOrder","Создать заказ")]})]}),i.length===0?e.jsxs("div",{className:ke.emptyState,children:[e.jsx(F1,{}),e.jsx("h3",{children:t("orders.noOrdersYet","У вас пока нет заказов")}),e.jsx("p",{children:t("orders.emptyMessage","Создайте заказ, чтобы найти ситтера")}),e.jsx("button",{onClick:()=>s("/search"),className:ke.primaryBtn,children:t("orders.createFirstOrder","Найти ситтера")})]}):e.jsxs("div",{className:ke.ordersList,children:[i.map(F=>e.jsx(_1,{order:F,onPay:()=>L(F),onDetails:()=>s(`/cabinet/orders/${F.id}`),onReview:()=>{}},F.id)),d<h&&e.jsx("button",{className:ke.loadMoreBtn,onClick:O,disabled:w,children:w?t("loading"):t("common.loadMore","Загрузить еще")})]}),v&&j&&e.jsx(Kn,{isOpen:v,onClose:()=>m(!1),order:j,userBalance:g,paymentMethods:y,loadingData:S,onPaymentSuccess:()=>{m(!1),p(1)}})]})},W1=()=>{const{user:t}=Be(s=>s.auth);return t!=null&&t.isSitter?e.jsxs("div",{children:[e.jsxs("div",{className:pe.statsGrid,children:[e.jsxs("div",{className:pe.statCard,children:[e.jsx("div",{className:`${pe.icon} ${pe.green}`,children:"💰"}),e.jsxs("div",{className:pe.info,children:[e.jsx("span",{className:pe.label,children:"Заработано"}),e.jsx("span",{className:pe.value,children:"0 ₽"})]})]}),e.jsxs("div",{className:pe.statCard,children:[e.jsx("div",{className:`${pe.icon} ${pe.blue}`,children:"📅"}),e.jsxs("div",{className:pe.info,children:[e.jsx("span",{className:pe.label,children:"Предстоящие"}),e.jsx("span",{className:pe.value,children:"0"})]})]}),e.jsxs("div",{className:pe.statCard,children:[e.jsx("div",{className:`${pe.icon} ${pe.orange}`,children:"⭐"}),e.jsxs("div",{className:pe.info,children:[e.jsx("span",{className:pe.label,children:"Рейтинг"}),e.jsx("span",{className:pe.value,children:"5.0"})]})]})]}),e.jsxs("div",{className:pe.card,children:[e.jsx("h3",{style:{marginBottom:"15px"},children:"Активность"}),e.jsx("p",{style:{color:"#666"},children:"Новых уведомлений нет."})]})]}):e.jsxs("div",{className:pe.card,style:{textAlign:"center"},children:[e.jsx("h2",{children:"Станьте частью команды!"}),e.jsx("p",{children:"Вы еще не зарегистрированы как ситтер."})]})},z1="_formContainer_15r4b_1",G1="_backButton_15r4b_6",U1="_pageTitle_15r4b_18",H1="_card_15r4b_26",q1="_grid2_15r4b_42",V1="_formGroup_15r4b_53",K1="_required_15r4b_64",Y1="_input_15r4b_68",Z1="_select_15r4b_69",Q1="_textarea_15r4b_70",X1="_radioGroup_15r4b_91",J1="_mediaGrid_15r4b_104",e_="_mediaItem_15r4b_111",t_="_isAvatar_15r4b_123",s_="_deleteBtn_15r4b_127",n_="_setAvatarBtn_15r4b_143",a_="_uploadBtn_15r4b_160",i_="_actions_15r4b_182",r_="_btnPrimary_15r4b_189",o_="_btnDelete_15r4b_206",c_="_suggestionsList_15r4b_221",ne={formContainer:z1,backButton:G1,pageTitle:U1,card:H1,grid2:q1,formGroup:V1,required:K1,input:Y1,select:Z1,textarea:Q1,radioGroup:X1,mediaGrid:J1,mediaItem:e_,isAvatar:t_,deleteBtn:s_,setAvatarBtn:n_,uploadBtn:a_,actions:i_,btnPrimary:r_,btnDelete:o_,suggestionsList:c_},l_=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),ln=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),d_=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),dn=({mode:t})=>{const{t:s}=ae(),n=nt(),{id:i}=Lt(),[a,r]=c.useState(t==="edit"),[l,d]=c.useState(!1),[o,h]=c.useState([]),[x,w]=c.useState([]),[N,v]=c.useState(null),[m,j]=c.useState(""),[P,g]=c.useState([]),[u,y]=c.useState(!1),{register:_,handleSubmit:S,watch:B,setValue:b,formState:{errors:p}}=Ot({defaultValues:{type_id:"1",name:"",breed_id:"",breed_name:"",gender:"0",size_id:"3",year:"",month:"",sterilized:"0",vaccinated:"0",staying_home_alone:"0",kids_friendly:"0",dogs_friendly:"0",cats_friendly:"0",info_for_sitting:"",info_for_walking:""}}),L=B("type_id");c.useEffect(()=>{t==="edit"&&i&&us(i).then(f=>{var ve,Fe,ye,Ce,M,K,fe,q,se,me,Ie,Oe,Ae,re;const k=((Fe=(ve=f.type)==null?void 0:ve.data)==null?void 0:Fe.id)||f.type_id||1,D=((Ce=(ye=f.breed)==null?void 0:ye.data)==null?void 0:Ce.id)||f.breed_id||"",W=((K=(M=f.size)==null?void 0:M.data)==null?void 0:K.id)||f.size_id||3,H=f.gender_value!==void 0?String(f.gender_value):String(f.gender??"0"),Q=f.sterilized_value??f.sterilized??0,$=f.vaccinated_value??f.vaccinated??0,R=f.staying_home_alone_value??f.staying_home_alone??0,X=f.kids_friendly_value??f.kids_friendly??0,te=f.dogs_friendly_value??f.dogs_friendly??0,oe=f.cats_friendly_value??f.cats_friendly??0;b("name",f.name),b("type_id",String(k)),b("breed_id",String(D)),b("breed_name",((q=(fe=f.breed)==null?void 0:fe.data)==null?void 0:q.name)||""),j(((me=(se=f.breed)==null?void 0:se.data)==null?void 0:me.name)||""),b("gender",H),b("year",String(f.year||"")),b("month",String(f.month||"")),b("size_id",String(W)),b("sterilized",String(Q)),b("vaccinated",String($)),b("staying_home_alone",String(R)),b("kids_friendly",String(X)),b("dogs_friendly",String(te)),b("cats_friendly",String(oe)),b("info_for_sitting",f.info_for_sitting||""),b("info_for_walking",f.info_for_walking||"");const Me=((Ie=f.files)==null?void 0:Ie.data)||((Oe=f.media)==null?void 0:Oe.data)||[];h(Me);const ge=((re=(Ae=f.avatar)==null?void 0:Ae.data)==null?void 0:re.id)||f.avatar_id;ge&&v(ge),r(!1)}).catch(f=>{console.error(f),alert("Ошибка загрузки данных питомца"),n("/cabinet/pets")})},[t,i,b,n]),c.useEffect(()=>{const f=setTimeout(async()=>{if(m.length>1&&u)try{const k=await $a(m,parseInt(L));g(k)}catch(k){console.error(k)}},300);return()=>clearTimeout(f)},[m,L,u]);const O=f=>{f.target.files&&w(k=>[...k,...Array.from(f.target.files)])},F=f=>{w(k=>k.filter((D,W)=>W!==f))},A=async f=>{if(window.confirm("Удалить фото?"))try{await Wa(f),h(k=>k.filter(D=>D.id!==f)),N===f&&v(null)}catch{alert("Ошибка удаления")}},T=async f=>{t==="edit"&&i?(await za(i,f),v(f)):alert("Сначала сохраните питомца")},E=async f=>{var k,D;d(!0);try{const W={...f,breed_id:f.breed_id||null};t==="create"?await Fa(W,x):await Oa(i,W,x),n("/cabinet/pets")}catch(W){console.error(W);const H=((D=(k=W.response)==null?void 0:k.data)==null?void 0:D.message)||W.message||"Ошибка сохранения";alert(H)}finally{d(!1)}},C=f=>{b("breed_id",String(f.id)),j(f.name),y(!1)};return a?e.jsx("div",{children:"Загрузка..."}):e.jsxs("div",{className:ne.formContainer,children:[e.jsxs("button",{className:ne.backButton,onClick:()=>n("/cabinet/pets"),children:[e.jsx(l_,{})," Назад к списку"]}),e.jsx("h1",{className:ne.pageTitle,children:t==="create"?s("petForm.titleAdd","Добавить питомца"):s("petForm.titleEdit","Редактировать")}),e.jsxs("form",{onSubmit:S(E),children:[e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:s("petForm.sectionDetails","Детали")}),e.jsxs("div",{className:ne.formGroup,children:[e.jsxs("label",{children:[s("petForm.labelPetType","Тип")," ",e.jsx("span",{className:ne.required,children:"*"})]}),e.jsxs("div",{className:ne.radioGroup,children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"1",..._("type_id"),onChange:f=>{b("type_id",f.target.value),b("breed_id",""),j("")}}),s("petTypes.dog","Собака")]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"2",..._("type_id"),onChange:f=>{b("type_id",f.target.value),b("breed_id",""),j("")}}),s("petTypes.cat","Кошка")]})]})]}),e.jsxs("div",{className:ne.grid2,children:[e.jsxs("div",{className:ne.formGroup,children:[e.jsxs("label",{children:[s("petForm.labelName","Кличка")," ",e.jsx("span",{className:ne.required,children:"*"})]}),e.jsx("input",{className:ne.input,..._("name",{required:!0}),placeholder:"Бобик"}),p.name&&e.jsx("span",{className:ne.errorText,children:"Обязательно"})]}),e.jsxs("div",{className:ne.formGroup,style:{position:"relative"},children:[e.jsx("label",{children:s("petForm.labelBreed","Порода")}),e.jsx("input",{className:ne.input,value:m,onChange:f=>{j(f.target.value),y(!0),b("breed_id","")},placeholder:"Начните вводить...",onFocus:()=>y(!0)}),u&&P.length>0&&e.jsx("ul",{className:ne.suggestionsList,children:P.map(f=>e.jsx("li",{onMouseDown:()=>C(f),children:f.name},f.id))})]})]}),e.jsxs("div",{className:ne.grid2,children:[e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:s("petForm.labelGender","Пол")}),e.jsxs("select",{className:ne.select,..._("gender"),children:[e.jsx("option",{value:"0",children:s("common.male","Мальчик")}),e.jsx("option",{value:"1",children:s("common.female","Девочка")})]})]}),e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:s("petForm.labelSize","Размер")}),e.jsxs("select",{className:ne.select,..._("size_id"),children:[e.jsx("option",{value:"1",children:s("petSizes.mini.name","Мини (до 5кг)")}),e.jsx("option",{value:"2",children:s("petSizes.small.name","Маленький (5-10кг)")}),e.jsx("option",{value:"3",children:s("petSizes.medium.name","Средний (10-20кг)")}),e.jsx("option",{value:"4",children:s("petSizes.big.name","Большой (20-40кг)")}),e.jsx("option",{value:"5",children:s("petSizes.huge.name","Гигант (40+кг)")})]})]})]}),e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:s("petForm.labelAge","Возраст")}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[e.jsx("input",{type:"number",className:ne.input,..._("year"),placeholder:"0",style:{width:"80px"}}),e.jsx("span",{children:s("common.years_short","лет")}),e.jsx("input",{type:"number",className:ne.input,..._("month"),placeholder:"0",style:{width:"80px"}}),e.jsx("span",{children:s("common.months_short","мес")})]})]})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:s("petForm.sectionPhotos","Фотографии")}),e.jsxs("div",{className:ne.mediaGrid,children:[o.map(f=>e.jsxs("div",{className:`${ne.mediaItem} ${N===f.id?ne.isAvatar:""}`,children:[e.jsx("img",{src:f.preview_url||f.url,alt:"Pet"}),e.jsx("button",{type:"button",className:ne.deleteBtn,onClick:()=>A(f.id),children:e.jsx(ln,{})}),N!==f.id&&e.jsx("button",{type:"button",className:ne.setAvatarBtn,onClick:()=>T(f.id),children:"Сделать главной"})]},f.id)),x.map((f,k)=>e.jsxs("div",{className:ne.mediaItem,children:[e.jsx("img",{src:URL.createObjectURL(f),alt:"New"}),e.jsx("button",{type:"button",className:ne.deleteBtn,onClick:()=>F(k),children:e.jsx(ln,{})})]},k)),e.jsxs("label",{className:ne.uploadBtn,children:[e.jsx(d_,{}),e.jsx("span",{children:"Добавить"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:O})]})]})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:s("petForm.sectionBehavior","Характер и привычки")}),e.jsxs("div",{className:ne.grid2,children:[e.jsx($t,{label:s("petForm.labelSterilized","Стерилизован?"),name:"sterilized",register:_,t:s}),e.jsx($t,{label:s("petForm.labelVaccinated","Вакцинирован?"),name:"vaccinated",register:_,t:s}),e.jsx($t,{label:s("petForm.labelHomeAlone","Остается один?"),name:"staying_home_alone",register:_,t:s}),e.jsx($t,{label:s("petForm.labelKidsFriendly","Ладит с детьми?"),name:"kids_friendly",register:_,t:s}),e.jsx($t,{label:s("petForm.labelDogsFriendly","Ладит с собаками?"),name:"dogs_friendly",register:_,t:s}),e.jsx($t,{label:s("petForm.labelCatsFriendly","Ладит с кошками?"),name:"cats_friendly",register:_,t:s})]})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:s("petForm.sectionAdditionalInfo","Дополнительно")}),e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:s("petForm.labelInfoSitting","Для передержки")}),e.jsx("textarea",{className:ne.textarea,..._("info_for_sitting"),placeholder:"Особенности питания, выгула..."})]}),L==="1"&&e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:s("petForm.labelInfoWalking","Для выгула")}),e.jsx("textarea",{className:ne.textarea,..._("info_for_walking"),placeholder:"Тянет поводок, боится машин..."})]})]}),e.jsx("div",{className:ne.actions,children:e.jsx("button",{type:"submit",disabled:l,className:ne.btnPrimary,children:l?s("loading"):s("common.save","Сохранить")})})]})]})},$t=({label:t,name:s,register:n,t:i})=>e.jsxs("div",{className:ne.formGroup,children:[e.jsx("label",{children:t}),e.jsxs("select",{className:ne.select,...n(s),children:[e.jsx("option",{value:"0",children:i("common.unknown","Не знаю")}),e.jsx("option",{value:"1",children:i("common.yes","Да")}),e.jsx("option",{value:"2",children:i("common.no","Нет")})]})]}),h_=()=>{var x,w,N,v,m,j,P,g,u,y,_,S,B;const{id:t}=Lt(),s=nt(),{t:n}=ae(),[i,a]=c.useState(null);c.useEffect(()=>{t&&us(t).then(a).catch(console.error)},[t]);const r=async()=>{window.confirm(n("common.confirmDelete","Удалить питомца?"))&&(await Da(t),s("/cabinet/pets"))};if(!i)return e.jsx("div",{children:n("loading")});const l=b=>b===1?n("common.yes","Да"):b===2?n("common.no","Нет"):n("common.unknown","Не знаю"),d=((w=(x=i.type)==null?void 0:x.data)==null?void 0:w.name)||(i.type_id===1?n("petTypes.dog"):n("petTypes.cat")),o=((v=(N=i.breed)==null?void 0:N.data)==null?void 0:v.name)||n("common.unknownBreed","Порода не указана"),h=((j=(m=i.size)==null?void 0:m.data)==null?void 0:j.name)||"-";return e.jsxs("div",{className:ne.formContainer,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs(Ge,{to:"/cabinet/pets",className:ne.backButton,children:["← ",n("common.back","Назад")]}),e.jsxs("div",{className:ne.actions,style:{marginTop:0},children:[e.jsx(Ge,{to:`/cabinet/pets/${t}/edit`,className:ne.btnPrimary,style:{textDecoration:"none"},children:n("common.edit","Редактировать")}),e.jsx("button",{onClick:r,className:ne.btnDelete,children:n("common.delete","Удалить")})]})]}),e.jsxs("div",{className:ne.card,style:{display:"flex",gap:20,alignItems:"center"},children:[e.jsx("img",{src:((g=(P=i.avatar)==null?void 0:P.data)==null?void 0:g.preview_url)||((y=(u=i.avatar)==null?void 0:u.data)==null?void 0:y.url)||"/placeholder-pet.jpg",style:{width:120,height:120,borderRadius:"50%",objectFit:"cover",backgroundColor:"#f0f0f0"},alt:i.name}),e.jsxs("div",{children:[e.jsx("h1",{className:ne.pageTitle,style:{marginBottom:5},children:i.name}),e.jsxs("p",{style:{fontSize:"1.1rem",color:"#666"},children:[d," • ",o]}),e.jsx("p",{style:{fontSize:"1rem",color:"#888"},children:Vn(i.year,i.month,n)})]})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:n("petForm.sectionDetails","Характеристики")}),e.jsxs("div",{className:ne.grid2,children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelGender","Пол"),":"]})," ",i.gender===0||i.gender==="0"||i.gender_value==="male"?n("common.male"):n("common.female")]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelSize","Размер"),":"]})," ",h]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelSterilized","Стерилизован"),":"]})," ",l(i.sterilized_value??i.sterilized)]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelVaccinated","Вакцинирован"),":"]})," ",l(i.vaccinated_value??i.vaccinated)]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelKidsFriendly","Ладит с детьми"),":"]})," ",l(i.kids_friendly_value??i.kids_friendly)]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelDogsFriendly","Ладит с собаками"),":"]})," ",l(i.dogs_friendly_value??i.dogs_friendly)]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelCatsFriendly","Ладит с кошками"),":"]})," ",l(i.cats_friendly_value??i.cats_friendly)]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelHomeAlone","Остается один"),":"]})," ",l(i.staying_home_alone_value??i.staying_home_alone)]})]})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:n("petForm.sectionAdditionalInfo","Заметки")}),i.info_for_sitting&&e.jsxs("div",{style:{marginBottom:15},children:[e.jsxs("strong",{children:[n("petForm.labelInfoSitting","Для передержки"),":"]}),e.jsx("p",{style:{whiteSpace:"pre-line"},children:i.info_for_sitting})]}),i.info_for_walking&&e.jsxs("div",{children:[e.jsxs("strong",{children:[n("petForm.labelInfoWalking","Для выгула"),":"]}),e.jsx("p",{style:{whiteSpace:"pre-line"},children:i.info_for_walking})]}),!i.info_for_sitting&&!i.info_for_walking&&e.jsx("p",{style:{color:"#888"},children:n("common.noInfo","Нет информации")})]}),e.jsxs("div",{className:ne.card,children:[e.jsx("h2",{children:n("petForm.sectionPhotos","Фотографии")}),e.jsxs("div",{className:ne.mediaGrid,children:[(S=(_=i.files)==null?void 0:_.data)==null?void 0:S.map(b=>e.jsx("div",{className:ne.mediaItem,children:e.jsx("img",{src:b.preview_url||b.url,alt:"Pet gallery"})},b.id)),(!((B=i.files)!=null&&B.data)||i.files.data.length===0)&&e.jsx("p",{style:{color:"#888",gridColumn:"1/-1"},children:n("common.noPhotos","Нет фото")})]})]})]})},p_="_wizardContainer_18wop_1",u_="_centerLoader_18wop_8",m_="_stepCard_18wop_16",__="_header_18wop_29",x_="_btnPrimary_18wop_69",Xe={wizardContainer:p_,centerLoader:u_,stepCard:m_,header:__,btnPrimary:x_},g_="_stepCard_1gpnh_1",v_="_header_1gpnh_16",f_="_iconCircle_1gpnh_20",j_="_formGroup_1gpnh_43",y_="_input_1gpnh_54",w_="_select_1gpnh_55",b_="_customCityBlock_1gpnh_79",N_="_waitlistInfo_1gpnh_84",S_="_toggleLink_1gpnh_104",k_="_btnPrimary_1gpnh_120",C_="_loadingState_1gpnh_147",I_="_successContent_1gpnh_156",A_="_successIcon_1gpnh_160",B_="_backLink_1gpnh_176",Ke={stepCard:g_,header:v_,iconCircle:f_,formGroup:j_,input:y_,select:w_,customCityBlock:b_,waitlistInfo:N_,toggleLink:S_,btnPrimary:k_,loadingState:C_,successContent:I_,successIcon:A_,backLink:B_},P_=()=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M2 12h20"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),T_=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),L_=({onNext:t})=>{const{t:s}=ae(),[n,i]=c.useState([]),[a,r]=c.useState([]),[l,d]=c.useState(""),[o,h]=c.useState(""),[x,w]=c.useState(!1),[N,v]=c.useState(""),[m,j]=c.useState(!0),[P,g]=c.useState(!1),[u,y]=c.useState(!1),[_,S]=c.useState(!1);c.useEffect(()=>{j(!0),Ha().then(p=>i(p.data||[])).catch(()=>alert("Ошибка загрузки стран")).finally(()=>j(!1))},[]),c.useEffect(()=>{l?(g(!0),qa(l).then(p=>r(p.data||[])).catch(()=>r([])).finally(()=>g(!1))):r([])},[l]);const B=p=>{d(p.target.value),h(""),w(!1),v("")},b=async()=>{y(!0);let p={sitter:1,walker:1};if(x){if(!N.trim())return y(!1),alert("Введите название города");p.suggested_city_name=N.trim(),p.suggested_city_country_id=l,p.sitter_available_country_id=null,p.sitter_available_city_id=null}else{if(!o)return y(!1),alert("Выберите город");p.sitter_available_country_id=l,p.sitter_available_city_id=o,p.suggested_city_name=null,p.suggested_city_country_id=null}try{const L=await Va(p);L&&(L.status==="waitlisted"||x)?S(!0):t()}catch(L){alert(L.message||"Ошибка создания заявки")}finally{y(!1)}};return _?e.jsx("div",{className:Ke.stepCard,children:e.jsxs("div",{className:Ke.successContent,children:[e.jsx("div",{className:Ke.successIcon,children:"🎉"}),e.jsx("h2",{children:s("common.thankYou","Спасибо!")}),e.jsx("p",{children:s("waitlist.defaultMessage","Мы записали вас в лист ожидания. Как только мы запустимся в этом городе, вы узнаете об этом первыми!")}),e.jsx("a",{href:"/cabinet/profile",className:Ke.backLink,children:s("common.backToHome","Вернуться в профиль")})]})}):m?e.jsx("div",{className:Ke.loadingState,children:"Загрузка стран..."}):e.jsxs("div",{className:Ke.stepCard,children:[e.jsxs("div",{className:Ke.header,children:[e.jsx("div",{className:Ke.iconCircle,children:e.jsx(P_,{})}),e.jsx("h1",{children:s("becomeSitter.step1.title","Где вы планируете работать?")}),e.jsx("p",{children:s("becomeSitter.step1.subtitle","Выберите страну и город для начала.")})]}),e.jsxs("div",{className:Ke.formGroup,children:[e.jsx("label",{children:s("common.country","Страна")}),e.jsxs("select",{className:Ke.select,value:l,onChange:B,children:[e.jsx("option",{value:"",children:s("common.selectCountry","Выберите страну...")}),n.map(p=>e.jsx("option",{value:p.id,children:p.country_name},p.id))]})]}),l&&e.jsxs(e.Fragment,{children:[x?e.jsxs("div",{className:Ke.customCityBlock,children:[e.jsxs("div",{className:Ke.formGroup,children:[e.jsx("label",{children:s("becomeSitter.step1.yourCity","Напишите название вашего города")}),e.jsx("input",{className:Ke.input,value:N,onChange:p=>v(p.target.value),placeholder:s("common.enterCityName","Например: Казань")})]}),e.jsxs("div",{className:Ke.waitlistInfo,children:[e.jsx(T_,{}),e.jsx("p",{children:s("becomeSitter.step1.waitlistInfo","Мы добавим вас в лист ожидания и сообщим, когда запустимся в этом городе!")})]})]}):e.jsxs("div",{className:Ke.formGroup,children:[e.jsx("label",{children:s("common.city","Город")}),e.jsxs("select",{className:Ke.select,value:o,onChange:p=>h(p.target.value),disabled:P,children:[e.jsx("option",{value:"",children:P?"Загрузка...":a.length>0?s("common.selectCity","Выберите город..."):s("common.noCitiesFound","Города не найдены")}),a.map(p=>e.jsx("option",{value:p.id,children:p.city_name},p.id))]})]}),e.jsx("button",{className:Ke.toggleLink,onClick:()=>{w(!x),h(""),v("")},children:x?s("becomeSitter.step1.selectFromList","Вернуться к списку городов"):s("becomeSitter.step1.customCityLink","Моего города нет в списке")})]}),e.jsx("button",{className:Ke.btnPrimary,onClick:b,disabled:u||!l||!o&&!N,children:u?s("loading","Загрузка..."):x?s("common.joinWaitlist","Вступить в лист ожидания"):s("common.next","Продолжить")})]})},M_="_stepCard_jxvjj_1",E_="_header_jxvjj_16",R_="_errorMessage_jxvjj_33",$_="_sectionTitle_jxvjj_43",F_="_formGroup_jxvjj_52",O_="_input_jxvjj_63",D_="_select_jxvjj_64",W_="_inputError_jxvjj_81",z_="_errorText_jxvjj_86",G_="_divider_jxvjj_93",U_="_uploadCard_jxvjj_99",H_="_error_jxvjj_33",q_="_uploadHeader_jxvjj_112",V_="_uploadIcon_jxvjj_119",K_="_uploadInfo_jxvjj_124",Y_="_uploadButton_jxvjj_137",Z_="_previewContainer_jxvjj_159",Q_="_previewOverlay_jxvjj_174",X_="_changeButton_jxvjj_196",J_="_btnPrimary_jxvjj_213",e2="_safetyBadge_jxvjj_241",t2="_icon_jxvjj_251",s2="_content_jxvjj_259",n2="_mainText_jxvjj_263",a2="_subText_jxvjj_269",he={stepCard:M_,header:E_,errorMessage:R_,sectionTitle:$_,formGroup:F_,input:O_,select:D_,inputError:W_,errorText:z_,divider:G_,uploadCard:U_,error:H_,uploadHeader:q_,uploadIcon:V_,uploadInfo:K_,uploadButton:Y_,previewContainer:Z_,previewOverlay:Q_,changeButton:X_,btnPrimary:J_,safetyBadge:e2,icon:t2,content:s2,mainText:n2,subText:a2},i2=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),e.jsx("circle",{cx:"9",cy:"10",r:"2"}),e.jsx("path",{d:"M15 8h2"}),e.jsx("path",{d:"M15 12h2"}),e.jsx("path",{d:"M7 16h10"})]}),r2=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("path",{d:"M12 13m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"})]}),hn=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),pn=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),o2=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),c2=({onNext:t,isResubmission:s,adminMessage:n})=>{const{t:i}=ae(),[a,r]=c.useState(""),[l,d]=c.useState(""),[o,h]=c.useState(""),[x,w]=c.useState("0"),[N,v]=c.useState(null),[m,j]=c.useState(null),[P,g]=c.useState(!1),[u,y]=c.useState({}),_=qt.useMemo(()=>{const p=new Date;return p.setFullYear(p.getFullYear()-18),p.toISOString().split("T")[0]},[]),S=(p,L)=>{if(p.target.files&&p.target.files[0]){const O=p.target.files[0],F=URL.createObjectURL(O);L==="doc"?(v({file:O,preview:F}),y(A=>({...A,document_photo:""}))):(j({file:O,preview:F}),y(A=>({...A,selfie_photo:""})))}},B=()=>{const p={};if(a.trim()||(p.first_name=i("validation.nameRequired","Введите имя")),l.trim()||(p.last_name=i("validation.lastNameRequired","Введите фамилию")),!o)p.birth=i("validation.birthDateRequired","Укажите дату рождения");else{const L=new Date(o),O=new Date;O.setFullYear(O.getFullYear()-18),O.setHours(0,0,0,0),L>O&&(p.birth=i("validation.ageRequirement","Регистрация только с 18 лет"))}return N||(p.document_photo=i("validation.idPhotoRequired","Загрузите фото документа")),m||(p.selfie_photo=i("validation.selfieRequired","Загрузите селфи")),y(p),Object.keys(p).length===0},b=async()=>{var L,O,F,A;if(!B())return;g(!0);const p=new FormData;p.append("first_name",a),p.append("last_name",l),p.append("birth",o),p.append("gender",x),N&&N.file&&p.append("document_photo",N.file),m&&m.file&&p.append("selfie_photo",m.file);try{await Ka(p),t()}catch(T){if(console.error("KYC Submit Error:",T),(O=(L=T.response)==null?void 0:L.data)!=null&&O.errors){const E=T.response.data.errors,C={};Object.keys(E).forEach(f=>{C[f]=E[f][0]}),y(C)}else alert(((A=(F=T.response)==null?void 0:F.data)==null?void 0:A.message)||"Ошибка отправки данных")}finally{g(!1)}};return e.jsxs("div",{className:he.stepCard,children:[e.jsxs("div",{className:he.header,children:[e.jsx("h1",{children:i("kyc.formTitle","Подтверждение личности")}),e.jsx("p",{children:i("kyc.subtitle","Чтобы клиенты доверяли вам, нам нужно подтвердить вашу личность. Это безопасно и конфиденциально.")})]}),e.jsxs("div",{className:he.safetyBadge,children:[e.jsx("div",{className:he.icon,children:e.jsx(o2,{})}),e.jsxs("div",{className:he.content,children:[e.jsx("span",{className:he.mainText,children:i("kyc.dataSafety.commitment","Мы обязуемся защищать вашу личную информацию. Эти данные необходимы для целей верификации и обеспечения безопасности нашего сообщества.")}),e.jsx("span",{className:he.subText,children:i("kyc.dataSafety.ageNotice","Регистрация только для лиц старше 18 лет.")})]})]}),s&&n&&e.jsxs("div",{className:he.errorMessage,children:[e.jsxs("strong",{children:[i("ReviewStatus.AdminMessagePrefix","Комментарий администратора"),":"]})," ",n]}),e.jsxs("div",{className:he.card,children:[e.jsx("h3",{className:he.sectionTitle,children:i("kyc.personalInfoTitle","Личные данные")}),e.jsxs("div",{className:he.formGroup,children:[e.jsx("label",{children:i("kyc.firstNameLabel","Имя")}),e.jsx("input",{className:`${he.input} ${u.first_name?he.inputError:""}`,value:a,onChange:p=>{r(p.target.value),y(L=>({...L,first_name:""}))},placeholder:i("kyc.firstNamePlaceholder","Как в паспорте")}),u.first_name&&e.jsx("span",{className:he.errorText,children:u.first_name})]}),e.jsxs("div",{className:he.formGroup,children:[e.jsx("label",{children:i("kyc.lastNameLabel","Фамилия")}),e.jsx("input",{className:`${he.input} ${u.last_name?he.inputError:""}`,value:l,onChange:p=>{d(p.target.value),y(L=>({...L,last_name:""}))},placeholder:i("kyc.lastNamePlaceholder","Как в паспорте")}),u.last_name&&e.jsx("span",{className:he.errorText,children:u.last_name})]}),e.jsxs("div",{className:he.formGroup,children:[e.jsx("label",{children:i("kyc.birthDateLabel","Дата рождения")}),e.jsx("input",{type:"date",className:`${he.input} ${u.birth?he.inputError:""}`,value:o,onChange:p=>{h(p.target.value),y(L=>({...L,birth:""}))},max:_}),u.birth&&e.jsx("span",{className:he.errorText,children:u.birth})]}),e.jsxs("div",{className:he.formGroup,children:[e.jsx("label",{children:i("kyc.genderLabel","Пол")}),e.jsxs("select",{className:he.select,value:x,onChange:p=>w(p.target.value),children:[e.jsx("option",{value:"0",children:i("common.male_people","Мужской")}),e.jsx("option",{value:"1",children:i("common.female_people","Женский")})]})]})]}),e.jsx("div",{className:he.divider}),e.jsxs("div",{className:he.card,children:[e.jsx("h3",{className:he.sectionTitle,children:i("kyc.documentsTitle","Документы")}),e.jsxs("div",{className:`${he.uploadCard} ${u.document_photo?he.error:""}`,children:[e.jsxs("div",{className:he.uploadHeader,children:[e.jsx("div",{className:he.uploadIcon,children:e.jsx(i2,{})}),e.jsxs("div",{className:he.uploadInfo,children:[e.jsx("h4",{children:i("kyc.idPhotoLabel","Фото паспорта")}),e.jsx("p",{children:i("kyc.idPhotoInfo","Убедитесь, что все детали хорошо видны. Принимаются: паспорт, национальное удостоверение личности или водительские права.")})]})]}),N?e.jsxs("div",{children:[e.jsxs("div",{className:he.previewContainer,children:[e.jsx("img",{src:N.preview,alt:"Passport"}),e.jsx("div",{className:he.previewOverlay,children:e.jsx(pn,{})})]}),e.jsxs("label",{className:he.changeButton,children:[i("common.change","Изменить"),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>S(p,"doc"),hidden:!0})]})]}):e.jsxs("label",{className:he.uploadButton,children:[e.jsx(hn,{}),e.jsx("span",{children:i("kyc.uploadPhoto","Загрузить фото")}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>S(p,"doc")})]}),u.document_photo&&e.jsx("span",{className:he.errorText,children:u.document_photo})]}),e.jsxs("div",{className:`${he.uploadCard} ${u.selfie_photo?he.error:""}`,children:[e.jsxs("div",{className:he.uploadHeader,children:[e.jsx("div",{className:he.uploadIcon,children:e.jsx(r2,{})}),e.jsxs("div",{className:he.uploadInfo,children:[e.jsx("h4",{children:i("kyc.selfieWithIdLabel","Селфи с паспортом")}),e.jsx("p",{children:i("kyc.selfieWithIdInfo","Держите документ рядом с лицом. Ваше лицо и документ должны быть четко видны.")})]})]}),m?e.jsxs("div",{children:[e.jsxs("div",{className:he.previewContainer,children:[e.jsx("img",{src:m.preview,alt:"Selfie"}),e.jsx("div",{className:he.previewOverlay,children:e.jsx(pn,{})})]}),e.jsxs("label",{className:he.changeButton,children:[i("common.change","Изменить"),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>S(p,"selfie"),hidden:!0})]})]}):e.jsxs("label",{className:he.uploadButton,children:[e.jsx(hn,{}),e.jsx("span",{children:i("kyc.uploadPhoto","Загрузить фото")}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>S(p,"selfie")})]}),u.selfie_photo&&e.jsx("span",{className:he.errorText,children:u.selfie_photo})]})]}),e.jsx("button",{className:he.btnPrimary,onClick:b,disabled:P,children:P?i("loading","Отправка..."):i("common.submitAndContinue","Отправить на проверку")})]})},l2="_testsContainer_lwilv_1",d2="_sectionTitle_lwilv_7",h2="_testCard_lwilv_14",p2="_passed_lwilv_28",u2="_disabled_lwilv_36",m2="_cardHeader_lwilv_45",_2="_testTitle_lwilv_53",x2="_testDesc_lwilv_60",g2="_cardFooter_lwilv_67",v2="_attemptsText_lwilv_75",f2="_statusPill_lwilv_81",j2="_failed_lwilv_92",y2="_pending_lwilv_96",w2="_actionButton_lwilv_101",b2="_testHeader_lwilv_110",N2="_mediaContainer_lwilv_136",S2="_videoPlayer_lwilv_144",k2="_lockedContainer_lwilv_151",C2="_questionsList_lwilv_168",I2="_questionItem_lwilv_174",A2="_optionsList_lwilv_181",B2="_optionCard_lwilv_187",P2="_selected_lwilv_201",T2="_indicator_lwilv_205",L2="_multiple_lwilv_219",M2="_active_lwilv_222",E2="_customAudioPlayer_lwilv_233",R2="_audioControls_lwilv_239",$2="_playBtn_lwilv_245",F2="_progressWrapper_lwilv_271",O2="_progressBarBg_lwilv_278",D2="_progressBarFill_lwilv_287",W2="_timeRow_lwilv_294",z2="_speedBtn_lwilv_302",xe={testsContainer:l2,sectionTitle:d2,testCard:h2,passed:p2,disabled:u2,cardHeader:m2,testTitle:_2,testDesc:x2,cardFooter:g2,attemptsText:v2,statusPill:f2,failed:j2,pending:y2,actionButton:w2,testHeader:b2,mediaContainer:N2,videoPlayer:S2,lockedContainer:k2,questionsList:C2,questionItem:I2,optionsList:A2,optionCard:B2,selected:P2,indicator:T2,multiple:L2,active:M2,customAudioPlayer:E2,audioControls:R2,playBtn:$2,progressWrapper:F2,progressBarBg:O2,progressBarFill:D2,timeRow:W2,speedBtn:z2},G2=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),U2=()=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),H2=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),q2=()=>e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),V2=()=>e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),Ds=({onNext:t})=>{var K,fe;const{t:s}=ae(),[n,i]=c.useState([]),[a,r]=c.useState(!0),[l,d]=c.useState("overview"),[o,h]=c.useState(null),[x,w]=c.useState(null),[N,v]=c.useState(!1),[m,j]=c.useState(!1),[P,g]=c.useState({}),[u,y]=c.useState(!1),_=c.useRef(null),S=c.useRef(null),[B,b]=c.useState(!1),[p,L]=c.useState(0),[O,F]=c.useState(0),[A,T]=c.useState(0),[E,C]=c.useState(1),f=c.useRef(0),k=async()=>{r(!0);try{const se=((await Ya()).data||[]).map(me=>({...me,user_status:me.user_status||(me.user_passed?"passed":"pending_submission")}));i(se)}catch(q){console.error(q),alert("Ошибка загрузки тестов")}finally{r(!1)}};c.useEffect(()=>{k()},[]);const D=async q=>{var se,me,Ie,Oe;if(q.user_status==="failed_no_retake"){alert("Вы исчерпали все попытки для этого теста.");return}h(q),d("player"),v(!0),j(!1),g({}),f.current=0,L(0),F(0),T(0),b(!1),C(1);try{const Ae=await Za(q.id.toString(),["sections.questions.answerOptions","sections.mediaFile"]);w(Ae.data);const re=(me=(se=Ae.data.sections)==null?void 0:se.data)==null?void 0:me[0];(!re||re.media_type==="none"||!((Oe=(Ie=re.mediaFile)==null?void 0:Ie.data)!=null&&Oe.url))&&j(!0)}catch(Ae){console.error(Ae),alert("Ошибка загрузки структуры теста"),d("overview")}finally{v(!1)}},W=q=>{const se=q.currentTarget,me=se.currentTime;!se.seeking&&me>f.current&&(f.current=me),F(me),se.duration&&(T(se.duration),L(me/se.duration*100))},H=q=>{const se=q.currentTarget;se.currentTime>f.current+1&&(se.currentTime=f.current)},Q=()=>{b(!1),j(!0),f.current=A},$=()=>{_.current&&(B?_.current.pause():_.current.play(),b(!B))},R=()=>{let q=1;E===1?q=1.25:E===1.25?q=1.5:q=1,C(q),_.current&&(_.current.playbackRate=q),S.current&&(S.current.playbackRate=q)},X=q=>{const se=q.currentTarget;se.playbackRate>1.5&&(se.playbackRate=1.5)},te=q=>{if(!q)return"00:00";const se=Math.floor(q/60),me=Math.floor(q%60);return`${se<10?"0"+se:se}:${me<10?"0"+me:me}`},oe=(q,se,me)=>{g(Ie=>{const Oe={...Ie};if(me==="single_choice")Oe[q]=se;else{let Ae=Oe[q]||[];Ae.includes(se)?Oe[q]=Ae.filter(re=>re!==se):Oe[q]=[...Ae,se]}return Oe})},Me=async()=>{var Ie,Oe,Ae,re,_e,I;const q=((re=(Ae=(Oe=(Ie=x==null?void 0:x.sections)==null?void 0:Ie.data)==null?void 0:Oe[0])==null?void 0:Ae.questions)==null?void 0:re.data)||[];if(!q.every(V=>{const be=P[V.id];return be!==void 0&&(Array.isArray(be)?be.length>0:!0)})){alert("Пожалуйста, ответьте на все вопросы.");return}y(!0);const me=q.map(V=>({question_id:V.id,selected_answer_option_id:Array.isArray(P[V.id])?P[V.id][0]:P[V.id]}));try{(await Qa({test_id:o.id,answers:me})).data.passed?(alert("Поздравляем! Тест успешно сдан."),d("overview"),await k()):alert("К сожалению, тест не сдан. Исправьте ошибки и попробуйте отправить снова.")}catch(V){alert(((I=(_e=V.response)==null?void 0:_e.data)==null?void 0:I.message)||"Ошибка отправки")}finally{y(!1)}},ge=n.filter(q=>!q.service_key_target&&q.user_status!=="not_required"),ve=n.filter(q=>q.service_key_target&&q.user_status!=="not_required"),Fe=ge.length===0||ge.every(q=>q.user_status==="passed"),ye=ve.length===0||ve.some(q=>q.user_status==="passed"),Ce=Fe&&ye;if(l==="player"){if(N)return e.jsx("div",{className:Xe.centerLoader,children:"Загрузка теста..."});if(!x)return e.jsx("div",{children:"Ошибка данных теста."});const q=x.sections.data[0],se=(K=q==null?void 0:q.mediaFile)==null?void 0:K.data,me=((fe=q==null?void 0:q.questions)==null?void 0:fe.data)||[];return e.jsxs("div",{className:Xe.stepCard,children:[e.jsxs("div",{className:xe.testHeader,children:[e.jsx("button",{onClick:()=>d("overview"),children:e.jsx(H2,{})}),e.jsx("h2",{children:x.title})]}),q.media_type!=="none"&&(se==null?void 0:se.url)&&e.jsx("div",{className:xe.mediaContainer,children:q.media_type==="video"?e.jsx("video",{ref:S,src:se.url,controls:!0,controlsList:"nodownload",className:xe.videoPlayer,onTimeUpdate:W,onSeeking:H,onRateChange:X,onEnded:Q}):e.jsxs("div",{className:xe.customAudioPlayer,children:[e.jsx("audio",{ref:_,src:se.url,onTimeUpdate:W,onEnded:Q}),e.jsxs("div",{className:xe.audioControls,children:[e.jsx("button",{className:xe.playBtn,onClick:$,children:B?e.jsx(V2,{}):e.jsx(q2,{})}),e.jsxs("div",{className:xe.progressWrapper,children:[e.jsx("div",{className:xe.progressBarBg,children:e.jsx("div",{className:xe.progressBarFill,style:{width:`${p}%`}})}),e.jsxs("div",{className:xe.timeRow,children:[e.jsx("span",{children:te(O)}),e.jsx("span",{children:te(A)})]})]}),e.jsxs("button",{className:xe.speedBtn,onClick:R,children:[E,"x"]})]})]})}),!m&&q.media_type!=="none"?e.jsxs("div",{className:xe.lockedContainer,children:[e.jsx(G2,{}),e.jsx("p",{children:"Вопросы откроются после полного изучения материала (досмотрите видео / дослушайте аудио до конца)."})]}):e.jsx("div",{className:xe.questionsList,children:me.map((Ie,Oe)=>e.jsxs("div",{className:xe.questionItem,children:[e.jsxs("h4",{children:[Oe+1,". ",Ie.text]}),e.jsx("div",{className:xe.optionsList,children:Ie.answerOptions.data.map(Ae=>{const re=Ie.type==="multiple_choice",_e=re?(P[Ie.id]||[]).includes(Ae.id):P[Ie.id]===Ae.id;return e.jsxs("div",{className:`${xe.optionCard} ${_e?xe.selected:""}`,onClick:()=>oe(Ie.id,Ae.id,Ie.type),children:[e.jsx("div",{className:`${xe.indicator} ${re?xe.multiple:""} ${_e?xe.active:""}`,children:_e&&e.jsx(U2,{})}),e.jsx("span",{children:Ae.text})]},Ae.id)})})]},Ie.id))}),e.jsx("button",{className:Xe.btnPrimary,onClick:Me,disabled:u||!m&&q.media_type!=="none",style:{marginTop:30},children:u?"Отправка...":"Отправить ответы"})]})}if(a)return e.jsx("div",{className:Xe.centerLoader,children:"Загрузка тестов..."});const M=q=>q.map(se=>{const me=se.user_status==="passed",Ie=se.user_status==="failed_no_retake",Oe=se.max_attempts?Math.max(0,se.max_attempts-se.user_attempts_made):null;return e.jsxs("div",{className:`${xe.testCard} ${me?xe.passed:""} ${Ie?xe.disabled:""}`,onClick:()=>!me&&!Ie?D(se):null,children:[e.jsxs("div",{className:xe.cardHeader,children:[e.jsx("h3",{className:xe.testTitle,children:se.title}),e.jsx("span",{className:`${xe.statusPill} ${me?xe.passed:Ie?xe.failed:xe.pending}`,children:me?"Сдано":Ie?"Провалено":se.user_status==="failed_can_retake"?"Пересдать":"Нужно сдать"})]}),se.description&&e.jsx("p",{className:xe.testDesc,children:se.description}),e.jsxs("div",{className:xe.cardFooter,children:[e.jsx("span",{className:xe.attemptsText,children:!me&&(Oe===null?"∞ попыток":`Осталось попыток: ${Oe}`)}),!me&&!Ie&&e.jsxs("span",{className:xe.actionButton,children:[se.user_status==="failed_can_retake"?"Пересдать":"Начать"," →"]})]})]},se.id)});return e.jsxs("div",{className:Xe.stepCard,children:[e.jsxs("div",{className:Xe.header,children:[e.jsx("h1",{children:"Тестирование"}),e.jsx("p",{children:"Сдайте общие тесты и выберите услуги, которые хотите оказывать."})]}),e.jsxs("div",{className:xe.testsContainer,children:[ge.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:xe.sectionTitle,children:"Общие знания (Обязательно)"}),M(ge)]}),ve.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:xe.sectionTitle,children:"Услуги (Минимум одна)"}),M(ve)]}),ge.length===0&&ve.length===0&&e.jsx("p",{style:{textAlign:"center",color:"#888"},children:"Нет доступных тестов."})]}),e.jsx("button",{className:Xe.btnPrimary,onClick:t,disabled:!Ce,children:Ce?"Продолжить":"Сдайте тесты для продолжения"})]})},K2="_wizardContainer_1giw8_1",Y2="_centerLoader_1giw8_17",Z2="_headerBlock_1giw8_25",Q2="_iconCircle_1giw8_33",X2="_title_1giw8_45",J2="_subtitle_1giw8_52",ex="_testsBtn_1giw8_60",tx="_servicesList_1giw8_78",sx="_card_1giw8_84",nx="_cardActive_1giw8_92",ax="_header_1giw8_25",ix="_headerTitleContainer_1giw8_116",rx="_iconContainer_1giw8_122",ox="_iconActive_1giw8_132",cx="_iconInactive_1giw8_136",lx="_titleActive_1giw8_151",dx="_slider_1giw8_175",hx="_warningContainer_1giw8_204",px="_warningIcon_1giw8_215",ux="_warningContent_1giw8_223",mx="_warningText_1giw8_227",_x="_linkText_1giw8_234",xx="_content_1giw8_245",gx="_inputsRow_1giw8_263",vx="_inputGroupFull_1giw8_268",fx="_inputGroupHalf_1giw8_272",jx="_inputLabel_1giw8_279",yx="_inputLabelSmall_1giw8_279",wx="_priceInputWrapper_1giw8_291",bx="_smallInputWrapper_1giw8_292",Nx="_currencyPrefix_1giw8_313",Sx="_currencyPrefixSmall_1giw8_313",kx="_priceInput_1giw8_291",Cx="_smallInput_1giw8_292",Ix="_selectWrapper_1giw8_342",Ax="_nativeSelect_1giw8_353",Bx="_selectIcon_1giw8_367",Px="_readOnlyUnit_1giw8_376",Tx="_recommendationBadge_1giw8_388",Lx="_sectionSpacer_1giw8_406",Mx="_selectOptionContainer_1giw8_410",Ex="_chipsWrapper_1giw8_415",Rx="_chip_1giw8_415",$x="_selected_1giw8_436",Fx="_chipLabel_1giw8_440",Ox="_chipDesc_1giw8_444",Dx="_btnPrimary_1giw8_460",J={wizardContainer:K2,centerLoader:Y2,headerBlock:Z2,iconCircle:Q2,title:X2,subtitle:J2,testsBtn:ex,servicesList:tx,card:sx,cardActive:nx,header:ax,headerTitleContainer:ix,iconContainer:rx,iconActive:ox,iconInactive:cx,titleActive:lx,switch:"_switch_1giw8_162",slider:dx,warningContainer:hx,warningIcon:px,warningContent:ux,warningText:mx,linkText:_x,content:xx,inputsRow:gx,inputGroupFull:vx,inputGroupHalf:fx,inputLabel:jx,inputLabelSmall:yx,priceInputWrapper:wx,smallInputWrapper:bx,currencyPrefix:Nx,currencyPrefixSmall:Sx,priceInput:kx,smallInput:Cx,selectWrapper:Ix,nativeSelect:Ax,selectIcon:Bx,readOnlyUnit:Px,recommendationBadge:Tx,sectionSpacer:Lx,selectOptionContainer:Mx,chipsWrapper:Ex,chip:Rx,selected:$x,chipLabel:Fx,chipDesc:Ox,btnPrimary:Dx},js={Warning:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),TrendingUp:()=>e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),e.jsx("polyline",{points:"17 6 23 6 23 12"})]}),ChevronDown:()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})},Ct={BOARDING:"boarding",HOUSE_SITTING:"house_sitting",DROP_IN:"drop_in_visit",DAY_CARE:"doggy_day_care",WALKING:"walking"},bt={NIGHT:"night",VISIT:"visit",WALK_30:"walk_30",WALK_60:"walk_60",DAY:"day"},ys=({label:t,options:s,value:n,onChange:i,isMultiSelect:a,showDescription:r})=>{const l=d=>{if(a){const o=n||[];o.includes(d)?i(o.filter(h=>h!==d)):i([...o,d])}else i(d)};return e.jsxs("div",{className:J.selectOptionContainer,children:[e.jsx("label",{className:J.inputLabel,children:t}),e.jsx("div",{className:J.chipsWrapper,children:s.map(d=>{const o=a?n==null?void 0:n.includes(d.value):n===d.value;return e.jsxs("button",{type:"button",className:`${J.chip} ${o?J.selected:""}`,onClick:()=>l(d.value),children:[e.jsx("span",{className:J.chipLabel,children:d.label}),r&&d.description&&e.jsx("span",{className:J.chipDesc,children:d.description})]},d.value)})})]})},Wx=({serviceKey:t,serviceName:s,settings:n,currencySymbol:i,onToggleActive:a,onChangeSetting:r,onMultiSelectChange:l,onGoToTests:d})=>{const{t:o}=ae();if(!n)return null;const h=!!n.is_active;n.can_be_activated_from_api;const x=h,w=n.test_details_from_api||{},N=w.status!=="required_passed"&&w.status!=="completed_passed"&&w.status!=="not_required",v=t===Ct.WALKING,m=()=>{const b={width:24,height:24,className:J.serviceIconSvg};switch(t){case Ct.BOARDING:return e.jsx(kt,{...b});case Ct.WALKING:return e.jsx(Yt,{...b});case Ct.DROP_IN:return e.jsx(Zt,{...b});case Ct.DAY_CARE:return e.jsx(Qt,{...b});case Ct.HOUSE_SITTING:return e.jsx(Xt,{...b});default:return e.jsx(kt,{...b})}},j=b=>{if(t===Ct.WALKING){if(b===bt.WALK_30)return o("for_30_min_walk","30 мин");if(b===bt.WALK_60)return o("for_60_min_walk","60 мин")}return{[bt.NIGHT]:o("per_night","за ночь"),[bt.VISIT]:o("per_visit","за визит"),[bt.DAY]:o("per_day","за день")}[b]||b},P=n.unit||n.default_unit_from_api||"",g=[{value:1,label:o("petTypes.dog","Собаки")},{value:2,label:o("petTypes.cat","Кошки")}],u=[{value:1,label:o("petSizes.mini.name","Мини"),description:o("petSizes.mini.description","<5кг")},{value:2,label:o("petSizes.small.name","Мелкая"),description:o("petSizes.small.description","5-10кг")},{value:3,label:o("petSizes.medium.name","Средняя"),description:o("petSizes.medium.description","10-20кг")},{value:4,label:o("petSizes.big.name","Крупная"),description:o("petSizes.big.description","20-40кг")},{value:5,label:o("petSizes.huge.name","Гигант"),description:o("petSizes.huge.description","40+кг")}],y=[{label:j(bt.WALK_30),value:bt.WALK_30},{label:j(bt.WALK_60),value:bt.WALK_60}],_=n.allowed_pet_types||[],S=v||_.includes(1),B=!v&&_.includes(2);return e.jsxs("div",{className:`${J.card} ${x?J.cardActive:""}`,children:[e.jsxs("div",{className:J.header,children:[e.jsxs("div",{className:J.headerTitleContainer,children:[e.jsx("div",{className:`${J.iconContainer} ${x?J.iconActive:J.iconInactive}`,children:m()}),e.jsx("span",{className:`${J.title} ${x?J.titleActive:""}`,children:s})]}),e.jsxs("label",{className:J.switch,children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>a(t)}),e.jsx("span",{className:J.slider})]})]}),N&&e.jsxs("div",{className:J.warningContainer,children:[e.jsx("div",{className:J.warningIcon,children:e.jsx(js.Warning,{})}),e.jsxs("div",{className:J.warningContent,children:[e.jsx("p",{className:J.warningText,children:w.message||o("TestRequiredForActivation","Требуется сдать тест для активации этой услуги.")}),w.test_id&&e.jsx("button",{className:J.linkText,onClick:()=>d(w.test_id),children:o("CompleteTestPrompt","Пройти тест")})]})]}),x&&e.jsxs("div",{className:J.content,children:[e.jsxs("div",{className:J.inputsRow,children:[e.jsxs("div",{className:J.inputGroupFull,children:[e.jsx("label",{className:J.inputLabel,children:o("BasePrice","Базовая цена")}),e.jsxs("div",{className:J.priceInputWrapper,children:[e.jsx("span",{className:J.currencyPrefix,children:i}),e.jsx("input",{type:"text",inputMode:"numeric",className:J.priceInput,placeholder:"0",value:n.price_per_unit||"",onChange:b=>r(t,"price_per_unit",b.target.value)})]})]}),e.jsxs("div",{className:J.inputGroupFull,style:{marginLeft:"15px"},children:[e.jsx("label",{className:J.inputLabel,children:o("Unit","За")}),v?e.jsxs("div",{className:J.selectWrapper,children:[e.jsx("select",{value:n.unit||n.default_unit_from_api,onChange:b=>r(t,"unit",b.target.value),className:J.nativeSelect,children:y.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))}),e.jsx("div",{className:J.selectIcon,children:e.jsx(js.ChevronDown,{})})]}):e.jsx("div",{className:J.readOnlyUnit,children:j(P)})]})]}),n.recommended_price_from_api!==null&&e.jsxs("div",{className:J.recommendationBadge,children:[e.jsx(js.TrendingUp,{}),e.jsxs("span",{children:[o("Recommended","Средняя цена"),": ",n.recommended_price_from_api," ",i]})]}),!v&&e.jsxs("div",{className:J.inputsRow,style:{marginTop:"16px"},children:[e.jsxs("div",{className:J.inputGroupHalf,children:[e.jsx("label",{className:J.inputLabelSmall,children:o("PricePerAdditionalPet","Доп. питомец")}),e.jsxs("div",{className:J.smallInputWrapper,children:[e.jsx("span",{className:J.currencyPrefixSmall,children:i}),e.jsx("input",{type:"text",inputMode:"numeric",className:J.smallInput,placeholder:"0",value:n.price_per_additional_pet||"",onChange:b=>r(t,"price_per_additional_pet",b.target.value)})]})]}),e.jsxs("div",{className:J.inputGroupHalf,children:[e.jsx("label",{className:J.inputLabelSmall,children:o("MaxPets","Макс. питомцев")}),e.jsx("div",{className:J.smallInputWrapper,children:e.jsx("input",{type:"text",inputMode:"numeric",className:J.smallInput,style:{paddingLeft:"10px"},placeholder:"∞",value:n.max_pets||"",onChange:b=>r(t,"max_pets",b.target.value)})})]})]}),!v&&e.jsx("div",{className:J.sectionSpacer,children:e.jsx(ys,{label:o("AllowedPetTypes","Кого принимаете?"),options:g,value:n.allowed_pet_types,onChange:b=>l(t,"allowed_pet_types",b),isMultiSelect:!0,showDescription:!1})}),S&&e.jsx("div",{className:J.sectionSpacer,children:e.jsx(ys,{label:o("AllowedDogSizes","Размеры собак"),options:u,value:n.allowed_dog_sizes,onChange:b=>l(t,"allowed_dog_sizes",b),isMultiSelect:!0,showDescription:!0})}),B&&e.jsx("div",{className:J.sectionSpacer,children:e.jsx(ys,{label:o("AllowedCatSizes","Размеры кошек"),options:u,value:n.allowed_cat_sizes,onChange:b=>l(t,"allowed_cat_sizes",b),isMultiSelect:!0,showDescription:!0})})]})]})},Yn=qt.memo(Wx),Ee={BOARDING:"boarding",HOUSE_SITTING:"house_sitting",DROP_IN_VISIT:"drop_in_visit",DAY_CARE:"doggy_day_care",WALKING:"walking"},ws={[Ee.BOARDING]:"night",[Ee.HOUSE_SITTING]:"night",[Ee.DAY_CARE]:"day",[Ee.DROP_IN_VISIT]:"visit",[Ee.WALKING]:"walk_60"},zx=()=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),Gx=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),e.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Ux=({onNext:t})=>{const{t:s}=ae(),[n,i]=c.useState({}),[a,r]=c.useState([]),[l,d]=c.useState("₽"),[o,h]=c.useState(!0),[x,w]=c.useState(!1),[N,v]=c.useState(!1),m=y=>{const S={[Ee.BOARDING]:"boarding",[Ee.WALKING]:"walking",[Ee.DAY_CARE]:"daycare",[Ee.DROP_IN_VISIT]:"dropIn",[Ee.HOUSE_SITTING]:"houseSitting"}[y]||y;return s(`header.services.${S}`,y)};c.useEffect(()=>{(async()=>{var _,S,B,b,p,L;h(!0);try{const[O,F]=await Promise.all([Pn(),Bn()]);let A=null,T=[];if((_=F==null?void 0:F.application_data)!=null&&_.data){A=F.application_data.data,T=((S=A==null?void 0:A.initial_service_configurations)==null?void 0:S.data)||[];const Q=(b=(B=F.application_data.data.user)==null?void 0:B.data)==null?void 0:b.currency_symbol,$=(L=(p=A==null?void 0:A.selected_city)==null?void 0:p.data)==null?void 0:L.currency;Q?d(Q):$==="RUB"?d("₽"):$==="USD"&&d("$")}const E=[];A?(A.is_sitter_applicant&&E.push(Ee.BOARDING,Ee.HOUSE_SITTING,Ee.DROP_IN_VISIT,Ee.DAY_CARE),A.is_walker_applicant&&E.push(Ee.WALKING)):E.push(Ee.BOARDING,Ee.WALKING);const C=O.data||[],f=C.map(Q=>Q.service_key),k=E.filter(Q=>f.includes(Q)),D=[Ee.BOARDING,Ee.WALKING,Ee.DAY_CARE,Ee.HOUSE_SITTING,Ee.DROP_IN_VISIT],W=[...new Set(k)].sort((Q,$)=>D.indexOf(Q)-D.indexOf($));r(W);const H={};W.forEach(Q=>{var ge,ve,Fe,ye,Ce,M;const $=C.find(K=>K.service_key===Q),R=T.find(K=>K.service_key===Q);if(!$)return;const X=$.test_details_for_activation||{status:"not_defined",message:"Test not defined"},te=X.status==="required_passed"||X.status==="completed_passed"||X.status==="not_required";let oe=!1;R&&typeof R.is_active<"u"&&(oe=!!R.is_active);let Me=(ge=R==null?void 0:R.price_per_unit)==null?void 0:ge.toString();(Me==null||Me==="")&&(Me=$.recommended_price!==null&&typeof $.recommended_price<"u"?$.recommended_price.toString():""),H[Q]={service_key:Q,price_per_unit:Me,unit:(R==null?void 0:R.unit)||$.default_unit||ws[Q]||"",is_active:oe,price_per_additional_pet:((ve=R==null?void 0:R.price_per_additional_pet)==null?void 0:ve.toString())??"",max_pets:((Fe=R==null?void 0:R.max_pets)==null?void 0:Fe.toString())??"",allowed_pet_types:(ye=R==null?void 0:R.allowed_pet_types)!=null&&ye.length?R.allowed_pet_types:[],allowed_dog_sizes:(Ce=R==null?void 0:R.allowed_dog_sizes)!=null&&Ce.length?R.allowed_dog_sizes:[],allowed_cat_sizes:(M=R==null?void 0:R.allowed_cat_sizes)!=null&&M.length?R.allowed_cat_sizes:[],can_be_activated_from_api:te,test_details_from_api:X,recommended_price_from_api:$.recommended_price??null,default_unit_from_api:$.default_unit||ws[Q]||""},R||(Q===Ee.WALKING?H[Q].allowed_dog_sizes=[1,2,3,4,5]:(H[Q].allowed_pet_types=[1,2],H[Q].allowed_dog_sizes=[1,2,3,4,5],H[Q].allowed_cat_sizes=[1,2,3,4,5]))}),i(H)}catch(O){console.error(O),alert(s("ErrorSomethingWentWrong","Произошла ошибка при загрузке данных"))}finally{h(!1)}})()},[s]);const j=(y,_,S)=>{let B=S;_==="price_per_unit"||_==="price_per_additional_pet"?B=S.replace(/[^0-9.]/g,""):_==="max_pets"&&(B=S.replace(/[^0-9]/g,"")),i(b=>({...b,[y]:{...b[y]||{},[_]:B}}))},P=y=>{i(_=>{const S=_[y];return S?{..._,[y]:{...S,is_active:!S.is_active}}:_})},g=(y,_,S)=>{i(B=>({...B,[y]:{...B[y]||{},[_]:S}}))},u=async()=>{var p,L,O,F,A,T;const y=[];let _=!0,S="";for(const E of a){if(!_)break;const C=n[E];if(!C)continue;const f=C.can_be_activated_from_api,k=!!C.is_active,D=m(E),W=k?[...new Set(C.allowed_pet_types||[])]:[],H=k?[...new Set(C.allowed_dog_sizes||[])]:[],Q=k?[...new Set(C.allowed_cat_sizes||[])]:[],$={service_key:E,price_per_unit:parseFloat((p=C.price_per_unit)==null?void 0:p.toString().replace(",","."))||0,unit:C.unit||C.default_unit_from_api||ws[E]||"",is_active:k,price_per_additional_pet:C.price_per_additional_pet?parseFloat((L=C.price_per_additional_pet)==null?void 0:L.toString().replace(",",".")):null,max_pets:E===Ee.WALKING?1:C.max_pets?parseInt(C.max_pets,10):null,allowed_pet_types:W,allowed_dog_sizes:H,allowed_cat_sizes:Q};if(y.push($),C.is_active){if(!f){S=`${s("TestRequiredForActivation","Требуется сдать тест для")}: ${D}`,_=!1;continue}const R=parseFloat((O=C.price_per_unit)==null?void 0:O.toString().replace(",","."));if(!C.price_per_unit||isNaN(R)||R<=0){S=`${s("ErrorEnterValidPositivePriceFor","Введите корректную цену для")} ${D}`,_=!1;continue}const X=E===Ee.WALKING;if(X&&$.allowed_dog_sizes.length===0){S=s("ErrorSelectDogSizeForWalker","Выберите размер собак для выгула"),_=!1;continue}if(!X&&$.allowed_pet_types.length===0){S=`${s("ErrorSelectPetTypeFor","Выберите тип питомца для")} ${D}`,_=!1;continue}}}if(!_){alert(S);return}const B=y.some(E=>E.is_active),b=a.some(E=>{var C;return(C=n[E])==null?void 0:C.can_be_activated_from_api});if(!(!B&&b&&!window.confirm(s("WarningNoServicesActive","Вы не активировали ни одной услуги. Продолжить?")))){w(!0);try{const E=await Xa({services:y});(E==null?void 0:E.status)==="success"||(E==null?void 0:E.object)==="workerrequests"||((F=E==null?void 0:E.data)==null?void 0:F.object)==="workerrequests"?t():alert((E==null?void 0:E.message)||s("ErrorSubmissionFailed","Ошибка сохранения"))}catch(E){console.error(E);const C=((T=(A=E.response)==null?void 0:A.data)==null?void 0:T.message)||s("ErrorSomethingWentWrong","Что-то пошло не так");alert(C)}finally{w(!1)}}};return N?e.jsx(Ds,{onNext:()=>{v(!1)}}):o?e.jsx("div",{className:J.centerLoader,children:s("LoadingSettings...","Загрузка настроек...")}):e.jsxs("div",{className:J.wizardContainer,children:[e.jsxs("div",{className:J.headerBlock,children:[e.jsx("div",{className:J.iconCircle,children:e.jsx(zx,{})}),e.jsx("h2",{className:J.title,children:s("Step3ServiceSettingsTitle","Настройка услуг")}),e.jsx("p",{className:J.subtitle,children:s("Step3ServiceSettingsDescription","Выберите услуги, которые вы готовы оказывать, и установите свои цены.")}),e.jsxs("button",{className:J.testsBtn,onClick:()=>v(!0),children:[e.jsx(Gx,{})," ",s("GoToTestsButton","Пройти тесты")]})]}),e.jsx("div",{className:J.servicesList,children:a.map(y=>e.jsx(Yn,{serviceKey:y,serviceName:m(y),settings:n[y],currencySymbol:l,onToggleActive:P,onChangeSetting:j,onMultiSelectChange:g,onGoToTests:()=>v(!0)},y))}),e.jsx("button",{className:J.btnPrimary,onClick:u,disabled:x||o,children:x?s("Saving...","Сохранение..."):s("NextButton","Далее")})]})},Hx="_headerBlock_1w9v6_7",qx="_iconCircle_1w9v6_11",Vx="_cardsList_1w9v6_36",Kx="_cardItem_1w9v6_42",Yx="_inactive_1w9v6_61",Zx="_cardIcon_1w9v6_66",Qx="_cardInfo_1w9v6_75",Xx="_cardActions_1w9v6_88",Jx="_radio_1w9v6_91",eg="_checked_1w9v6_98",tg="_addCardBtn_1w9v6_114",sg="_errorMessage_1w9v6_134",lt={headerBlock:Hx,iconCircle:qx,cardsList:Vx,cardItem:Kx,default:"_default_1w9v6_57",inactive:Yx,cardIcon:Zx,cardInfo:Qx,cardActions:Xx,radio:Jx,checked:eg,addCardBtn:tg,errorMessage:sg},un=()=>e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),ng=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ag=()=>e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginBottom:-2,marginRight:4},children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),ig=({onNext:t})=>{const[s,n]=c.useState([]),[i,a]=c.useState(!0),[r,l]=c.useState(null),[d,o]=c.useState(!1),h=async()=>{a(!0),l(null);try{const v=await Fs();n(v.data||[])}catch{l("Не удалось загрузить список карт")}finally{a(!1)}};c.useEffect(()=>{h()},[]);const x=async()=>{o(!0);try{const v=window.location.href,m=await Os({return_url_mobile_base:v}),j=m.webview_url||m.checkout_url;j?window.location.href=j:alert("Ошибка получения ссылки на оплату")}catch{alert("Ошибка создания сессии оплаты")}finally{o(!1)}},w=async v=>{try{await ks(v),h()}catch{alert("Ошибка выбора карты")}},N=async()=>{if(!s.find(m=>m.status==="active"&&m.is_default)){const m=s.find(j=>j.status==="active");if(m)await ks(m.id);else return alert("Пожалуйста, привяжите карту для получения выплат.")}t()};return i?e.jsx("div",{className:Xe.centerLoader,children:"Загрузка..."}):e.jsxs("div",{className:Xe.stepCard,children:[e.jsxs("div",{className:lt.headerBlock,children:[e.jsx("div",{className:lt.iconCircle,children:e.jsx(un,{})}),e.jsx("h2",{children:"Получение выплат"}),e.jsxs("div",{style:{maxWidth:"480px",margin:"0 auto",lineHeight:"1.5",fontSize:"0.95rem",color:"#1A202C"},children:[e.jsx("p",{style:{marginBottom:"12px"},children:"Добавьте карту, чтобы мы могли переводить вам деньги за заказы. Это также помогает нам убедиться, что вы — реальный человек."}),e.jsx("p",{style:{marginBottom:"12px",fontSize:"0.9rem",color:"#4A5568"},children:"Для проверки мы временно заморозим и сразу вернем небольшую сумму (обычно 2 ₽)."}),e.jsxs("span",{style:{display:"block",fontSize:"0.85rem",opacity:.8,color:"#718096"},children:[e.jsx(ag,{})," Карту можно удалить в любое время."]})]})]}),r&&e.jsx("div",{className:lt.errorMessage,children:r}),e.jsxs("div",{className:lt.cardsList,children:[s.map(v=>{const m=v.is_default,j=v.status==="active";return e.jsxs("div",{className:`${lt.cardItem} ${m?lt.default:""} ${j?"":lt.inactive}`,onClick:()=>j&&!m?w(v.id):null,children:[e.jsx("div",{className:lt.cardIcon,children:e.jsx(un,{})}),e.jsxs("div",{className:lt.cardInfo,children:[e.jsxs("h4",{children:["•••• ",v.last4]}),e.jsx("span",{children:j?`Годен до ${v.exp_month}/${v.exp_year}`:"Неактивна"})]}),e.jsx("div",{className:lt.cardActions,children:j&&e.jsx("div",{className:`${lt.radio} ${m?lt.checked:""}`})})]},v.id)}),e.jsxs("button",{className:lt.addCardBtn,onClick:x,disabled:d,children:[e.jsx(ng,{}),d?"Загрузка...":"Добавить карту"]})]}),e.jsx("button",{className:Xe.btnPrimary,onClick:N,style:{marginTop:30},children:"Продолжить"})]})},rg="_headerBlock_rnzdc_1",og="_benefitCard_rnzdc_11",cg="_topRow_rnzdc_19",lg="_label_rnzdc_25",dg="_value_rnzdc_32",hg="_toggleContainer_rnzdc_44",pg="_toggleOption_rnzdc_52",ug="_price_rnzdc_66",mg="_active_rnzdc_71",_g="_totalBlock_rnzdc_83",xg="_oldPrice_rnzdc_91",gg="_finalPrice_rnzdc_96",vg="_skipButton_rnzdc_102",fg="_featuresList_rnzdc_116",jg="_feature_rnzdc_116",yg="_icon_rnzdc_129",wg="_discountBanner_rnzdc_148",$e={headerBlock:rg,benefitCard:og,topRow:cg,label:lg,value:dg,toggleContainer:hg,toggleOption:pg,price:ug,active:mg,totalBlock:_g,oldPrice:xg,finalPrice:gg,skipButton:vg,featuresList:fg,feature:jg,icon:yg,discountBanner:wg},bg=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),e.jsx("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),e.jsx("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]}),Ng=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Sg=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),kg=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Cg=({onNext:t})=>{var B;const[s,n]=c.useState(null),[i,a]=c.useState(null),[r,l]=c.useState("year"),[d,o]=c.useState(!0),[h,x]=c.useState(!1),[w,N]=c.useState(!1),v=async b=>{try{const O=(await ri(b?{promo_code:b}:{})).data||[],F=O.find(T=>T.billingInterval==="month"),A=O.find(T=>T.billingInterval==="year");n(F),a(A),A&&!r&&l("year")}catch(p){console.error(p)}finally{o(!1)}};c.useEffect(()=>{v()},[]);const m=async(b=!1)=>{const p=r==="year"?i:s;if(!p)return;const L=window.location.href,O={plan_id:p.id,return_url_mobile:L};w&&(O.promo_code="RETENTION_50"),b&&(O.save_new_card=!0,O.payment_method_id=null);const F=await oi(O),A=F.confirmation_url||F.url||F.data&&F.data.confirmation_url;A?window.location.href=A:t()},j=async()=>{var b,p,L,O,F,A,T,E;x(!0);try{await m(!1)}catch(C){console.log("Subscription attempt failed:",(b=C.response)==null?void 0:b.data);const f=((L=(p=C.response)==null?void 0:p.data)==null?void 0:L.message)||"",k=((F=(O=C.response)==null?void 0:O.data)==null?void 0:F.code)||"",D=(A=C.response)==null?void 0:A.status;if(D===404||D===402||D===422||k==="PAY_METH_001"||f.includes("Payment method not found")||f.includes("Не найден")||f.includes("failed"))try{console.log("Retrying with new card flow..."),await m(!0)}catch(H){alert(((E=(T=H.response)==null?void 0:T.data)==null?void 0:E.message)||"Ошибка при переходе к оплате"),x(!1)}else alert(f||"Ошибка создания подписки"),x(!1)}},P=async()=>{w?window.confirm("Вы уверены? Комиссия составит 20%. Скидка 50% сгорит навсегда.")&&t():(N(!0),await v("RETENTION_50"),window.scrollTo({top:0,behavior:"smooth"}))};if(d)return e.jsx("div",{className:Xe.centerLoader,children:"Загрузка тарифов..."});const g=r==="year"?i:s,u=((B=g==null?void 0:g.currency)==null?void 0:B.symbol)||"₽",y=(g==null?void 0:g.is_offer)&&(g==null?void 0:g.offer_details),_=w&&y?g.offer_details.offer_price:(g==null?void 0:g.price)||0,S=w&&y?g.offer_details.original_price:null;return e.jsxs("div",{className:Xe.stepCard,children:[e.jsx("div",{className:$e.headerBlock,children:e.jsx("h2",{children:"Ваш заработок на максимум"})}),e.jsxs("div",{className:$e.benefitCard,children:[e.jsxs("div",{className:$e.topRow,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(bg,{}),e.jsx("span",{className:$e.label,children:"КОМИССИЯ СЕРВИСА"})]}),e.jsx("span",{className:$e.value,children:"0%"})]}),e.jsx("p",{children:"Без подписки комиссия составляет 20%."})]}),e.jsxs("div",{className:$e.featuresList,children:[e.jsxs("div",{className:$e.feature,children:[e.jsx("div",{className:$e.icon,children:e.jsx(Ng,{})}),e.jsx("h5",{children:"Топ выдачи"}),e.jsx("p",{children:"Вас видят в 3 раза чаще"})]}),e.jsxs("div",{className:$e.feature,children:[e.jsx("div",{className:$e.icon,children:e.jsx(Sg,{})}),e.jsx("h5",{children:"Бейдж PRO"}),e.jsx("p",{children:"Выше доверие клиентов"})]}),e.jsxs("div",{className:$e.feature,children:[e.jsx("div",{className:$e.icon,children:e.jsx(kg,{})}),e.jsx("h5",{children:"Приоритет"}),e.jsx("p",{children:"Доступ к заказам раньше"})]})]}),w&&e.jsx("div",{className:$e.discountBanner,children:"🔥 ЦЕНА СНИЖЕНА НА 50%"}),e.jsxs("div",{className:$e.toggleContainer,children:[e.jsxs("div",{className:`${$e.toggleOption} ${r==="year"?$e.active:""}`,onClick:()=>l("year"),children:[e.jsxs("h4",{children:["12 мес ",w&&e.jsx("span",{style:{color:"#FF5252"},children:"(-50%)"})]}),e.jsxs("span",{className:$e.price,children:[Math.round((w&&(i!=null&&i.offer_details)?i.offer_details.offer_price:i==null?void 0:i.price)/12)," ",u,"/мес"]})]}),e.jsxs("div",{className:`${$e.toggleOption} ${r==="month"?$e.active:""}`,onClick:()=>l("month"),children:[e.jsx("h4",{children:"1 мес"}),e.jsxs("span",{className:$e.price,children:[w&&(s!=null&&s.offer_details)?s.offer_details.offer_price:s==null?void 0:s.price," ",u]})]})]}),e.jsxs("div",{className:$e.totalBlock,children:[e.jsx("span",{children:"Итого к оплате:"}),e.jsxs("div",{children:[S&&e.jsxs("span",{className:$e.oldPrice,children:[S," ",u]}),e.jsxs("span",{className:$e.finalPrice,children:[_," ",u]})]})]}),e.jsx("button",{className:Xe.btnPrimary,onClick:j,disabled:h,children:h?"Обработка...":"Активировать Premium"}),e.jsx("button",{className:$e.skipButton,onClick:P,children:w?"Отказаться от 0% комиссии":"Продолжить с комиссией 20%"})]})},Ig="_stepCard_hiuv5_2",Ag="_header_hiuv5_17",Bg="_iconCircle_hiuv5_21",Pg="_infoCard_hiuv5_48",Tg="_errorMessage_hiuv5_65",Lg="_sectionTitle_hiuv5_75",Mg="_mediaGrid_hiuv5_84",Eg="_mediaItem_hiuv5_91",Rg="_isMain_hiuv5_105",$g="_deleteBtn_hiuv5_120",Fg="_uploadBtn_hiuv5_140",Og="_mediaHint_hiuv5_166",Dg="_formGroup_hiuv5_173",Wg="_input_hiuv5_187",zg="_textarea_hiuv5_188",Gg="_error_hiuv5_65",Ug="_errorText_hiuv5_216",Hg="_switchRow_hiuv5_222",qg="_switchInfo_hiuv5_233",Vg="_slider_hiuv5_259",Kg="_submitBtn_hiuv5_288",Yg="_progress_hiuv5_313",ue={stepCard:Ig,header:Ag,iconCircle:Bg,infoCard:Pg,errorMessage:Tg,sectionTitle:Lg,mediaGrid:Mg,mediaItem:Eg,isMain:Rg,deleteBtn:$g,uploadBtn:Fg,mediaHint:Og,formGroup:Dg,input:Wg,textarea:zg,error:Gg,errorText:Ug,switchRow:Hg,switchInfo:qg,switch:"_switch_hiuv5_222",slider:Vg,submitBtn:Kg,progress:Yg},Zg=()=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:"1"})]}),Qg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v1"}),e.jsx("path",{d:"M12 2a7 7 0 0 1 7 7c0 3.87-2.33 6.5-7 6.5s-7-2.63-7-6.5a7 7 0 0 1 7-7z"})]}),Xg=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Jg=()=>e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),e0=({onNext:t,isResubmission:s,adminMessage:n})=>{const{t:i}=ae(),[a,r]=c.useState(""),[l,d]=c.useState(""),[o,h]=c.useState(""),[x,w]=c.useState(""),[N,v]=c.useState(!1),[m,j]=c.useState(!1),[P,g]=c.useState([]),[u,y]=c.useState(null),[_,S]=c.useState(!1),[B,b]=c.useState(0),[p,L]=c.useState({}),O=C=>{if(C.target.files){const k=Array.from(C.target.files).map(D=>({file:D,preview:URL.createObjectURL(D),type:D.type.startsWith("video")?"video":"image",id:Math.random().toString(36).substr(2,9)}));g(D=>{const W=[...D,...k];return!u&&W.length>0&&y(W[0].id),W})}C.target.value=""},F=C=>{g(f=>f.filter(k=>k.id!==C)),u===C&&g(f=>{const k=f.filter(D=>D.id!==C);return y(k.length>0?k[0].id:null),k})},A=C=>{y(C)},T=()=>{const C={};return a.trim()||(C.title=i("validation.titleRequired","Заголовок обязателен")),l.trim()||(C.description=i("validation.descriptionRequired","Описание обязательно")),o.trim()||(C.address=i("validation.addressRequired","Укажите район или метро")),x.trim()||(C.care_experience=i("validation.experienceRequired","Укажите опыт")),P.length===0&&(C.media=i("validation.mediaRequired","Загрузите хотя бы одно фото")),L(C),Object.keys(C).length===0},E=async()=>{var C,f,k,D;if(T()){S(!0),b(0);try{let W=[...P];if(u){const Q=W.findIndex($=>$.id===u);if(Q>0){const[$]=W.splice(Q,1);W.unshift($)}}const H={title:a,description:l,address_q:o,care_experience:parseInt(x)||0,constant_supervision:N?1:0,children_under_twelve_yo:m?1:0};await Ja(H,W.map(Q=>Q.file)),t()}catch(W){if(console.error(W),(f=(C=W.response)==null?void 0:C.data)!=null&&f.errors){const H=W.response.data.errors,Q={};Object.keys(H).forEach($=>Q[$]=H[$][0]),L(Q)}else alert(((D=(k=W.response)==null?void 0:k.data)==null?void 0:D.message)||"Ошибка сохранения профиля")}finally{S(!1),b(0)}}};return e.jsxs("div",{className:ue.stepCard,children:[e.jsxs("div",{className:ue.header,children:[e.jsx("div",{className:ue.iconCircle,children:e.jsx(Zg,{})}),e.jsx("h1",{children:i("additionalProfile.mainTitle","Анкета исполнителя")}),e.jsx("p",{children:i("additionalProfile.mainSubtitle","Расскажите о себе, чтобы клиенты выбрали именно вас.")})]}),s&&n&&e.jsxs("div",{className:ue.errorMessage,children:[e.jsx("strong",{children:"Администратор:"})," ",n]}),e.jsxs("div",{className:ue.infoCard,children:[e.jsx(Qg,{}),e.jsxs("span",{children:[i("additionalProfile.guidanceMessage","Заполните профиль подробно.")," "," ",e.jsx("a",{href:"/sitter/30",target:"_blank",rel:"noopener noreferrer",style:{fontWeight:"bold",textDecoration:"underline",color:"inherit"},children:i("additionalProfile.viewExampleProfileLink","Посмотреть пример")})]})]}),e.jsxs("div",{className:ue.sectionTitle,children:[i("additionalProfile.mediaSectionTitle","Фото и Видео"),p.media&&e.jsx("span",{style:{color:"#F44336",fontSize:"0.8rem",marginLeft:10},children:p.media})]}),e.jsxs("div",{className:ue.mediaGrid,children:[P.map(C=>e.jsxs("div",{className:`${ue.mediaItem} ${u===C.id?ue.isMain:""}`,onClick:()=>A(C.id),title:"Нажмите, чтобы сделать главным",children:[C.type==="video"?e.jsx("video",{src:C.preview}):e.jsx("img",{src:C.preview,alt:"upload"}),e.jsx("button",{className:ue.deleteBtn,onClick:f=>{f.stopPropagation(),F(C.id)},children:e.jsx(Jg,{})})]},C.id)),P.length<10&&e.jsxs("label",{className:ue.uploadBtn,children:[e.jsx(Xg,{}),e.jsx("span",{children:i("common.add","Добавить")}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:O})]})]}),P.length>0&&e.jsx("p",{className:ue.mediaHint,children:i("additionalProfile.dragAndDropHelpText","Нажмите на фото, чтобы сделать его главным. Добавьте фото себя с животными, вашего дома или условий содержания.")}),e.jsx("div",{className:ue.sectionTitle,style:{marginTop:30},children:i("additionalProfile.mainInfoCardTitle","Основная информация")}),e.jsxs("div",{className:ue.formGroup,children:[e.jsxs("label",{children:[i("additionalProfile.titleLabel","Заголовок профиля")," ",e.jsx("span",{children:"*"})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#718096",marginBottom:"8px",lineHeight:"1.4"},children:i("additionalProfile.titleHint",'Придумайте короткий и яркий слоган. Это первое, что увидят клиенты в поиске рядом с вашим фото. Например: "Заботливая няня в центре" или "Активные прогулки для вашего пса".')}),e.jsx("input",{className:`${ue.input} ${p.title?ue.error:""}`,value:a,onChange:C=>{r(C.target.value),L(f=>({...f,title:""}))},placeholder:i("additionalProfile.titlePlaceholder","Например: Опытный догситтер, ваш питомец будет счастлив!"),maxLength:75}),p.title&&e.jsx("div",{className:ue.errorText,children:p.title})]}),e.jsxs("div",{className:ue.formGroup,children:[e.jsxs("label",{children:[i("additionalProfile.descriptionLabel","О себе")," ",e.jsx("span",{children:"*"})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#718096",marginBottom:"8px",lineHeight:"1.4"},children:i("additionalProfile.descriptionHint","Подробно расскажите о своем опыте. Укажите, в каких условиях будет жить питомец (квартира/дом), есть ли рядом парки. Напишите о своем графике (работаете дома или в офисе). Чем больше деталей, тем больше доверия!")}),e.jsx("textarea",{className:`${ue.textarea} ${p.description?ue.error:""}`,value:l,onChange:C=>{d(C.target.value),L(f=>({...f,description:""}))},placeholder:i("additionalProfile.descriptionPlaceholder","Привет! Меня зовут... Я обожаю собак и занимаюсь передержкой уже 2 года. Живу в просторной квартире рядом с парком..."),maxLength:5e3,style:{minHeight:"150px"}}),p.description&&e.jsx("div",{className:ue.errorText,children:p.description})]}),e.jsxs("div",{className:ue.formGroup,children:[e.jsxs("label",{children:[i("additionalProfile.addressLabel","Район / Метро")," ",e.jsx("span",{children:"*"})]}),e.jsx("input",{className:`${ue.input} ${p.address?ue.error:""}`,value:o,onChange:C=>{h(C.target.value),L(f=>({...f,address:""}))},placeholder:i("additionalProfile.addressPlaceholder","Например: м. Тверская, район Хамовники")}),p.address&&e.jsx("div",{className:ue.errorText,children:p.address})]}),e.jsxs("div",{className:ue.formGroup,children:[e.jsxs("label",{children:[i("additionalProfile.careExperienceLabel","Опыт работы с животными (лет)")," ",e.jsx("span",{children:"*"})]}),e.jsx("input",{className:`${ue.input} ${p.care_experience?ue.error:""}`,value:x,onChange:C=>{w(C.target.value.replace(/\D/g,"")),L(f=>({...f,care_experience:""}))},placeholder:"0",maxLength:2,style:{width:100}}),p.care_experience&&e.jsx("div",{className:ue.errorText,children:p.care_experience})]}),e.jsx("div",{className:ue.sectionTitle,style:{marginTop:20},children:i("additionalProfile.additionalInfoCardTitle","Условия")}),e.jsxs("div",{className:ue.switchRow,children:[e.jsxs("div",{className:ue.switchInfo,children:[e.jsx("h4",{children:i("additionalProfile.childrenPresentLabel","Есть дети до 12 лет?")}),e.jsx("p",{children:i("additionalProfile.childrenPresentHelpText","Важно для питомцев, которые боятся детей")})]}),e.jsxs("label",{className:ue.switch,children:[e.jsx("input",{type:"checkbox",checked:m,onChange:C=>j(C.target.checked)}),e.jsx("span",{className:ue.slider})]})]}),e.jsxs("div",{className:ue.switchRow,children:[e.jsxs("div",{className:ue.switchInfo,children:[e.jsx("h4",{children:i("additionalProfile.constantSupervisionLabel","Постоянный присмотр 24/7?")}),e.jsx("p",{children:i("additionalProfile.constantSupervisionHelpText","Включите, если вы работаете из дома или не оставляете питомца одного дольше чем на пару часов")})]}),e.jsxs("label",{className:ue.switch,children:[e.jsx("input",{type:"checkbox",checked:N,onChange:C=>v(C.target.checked)}),e.jsx("span",{className:ue.slider})]})]}),e.jsx("button",{className:ue.submitBtn,onClick:E,disabled:_,children:_?i("loading","Отправка..."):i("additionalProfile.submitButtonText","Создать профиль")}),_&&B>0&&e.jsxs("div",{className:ue.progress,children:["Загрузка медиа: ",Math.round(B*100),"%"]})]})},t0="_pageWrapper_1vx5t_1",s0="_animationContainer_1vx5t_9",n0="_title_1vx5t_15",a0="_message_1vx5t_23",i0="_adminMessageCard_1vx5t_34",r0="_adminHeader_1vx5t_45",o0="_adminText_1vx5t_55",c0="_actions_1vx5t_62",l0="_secondaryBtn_1vx5t_70",d0="_socialCard_1vx5t_90",h0="_socialButtons_1vx5t_111",p0="_socialBtn_1vx5t_119",u0="_telegram_1vx5t_134",m0="_instagram_1vx5t_137",_0="_disclaimer_1vx5t_145",et={pageWrapper:t0,animationContainer:s0,title:n0,message:a0,adminMessageCard:i0,adminHeader:r0,adminText:o0,actions:c0,secondaryBtn:l0,socialCard:d0,socialButtons:h0,socialBtn:p0,telegram:u0,instagram:m0,disclaimer:_0},x0="/assets/Pending-wkZkfvzL.lottie",g0="/assets/Again-Cp5Wt6pF.lottie",v0="data:application/octet-stream;base64,UEsDBBQAAAAAALcIclmi1tOfBAEAAAQBAAANAAAAbWFuaWZlc3QuanNvbnsidmVyc2lvbiI6IjEuMCIsInJldmlzaW9uIjoxLCJrZXl3b3JkcyI6IiIsImF1dGhvciI6IkxvdHRpZUZpbGVzIiwiZ2VuZXJhdG9yIjoiZG90TG90dGllLWpzIiwiYW5pbWF0aW9ucyI6W3siaWQiOiJkZjcwYjA3Yy0zMzFmLTRhYWQtOTFhNS0zNDVhOGQ1ZTgzMDciLCJkaXJlY3Rpb24iOjEsInNwZWVkIjoxLCJwbGF5TW9kZSI6Im5vcm1hbCIsImxvb3AiOmZhbHNlLCJhdXRvcGxheSI6ZmFsc2UsImhvdmVyIjpmYWxzZSwiaW50ZXJtaXNzaW9uIjowfV19UEsDBBQAAAAIALcIclmoohb0nQwAAOu8AAA0AAAAYW5pbWF0aW9ucy9kZjcwYjA3Yy0zMzFmLTRhYWQtOTFhNS0zNDVhOGQ1ZTgzMDcuanNvbu1cC2/byBH+K4RQ5OyerIpP2W6uRd4IimuC5lAUcIKClimbNUWpJOWLG/i/d2a5w9cuHZJS4NcokShxl7Ozj+/b/ejlfBtdjY5H7mQ2Mc3ReLRIRsf2dDwK16NjOKzg4MHx99Gxa1rj0YU8xku46OVqE8+vjbd+GMGVZ2dn4hI/TYMsHR2ffBmPIv86SPD7tyI5jOFojkfZ9ejYkYb+ZURhHBgWWEmhfEi9hIu+jVb44YvLLuH0FC//Cl/Mm/EI8lXSjihpCkngcyXpxHK9Mb6n4BDmAfcj+ISMkKea0THHB3aRDbyQ2YQvZTb0Q75lVk9mRZPgM+RLL/x1kFccKzo6T6BuYSZOiBaAPCIhvcCEvLi80kVBkBPyn0zRI/EJpYH1xhnovZMTE/rkYObA2QPoPO8QE+aj44UfpQE4JWoNR9HYH/3swsCuXsbw68Xrl2+MfwbzbJUYn9Bp48B4l6w2a8hwAX5KE7IaaQanwXCtOcbin2wKG4pp6TYHkmAcVZIcmeJCSgRmsWf+Iw6n4CkkCoc/ZcnqMtC7/C7x1xfhHJzOc2m9XuDwVLyG9iu8RtdavEbf8jFZ9eltGEXf8wjzaP3JcDA0Bqno06KjGgOzTMSRrx+OlfavQ0PWw2uv4gyNigHXvAjbJa07U2kW0RK/JX6cLlbJcnQDLuQdJsYRtk4MtbSh7SXsZAvK4a5purZxly2RGqQfiJQcSHgCbJ1MJ543g9Ih64n5hSqap9i2LVOmmAIQtACuCE1sNFFCPhDxFJyoNHSgby7soHpLygRse6gh+CfrKxsoXBoIulQ/YGCYZEEC4wUz1mqPrkADor/EwwBALE00JPpeY1UoUcOqWOhAVmVSZVJlUn0SpFoHfIX8dsW2CtcK+q10z72kVODSKqW+CpN51GehOsZ2GV35ifGH0+W/k+zPn2P8sVr78zC7fh8HSRb6kVhIB2M6nf986c8vx0Ys/mfi/9XY8JfrsbFIgv+OjbNg7l+3nARb53Dhr/7X+vfCGlx1FcF7k7+zV5tkbKTB+Ws8Zn8PvkKe+BTtRZkPTmsdNn4xgsUCmnzvJ3nimfE6Wa2h4TeXib8MzkJ/Ml8tf9rfc5z90kpZvz4WXLSQJdfGt8+xAa9wYey1uPWLYe5TNnzlbQ+FxfCeghlKQBvxZvm34Do1/mJMaxcpF8aBnwRpBpn3snAZ7E9ghARfK9bI4iXkiPcnmAmsirxNw/iKDw4aF9+UPytfhZNYqVv8w3e1YjdGAMP91uz4I92cirqMjYrP2M4tbnTtLPdwX+2Fsi7Q1MazZ+DFc00WfF2Bf1dBtMLOfZH9Bk7tkbsVR8eiDmfh1V52EaavVsv1ZIF+wCD2s3AFI92c7u9Xq0MvQEyPoece6Wwg4HoY8aY6IwKvfayYOitFv+aNtNy78qNNpXnwuNxExTHnjP2x8Stw6CQNYyUHHXNWySCrRdk/voc2ld+Dr+siq6SeDFKbPupHY81z4fEtcNBaeJCjyZntYDQ5h7sYTY52YD+B0ZR/lYYqE0l1ZmrSVx/+85wW/uszZ3pixqtefd7naq95NS4B+hiojVN9o/epjmttUx3X3rI6rliBaAbD3S8Ovrc0UNYCOm86T+n4QkasgjMOzve6MOR0Mp2aArCqyQhsRkF8nl3sXTUT0W00GKbv4zTzoaM+LF4kiX+dc8u+nrY3iORI8PtfjRjUkB+F/wvAunFsnKj58TUd9zyvnv7SmW5yB2HaQf8OTPDKbOccfOEyuzHI8JWvu2WXVBnWwlU6NPZ5sz3FCh0uyK9sAuMUUpqe/H4RgnDZyy98DqMFZkzI+BxGLuBI3/6R8UfAl2aGkA63pMpaiqJ0ydJ3ml2k2sht6uaj+PTnn29vV4GK2ysjhEwVIrno6Tv/1eY9EE7CLPQQmUVR1exFUF+UzfqBi6MWcqpeqxalz/Y5vjHmfja/gBkvSYr2VDLfjNpvGbYo32SVidVUU/rS+XuoffUu95h6bLH0V2vYx4RY9zfUb5tjLH9Z/rL8fVSC5fHIX1tZyA8YTXZtMT90NNmKwHoio0mRv7q5ifXvbvWvrdyy6VMdWyHhntVxagTM+pf1L+tf1r+sf7fWv902xrTI4fUqDXVymM7fQzmsd7nHTCTuA6sV7DMZasRwm1sshlkMsxh+VPLl8YhhrQDtO5h2MZa0f5N+AkNJUcK6eYmV8G6VMGBni+qYCu31rI5Z+0M0K2FWwqyEWQmzEt5aCTc22JsOkIQHTzHIY/szIC17zMeVT9pvLp6KqO85N0We4pP2n1fOm5OpuAh2euMfpsV2dHxQoXwAyKJN6bA7Xbwrm9PlgygtCj6d+1HQlO/i5D3U7hpn+0ycYiHRqFuf68U6oqHbtS6xaGfRzqL9USmtxyPazV2MJmsno8l6qqNJ0e3KrMSifbei3VK2XPSpjqU0Rs/qWLX2YNHOop1FO4t2Fu1bivYyuEKwKAIruNX4Pm2cLB9En8Gl4vnrj2mwOVv9yY/DpVhtvVqB0lvhs/pS8weQCw9lOSCs8+AJ8p47PcrdYupgCuxV2oMYDeJ5bbQ0k5bexP4p4ITkpJHXoINdfKJb/rUe7Kr72TEMhbYo2Ua45uhQjC2Lgcf3tcXYRTHUNo2qGB/WaDLtUJYjy4Jn16tNRcEWXizXUZhtzrq0jitNwcBouD2Zwrk8dEGzgLewVtwEECCqQwGeLABqXS8AnM/jLDStv8blZQfLM2kZuq1u+ZDCNDRbvIPRQ2kUbFSblixUxkSP/jqSRo/0/fUm8tMsxBn++7bMKcEErm72GLSEDOrSLAKibFx1s1/AMMdhxb4LNSniyTQLQHrvYJ3AiIHG6tahbfKEAb1mEvjMHH1Kt3UwQZgyG6AiE59QhXSwQ4Ayc0TtjMdMApKpIEmG0DBLKG3DZCbhylSARd2vImswl5kEOLOBuAFkZhLOzBxoNWxIUjCPtmEzi9CHN5W1dGap2OvIZxYhz1KQJ323Sth1H9hWMf/lkNsNpVmEOKuBuCGcZhH2rBx7Ok6znOGcZhEmLWWWKznNUqe5bpxmETAx8oyW06wSmD36jWBo5TAcwGkWYctqmc3+IZ8N6GCKoGU15rBtac0mRGFkSv3CqUTUNrRmE7xsBV5UkAqvwbRmE+rsBuoG0JpdLC3VtWWxSLPL9eUAXrMJgbaCQMlrtoq/jrxmE/psBX2S1+wSet0Ht02ws3PY7YbXbEKd3UDdEF6zCX92jj8dr9mHw3nNJlDaynxX8pqtTnjdeM0hZGJULy2vOSUyu/ebQziE6IEDec0hcDktU9qHPORHB0sELacxjW1La04h0dQpjRJ2QmsOoctRFRwl7I7WHAKd0wDdAFpzCGqOus4saM0pl5oDaM0hADoKACWtOSr8OtKaQ+BzFPBJWnNK5HUf2y6hzs1Rtxtacwl0bgN0Q2jNJfi56i0VojW3lHG9ac0lULrKfFfSmqvOd91ozSVkugoyJa25JTJ79FtxI6Wh+3qYIHDBIyZaE++i1SmAdjB6XUKc25jcGgSkL6eDfYKbq853lKD0Wg/GcAlyrkbfFXerthJ4HsEPw0fq71cNFngegRA2TOkZwxsi8DyCo9cyG8ruHEQcHmHRu32CVMvoYJuQ6LXNkZ666OxDVB5h0tPc3ZRE5amyrzNRecW9TUX5lUTlqTc4uxGVR2iFXW56ovKG3OH0CKQeiUKxG26nAZgPZrOJZboQXll8EU/MwenirEyvhWjWJOI1GlNFEGf7aHIItynzjPIXGqgn0E8Z4zlLNjsN8fwQgiU3tms+msDJoleKwMlAf4MDJ8vgwXhTHYMH29+NHgyMooke3BqQvV+o5cZWV7m/1TEneAMLQeoWu1txudEIb8+RiTkyMW9sfehbEXlj691vRXw8G1s5MvHdjyaOTMyRie/P4oC3tvLWVt7ayltbH+LWVo5MzJGJvz/Dsfx9wIKF5e/dC5bHI385MvHdjyaOTMyRie/R6oD1L+tf1r+sfx+m/uXIxByZmMUwi2EWwyyGOTLxAxtKHJmYIxPfo6UBK2FWwqyEWQk/TCV8fyMTe5PZkSP3bmtCE/+gYg+mE/uwERHZhKfQxfuHF21RMGZ82DsvGh/NqAVkpi3r5swdizcHZNasFzggc+3F9yoeirrkexV3LjAfz70KDsh896OJAzJzQOb7sjTgexV8r4LvVfC9iod4r4IDMnNAZg7IzAGZOSAzB2TmgMwckJkDMnNAZg7IzAGZOSAzB2TmgMwckJkDMnNAZg7IzAGZOSAzB2TmgMwckJkDMnNA5qcekLk1HjOkL/3kMkgQIl9u/g9QSwECFAAUAAAAAAC3CHJZotbTnwQBAAAEAQAADQAAAAAAAAAAAAAAAAAAAAAAbWFuaWZlc3QuanNvblBLAQIUABQAAAAIALcIclmoohb0nQwAAOu8AAA0AAAAAAAAAAAAAAAAAC8BAABhbmltYXRpb25zL2RmNzBiMDdjLTMzMWYtNGFhZC05MWE1LTM0NWE4ZDVlODMwNy5qc29uUEsFBgAAAAACAAIAnQAAAB4OAAAAAA==",f0="data:application/octet-stream;base64,UEsDBBQAAAAIABqvj1lNGrCthgAAAMUAAAANAAAAbWFuaWZlc3QuanNvbpXNQQ6CMBCF4bvM2iKFopQVF/AExsWUDlpTWtOOJoZwd7tyz+69xZd/hQ+l7GKAASQc4E6BEnJM5Y82so/Mjo7/JZ55rCtd1cIQYyXbYvDNj30guAW5RDMM1xWcLdZM1NWq6YTU2ArVkxa9PBmhm/ncKWXkpOZCXx6/l2ipiBDTgh622/YDUEsDBBQAAAAIABqvj1nz1SaxKgIAAA8IAAA0AAAAYW5pbWF0aW9ucy9iY2U1MDQyNS0xOWEzLTQ4ZTktODE2Yi05MmY3NTQ0YjFjNGYuanNvbtVVwY6bMBD9lZXPDjIxYODee6X2hjjQxCkUSCKM2q6i/HvfDGSBhEitVK20SsLAm7HnzXgeuYifIhWhZ7xQSHHoRBopKaqzSGFOMAnsL6CBFOVgji1W7Eq7q7Fiv99zaOGc7Z1Is1yKpni1Hd1f3tzVEdaXon8V6f0WDknhqrHiIk50KXhNDVipqxTwzzBCwGuGZHor8VU5PADnHiXxIZw3n63QntZajgZp8istRnYEuLI424E/8RXfO7Csega4EMSww5VwDLzftkYIAilxLmdXtAWbr+I4gCxLvG0oNxHQzdYzoeS7AVReSGE7kR6Kxlkiyv37XPTliw8GJSgNLjky7lvq68iLejtwJ+A3dcULIh9bIjTzqTvc9ZsHqdnDfUPVAQ6MusFdogzDUBAEgILsyqEtD5IQcAYVpv61q9oX4u+eFOB6wKh4cZae7ydJYhI/jlQkFdqkTOxvdaxMgscgjFViTBwa35dTWXe8MMszTANpkGcL84PNN/CDj2l+6btTbZ/1mKbibhDHYXscwrURDJXEjzyPA77G3PF0LcLcMhNBY3+LozuculZccZgLtY31TfUg4E7uaD49ciSVuxAxWrQQcdXtGvvRVDy9jIRtZlIZ9w21DDXlWz9eLvxT01RnZ3mK/0aFU9k3tazpUgdPZPmgykmBgySNmal0Pvz/Jc1GRw+ZxjwfQNbg1zY8s++nbgV18wvzfdR9k+G/yhvutujq4f86v/4BUEsBAhQAFAAAAAgAGq+PWU0asK2GAAAAxQAAAA0AAAAAAAAAAAAAAAAAAAAAAG1hbmlmZXN0Lmpzb25QSwECFAAUAAAACAAar49Z89UmsSoCAAAPCAAANAAAAAAAAAAAAAAAAACxAAAAYW5pbWF0aW9ucy9iY2U1MDQyNS0xOWEzLTQ4ZTktODE2Yi05MmY3NTQ0YjFjNGYuanNvblBLBQYAAAAAAgACAJ0AAAAtAwAAAAA=",j0=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18 1.897-.962 6.502-1.359 8.627-.168.9-.5 1.201-.82 1.23-.697.064-1.226-.461-1.901-.903-1.056-.697-1.653-1.123-2.678-1.799-1.185-.781-.417-1.21.258-1.911.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.139-5.062 3.345-.479.314-.913.468-1.302.459-.428-.01-1.254-.241-1.866-.44-.751-.244-1.349-.374-1.297-.789.027-.216.324-.437.893-.663 3.498-1.524 5.831-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.477-1.635.099-.002.321.023.473.146.158.143.201.338.223.519.02.164.01.332.01.332z"})}),y0=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),w0=({color:t})=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:t||"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),b0={pending:{color:"#3598FE",src:x0,titleKey:"ReviewStatus.PendingTitle",gradient:"linear-gradient(180deg, #F0F4FF 0%, #FFFFFF 100%)"},again:{color:"#FFC107",src:g0,titleKey:"ReviewStatus.AgainTitle",gradient:"linear-gradient(180deg, #FFF8E1 0%, #FFFFFF 100%)"},fail:{color:"#F44336",src:v0,titleKey:"ReviewStatus.FailTitle",gradient:"linear-gradient(180deg, #FFEBEE 0%, #FFFFFF 100%)"},approved:{color:"#4CAF50",src:f0,titleKey:"ReviewStatus.ApprovedTitle",gradient:"linear-gradient(180deg, #E8F5E9 0%, #FFFFFF 100%)"}},mn=({statusKey:t,details:s})=>{const n=nt(),{t:i}=ae(),a=ot(),[r,l]=c.useState(!1),d=(t==null?void 0:t.toLowerCase())||"";let o="pending";d.includes("approved")?o="approved":d.includes("rejected")||d.includes("fail")?o="fail":d.includes("resubmission")&&(o="again");const h=b0[o],x=o==="approved",w=o==="again";let N="На проверке";x?N="Ура! Вы приняты!":o==="fail"?N="Анкета отклонена":w&&(N="Требуются исправления");const v=async()=>{if(x){l(!0);try{await a(Bt()).unwrap()}catch(j){console.error(j)}finally{l(!1),n("/cabinet/sitter-dashboard")}}else n("/cabinet/profile")},m=()=>{window.location.reload()};return e.jsx("div",{className:et.pageWrapper,style:{background:h.gradient},children:e.jsxs("div",{className:Xe.stepCard,children:[e.jsx("div",{className:et.animationContainer,children:e.jsx(ta,{src:h.src,autoplay:!0,loop:!x,style:{width:"100%",height:"100%"}})}),e.jsx("h1",{className:et.title,style:{color:h.color},children:i(h.titleKey,N)}),e.jsx("p",{className:et.message,children:s.message||s.admin_message}),s.admin_message&&e.jsxs("div",{className:et.adminMessageCard,style:{borderLeftColor:h.color},children:[e.jsxs("div",{className:et.adminHeader,children:[e.jsx(w0,{color:h.color}),e.jsx("span",{style:{color:h.color},children:i("ReviewStatus.AdminMessagePrefix","Комментарий администратора:")})]}),e.jsx("p",{className:et.adminText,children:s.admin_message})]}),e.jsxs("div",{className:et.actions,children:[w&&e.jsx("button",{className:Xe.btnPrimary,onClick:m,children:i("ReviewStatus.RetrySubmissionButton","Исправить и отправить")}),e.jsx("button",{className:et.secondaryBtn,onClick:v,disabled:r,children:r?"Обновление...":x?i("common.goToDashboard","Перейти к работе"):i("ReviewStatus.GoBackButton","В профиль")})]}),(o==="pending"||o==="again")&&e.jsxs("div",{className:et.socialCard,children:[e.jsx("h3",{children:i("ReviewStatus.SocialCardTitle","Подружимся в соцсетях? 🤗")}),e.jsx("p",{children:i("ReviewStatus.SocialCardSubtitle","Пока мы проверяем анкету, заглядывайте к нам! Там много полезного.")}),e.jsxs("div",{className:et.socialButtons,children:[e.jsxs("a",{href:"https://t.me/petsokru",target:"_blank",rel:"noreferrer",className:`${et.socialBtn} ${et.telegram}`,children:[e.jsx(j0,{})," Telegram"]}),e.jsxs("a",{href:"https://www.instagram.com/petsok.ru",target:"_blank",rel:"noreferrer",className:`${et.socialBtn} ${et.instagram}`,children:[e.jsx(y0,{})," Instagram *"]})]}),e.jsx("small",{className:et.disclaimer,children:i("ReviewStatus.MetaDisclaimer","* Деятельность Meta Platforms Inc. (Facebook, Instagram) запрещена на территории РФ как экстремистская.")})]})]})})},tt={APPLICATION_NOT_STARTED:"application_not_started",KYC_SUBMISSION_PENDING:"kyc_submission_pending",KYC_RESUBMISSION_REQUIRED:"kyc_resubmission_required",GENERAL_TESTS_PENDING:"general_tests_pending",SERVICE_SETTINGS_PENDING_SUBMISSION:"service_settings_pending_submission",CARD_SETUP_PENDING:"card_setup_pending",SUBSCRIPTION_OFFER_PENDING:"subscription_offer_pending",ADDITIONAL_PROFILE_PENDING_SUBMISSION:"additional_profile_pending_submission",ADDITIONAL_PROFILE_RESUBMISSION_REQUIRED:"additional_profile_resubmission_required",KYC_PENDING_REVIEW:"kyc_pending_review",ADDITIONAL_PROFILE_PENDING_REVIEW:"additional_profile_pending_review",APPLICATION_PENDING_ADMIN_REVIEW:"application_pending_admin_review",APPLICATION_APPROVED_BY_ADMIN:"application_approved_by_admin"},N0=()=>{var x;nt();const[t,s]=c.useState(null),[n,i]=c.useState(!0),[a,r]=c.useState(0),l=()=>{i(!0),r(w=>w+1)};if(c.useEffect(()=>{(async()=>{var N;try{const v=await Bn();console.log("Worker Status Response:",v),s(v)}catch(v){((N=v.response)==null?void 0:N.status)===404?s({current_stage_key:tt.APPLICATION_NOT_STARTED}):console.error("Status fetch error",v)}finally{i(!1)}})()},[a]),n)return e.jsx("div",{className:Xe.centerLoader,children:"Загрузка статуса..."});if(!t)return e.jsx("div",{children:"Ошибка загрузки данных."});const d=(x=t.current_stage_key)==null?void 0:x.toLowerCase(),o=t.details||{},h=()=>{switch(d){case tt.APPLICATION_NOT_STARTED:return e.jsx(L_,{onNext:l});case tt.KYC_SUBMISSION_PENDING:case tt.KYC_RESUBMISSION_REQUIRED:return e.jsx(c2,{onNext:l,isResubmission:d===tt.KYC_RESUBMISSION_REQUIRED,adminMessage:o.admin_message});case tt.GENERAL_TESTS_PENDING:return e.jsx(Ds,{onNext:l});case tt.SERVICE_SETTINGS_PENDING_SUBMISSION:return e.jsx(Ux,{onNext:l});case tt.CARD_SETUP_PENDING:return e.jsx(ig,{onNext:l});case tt.SUBSCRIPTION_OFFER_PENDING:return e.jsx(Cg,{onNext:l});case tt.ADDITIONAL_PROFILE_PENDING_SUBMISSION:case tt.ADDITIONAL_PROFILE_RESUBMISSION_REQUIRED:return e.jsx(e0,{onNext:l,isResubmission:d===tt.ADDITIONAL_PROFILE_RESUBMISSION_REQUIRED,adminMessage:o.admin_message});case tt.KYC_PENDING_REVIEW:case tt.ADDITIONAL_PROFILE_PENDING_REVIEW:case tt.APPLICATION_PENDING_ADMIN_REVIEW:case tt.APPLICATION_APPROVED_BY_ADMIN:default:return d!=null&&d.includes("rejected")||d!=null&&d.includes("fail")?e.jsx(mn,{statusKey:d,details:o}):e.jsx(mn,{statusKey:d,details:o})}};return e.jsx("div",{className:Xe.wizardContainer,children:h()})},S0="_container_t1yhq_1",k0="_loaderContainer_t1yhq_7",C0="_spinner_t1yhq_14",I0="_spin_t1yhq_14",A0="_errorContainer_t1yhq_31",B0="_header_t1yhq_38",P0="_backBtn_t1yhq_42",T0="_headerTitle_t1yhq_60",L0="_statusBadge_t1yhq_79",M0="_pending_worker_t1yhq_88",E0="_pending_platform_payment_t1yhq_92",R0="_confirmed_t1yhq_96",$0="_in_progress_t1yhq_100",F0="_completed_t1yhq_104",O0="_canceled_client_t1yhq_108",D0="_canceled_worker_t1yhq_108",W0="_contentGrid_t1yhq_113",z0="_mainColumn_t1yhq_125",G0="_sidebar_t1yhq_131",U0="_card_t1yhq_137",H0="_workerCard_t1yhq_138",q0="_actionsCard_t1yhq_139",V0="_cardTitle_t1yhq_154",K0="_warningBox_t1yhq_163",Y0="_warningIcon_t1yhq_172",Z0="_warningContent_t1yhq_176",Q0="_detailsList_t1yhq_189",X0="_detailRow_t1yhq_195",J0="_detailLabel_t1yhq_200",ev="_detailValue_t1yhq_210",tv="_billingList_t1yhq_215",sv="_emptyText_t1yhq_221",nv="_billingItem_t1yhq_228",av="_billingHeader_t1yhq_235",iv="_periodDate_t1yhq_242",rv="_billingStatus_t1yhq_249",ov="_paid_t1yhq_255",cv="_pending_payment_t1yhq_259",lv="_payment_failed_t1yhq_263",dv="_billingRow_t1yhq_268",hv="_moneyBold_t1yhq_278",pv="_tasksList_t1yhq_283",uv="_taskItem_t1yhq_291",mv="_taskDate_t1yhq_301",_v="_day_t1yhq_312",xv="_month_t1yhq_317",gv="_taskInfo_t1yhq_323",vv="_taskTime_t1yhq_328",fv="_taskService_t1yhq_333",jv="_taskStatus_t1yhq_338",yv="_showMoreBtn_t1yhq_344",wv="_workerHeader_t1yhq_358",bv="_avatar_t1yhq_364",Nv="_workerInfo_t1yhq_370",Sv="_workerName_t1yhq_370",kv="_rating_t1yhq_376",Cv="_reviewsCount_t1yhq_383",Iv="_workerActions_t1yhq_389",Av="_chatBtn_t1yhq_394",Bv="_profileLink_t1yhq_413",Pv="_noWorkerState_t1yhq_428",Tv="_payBtn_t1yhq_442",Lv="_cancelBtn_t1yhq_458",Y={container:S0,loaderContainer:k0,spinner:C0,spin:I0,errorContainer:A0,header:B0,backBtn:P0,headerTitle:T0,statusBadge:L0,pending_worker:M0,pending_platform_payment:E0,confirmed:R0,in_progress:$0,completed:F0,canceled_client:O0,canceled_worker:D0,contentGrid:W0,mainColumn:z0,sidebar:G0,card:U0,workerCard:H0,actionsCard:q0,cardTitle:V0,warningBox:K0,warningIcon:Y0,warningContent:Z0,detailsList:Q0,detailRow:X0,detailLabel:J0,detailValue:ev,billingList:tv,emptyText:sv,billingItem:nv,billingHeader:av,periodDate:iv,billingStatus:rv,paid:ov,pending_payment:cv,payment_failed:lv,billingRow:dv,moneyBold:hv,tasksList:pv,taskItem:uv,taskDate:mv,day:_v,month:xv,taskInfo:gv,taskTime:vv,taskService:fv,taskStatus:jv,showMoreBtn:yv,workerHeader:wv,avatar:bv,workerInfo:Nv,workerName:Sv,rating:kv,reviewsCount:Cv,workerActions:Iv,chatBtn:Av,profileLink:Bv,noWorkerState:Pv,payBtn:Tv,cancelBtn:Lv},Mv=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),Ev=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),_n=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),Rv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),$v=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Fv=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#FFC107",stroke:"#FFC107",strokeWidth:"2",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Ov=()=>{var u,y,_,S,B,b;const{id:t}=Lt(),s=nt(),{t:n}=ae(),[i,a]=c.useState(null),[r,l]=c.useState(!0),[d,o]=c.useState(!1),h=async()=>{try{l(!0);const L=await ni(t,"worker.avatar,tasks,billing_periods.payment,billing_periods.payout,reviews");a(L.data||L)}catch(p){console.error("Failed to fetch order",p)}finally{l(!1)}};c.useEffect(()=>{t&&h()},[t]);const x=async()=>{var p,L;if((L=(p=i==null?void 0:i.worker)==null?void 0:p.data)!=null&&L.id)try{const O=await Ln(i.id,i.worker.data.id);O!=null&&O.id?s(`/cabinet/chat/${O.id}`):s("/cabinet/chat")}catch{alert("Не удалось открыть чат")}},w=async()=>{if(window.confirm(n("orders.confirmCancel","Вы уверены, что хотите отменить заказ?")))try{await ai(i.id,{reason:"Client cancelled via web"}),h()}catch{alert("Ошибка отмены")}},N=c.useMemo(()=>{var p;return(p=i==null?void 0:i.billing_periods)!=null&&p.data?i.billing_periods.data.reduce((L,O)=>{const F=parseFloat(String(O.amount_payable_directly_to_worker||O.amount_payable_directly||"0"));return L+(isNaN(F)?0:F)},0):0},[i]);if(r)return e.jsx("div",{className:Y.loaderContainer,children:e.jsx("div",{className:Y.spinner})});if(!i)return e.jsx("div",{className:Y.errorContainer,children:"Заказ не найден"});const v=(u=i.worker)==null?void 0:u.data,m=((y=i.billing_periods)==null?void 0:y.data)||[],j=`orderStatus.${i.status}`,P=["pending_platform_payment","pending_platform_fee","recurring_payment_failed"].includes(i.status),g=i.amount_due_to_platform||0;return e.jsxs("div",{className:Y.container,children:[e.jsxs("div",{className:Y.header,children:[e.jsxs("button",{className:Y.backBtn,onClick:()=>s("/cabinet/orders"),children:[e.jsx(Mv,{})," ",e.jsx("span",{children:n("common.back","Назад")})]}),e.jsxs("div",{className:Y.headerTitle,children:[e.jsxs("h1",{children:[n(`header.services.${i.service_type}`,"Заказ")," #",i.id]}),e.jsx("span",{className:`${Y.statusBadge} ${Y[i.status]}`,children:n(j,i.status)})]})]}),e.jsxs("div",{className:Y.contentGrid,children:[e.jsxs("div",{className:Y.mainColumn,children:[N>0&&e.jsxs("div",{className:Y.warningBox,children:[e.jsx("div",{className:Y.warningIcon,children:e.jsx(_n,{})}),e.jsxs("div",{className:Y.warningContent,children:[e.jsx("h4",{children:n("orders.paymentRequiredTitle","Оплата исполнителю")}),e.jsx("p",{children:n("orders.directPaymentWarningModal",{amount:N,defaultValue:`Необходимо оплатить ${N} напрямую исполнителю.`})})]})]}),e.jsxs("div",{className:Y.card,children:[e.jsx("h3",{className:Y.cardTitle,children:n("orders.orderDetails","Детали заказа")}),e.jsxs("div",{className:Y.detailsList,children:[e.jsxs("div",{className:Y.detailRow,children:[e.jsxs("div",{className:Y.detailLabel,children:[e.jsx(Rv,{})," ",n("common.dates","Даты")]}),e.jsxs("div",{className:Y.detailValue,children:[Le(i.start_date_local).format("D MMMM")," - ",Le(i.end_date_local).format("D MMMM YYYY")]})]}),e.jsxs("div",{className:Y.detailRow,children:[e.jsxs("div",{className:Y.detailLabel,children:[e.jsx($v,{})," ",n("common.duration","Длительность")]}),e.jsxs("div",{className:Y.detailValue,children:[i.duration_minutes||0," ",n("common.min","мин")]})]}),e.jsxs("div",{className:Y.detailRow,children:[e.jsxs("div",{className:Y.detailLabel,children:[e.jsx(_n,{})," ",n("orders.pricePerUnit","Стоимость")]}),e.jsxs("div",{className:Y.detailValue,children:[i.price_per_rate," ",i.currency]})]})]})]}),e.jsxs("div",{className:Y.card,children:[e.jsx("h3",{className:Y.cardTitle,children:n("orders.financialDetails","Финансы")}),e.jsxs("div",{className:Y.billingList,children:[m.length===0&&e.jsx("p",{className:Y.emptyText,children:"Информация о периодах оплаты отсутствует"}),m.map(p=>e.jsxs("div",{className:Y.billingItem,children:[e.jsxs("div",{className:Y.billingHeader,children:[e.jsxs("span",{className:Y.periodDate,children:[Le(p.period_start).format("D MMM")," - ",Le(p.period_end).format("D MMM")]}),e.jsx("span",{className:`${Y.billingStatus} ${Y[p.status]}`,children:p.status==="paid"?n("common.paid","Оплачено"):n("common.pending","Ожидает")})]}),e.jsxs("div",{className:Y.billingRow,children:[e.jsx("span",{children:"Стоимость услуг"}),e.jsxs("span",{children:[p.gross_amount," ",i.currency]})]}),e.jsxs("div",{className:Y.billingRow,children:[e.jsx("span",{children:"Предоплата (в приложении)"}),e.jsxs("span",{className:Y.moneyBold,children:[p.amount_due_from_client," ",i.currency]})]}),parseFloat(p.amount_payable_directly_to_worker)>0&&e.jsxs("div",{className:Y.billingRow,children:[e.jsx("span",{children:"На руки исполнителю"}),e.jsxs("span",{className:Y.moneyBold,children:[p.amount_payable_directly_to_worker," ",i.currency]})]})]},p.id))]})]}),((S=(_=i.tasks)==null?void 0:_.data)==null?void 0:S.length)>0&&e.jsxs("div",{className:Y.card,children:[e.jsx("h3",{className:Y.cardTitle,children:n("orders.visitsSchedule","Расписание")}),e.jsx("ul",{className:Y.tasksList,children:i.tasks.data.slice(0,5).map(p=>e.jsxs("li",{className:Y.taskItem,children:[e.jsxs("div",{className:Y.taskDate,children:[e.jsx("span",{className:Y.day,children:Le(p.scheduled_start_at_local).format("DD")}),e.jsx("span",{className:Y.month,children:Le(p.scheduled_start_at_local).format("MMM")})]}),e.jsxs("div",{className:Y.taskInfo,children:[e.jsx("span",{className:Y.taskTime,children:Le(p.scheduled_start_at_local).format("HH:mm")}),e.jsx("span",{className:Y.taskService,children:n(`header.services.${p.service_type}`,p.service_type)})]}),e.jsx("span",{className:`${Y.taskStatus} ${Y[p.status]}`,children:p.status})]},p.id))})]})]}),e.jsxs("div",{className:Y.sidebar,children:[e.jsxs("div",{className:Y.workerCard,children:[e.jsx("h3",{className:Y.cardTitle,children:"Исполнитель"}),v?e.jsxs("div",{className:Y.workerContent,children:[e.jsxs("div",{className:Y.workerHeader,children:[e.jsx("img",{src:((b=(B=v.avatar)==null?void 0:B.data)==null?void 0:b.preview_url)||"/placeholder-user.jpg",alt:v.first_name,className:Y.avatar}),e.jsxs("div",{className:Y.workerInfo,children:[e.jsxs("h4",{className:Y.workerName,children:[v.first_name," ",v.last_name]}),e.jsxs("div",{className:Y.rating,children:[e.jsx(Fv,{}),e.jsx("span",{children:v.calculated_rating||"5.0"}),e.jsxs("span",{className:Y.reviewsCount,children:["(",v.reviews_count||0,")"]})]})]})]}),e.jsxs("div",{className:Y.workerActions,children:[e.jsxs("button",{className:Y.chatBtn,onClick:x,children:[e.jsx(Ev,{})," Сообщение"]}),e.jsx(Ge,{to:`/sitter/${v.id}`,className:Y.profileLink,children:"Профиль"})]})]}):e.jsx("div",{className:Y.noWorkerState,children:e.jsx("p",{children:"Исполнитель еще не назначен"})})]}),e.jsxs("div",{className:Y.actionsCard,children:[P&&e.jsxs("button",{className:Y.payBtn,onClick:()=>o(!0),children:["Оплатить ",g," ",i.currency]}),["pending_worker","pending_platform_payment"].includes(i.status)&&e.jsx("button",{className:Y.cancelBtn,onClick:w,children:"Отменить заказ"})]})]})]}),d&&e.jsx(Kn,{isOpen:d,onClose:()=>o(!1),order:i,userBalance:0,paymentMethods:[],loadingData:!1,onPaymentSuccess:()=>{o(!1),h()}})]})},Dv="_container_xei2n_1",Wv="_pageTitle_xei2n_7",zv="_contentGrid_xei2n_20",Gv="_mainColumn_xei2n_31",Uv="_sidebar_xei2n_32",Hv="_card_xei2n_38",qv="_summaryCard_xei2n_39",Vv="_errorBorder_xei2n_46",Kv="_cardTitle_xei2n_51",Yv="_summaryTitle_xei2n_52",Zv="_cardHeaderRow_xei2n_64",Qv="_servicesGrid_xei2n_74",Xv="_serviceItem_xei2n_80",Jv="_selected_xei2n_99",ef="_serviceName_xei2n_103",tf="_serviceIcon_xei2n_106",sf="_serviceDesc_xei2n_134",nf="_tabs_xei2n_142",af="_tab_xei2n_142",rf="_active_xei2n_161",of="_dateInputs_xei2n_167",cf="_formGroup_xei2n_172",lf="_input_xei2n_184",df="_weekdaysBlock_xei2n_197",hf="_weekdaysRow_xei2n_201",pf="_weekdayBtn_xei2n_208",uf="_subLabel_xei2n_228",mf="_chipsRow_xei2n_237",_f="_chip_xei2n_237",xf="_timeSelectRow_xei2n_263",gf="_selectWrapper_xei2n_275",vf="_select_xei2n_99",ff="_chevronIcon_xei2n_296",jf="_petsGrid_xei2n_305",yf="_petCard_xei2n_311",wf="_petAvatar_xei2n_323",bf="_placeholder_xei2n_337",Nf="_checkBadge_xei2n_348",Sf="_petName_xei2n_367",kf="_linkBtn_xei2n_378",Cf="_emptyText_xei2n_390",If="_loader_xei2n_396",Af="_promoRow_xei2n_402",Bf="_btnSecondary_xei2n_407",Pf="_btnDanger_xei2n_407",Tf="_successText_xei2n_430",Lf="_errorText_xei2n_437",Mf="_summaryRow_xei2n_443",Ef="_divider_xei2n_459",Rf="_btnPrimary_xei2n_465",z={container:Dv,pageTitle:Wv,contentGrid:zv,mainColumn:Gv,sidebar:Uv,card:Hv,summaryCard:qv,errorBorder:Vv,cardTitle:Kv,summaryTitle:Yv,cardHeaderRow:Zv,servicesGrid:Qv,serviceItem:Xv,selected:Jv,serviceName:ef,serviceIcon:tf,serviceDesc:sf,tabs:nf,tab:af,active:rf,dateInputs:of,formGroup:cf,input:lf,weekdaysBlock:df,weekdaysRow:hf,weekdayBtn:pf,subLabel:uf,chipsRow:mf,chip:_f,timeSelectRow:xf,selectWrapper:gf,select:vf,chevronIcon:ff,petsGrid:jf,petCard:yf,petAvatar:wf,placeholder:bf,checkBadge:Nf,petName:Sf,linkBtn:kf,emptyText:Cf,loader:If,promoRow:Af,btnSecondary:Bf,btnDanger:Pf,successText:Tf,errorText:Lf,summaryRow:Mf,divider:Ef,btnPrimary:Rf},$f=()=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),xn=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.65 6.35C16.2 7.8 14.2 7.8 12.75 6.35C11.3 4.9 11.3 2.9 12.75 1.45C14.2 0 16.2 0 17.65 1.45C19.1 2.9 19.1 4.9 17.65 6.35ZM6.35 6.35C7.8 4.9 7.8 2.9 6.35 1.45C4.9 0 2.9 0 1.45 1.45C0 2.9 0 4.9 1.45 6.35C2.9 7.8 4.9 7.8 6.35 6.35ZM22.55 1.45C21.1 0 19.1 0 17.65 1.45C16.2 2.9 16.2 4.9 17.65 6.35C19.1 7.8 21.1 7.8 22.55 6.35C24 4.9 24 2.9 22.55 1.45ZM1.45 12.55C2.9 11.1 4.9 11.1 6.35 12.55C7.8 14 7.8 16 6.35 17.45C4.9 18.9 2.9 18.9 1.45 17.45C0 16 0 14 1.45 12.55ZM12 9C9.24 9 7 11.24 7 14C7 16.76 9.24 19 12 19C14.76 19 17 16.76 17 14C17 11.24 14.76 9 12 9ZM12 24C9.24 24 7 21.76 7 19H17C17 21.76 14.76 24 12 24Z"})}),Ff=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),xt={BOARDING:"boarding",HOUSE_SITTING:"house_sitting",DROP_IN_VISIT:"drop_in_visit",DOGGY_DAY_CARE:"doggy_day_care",WALKING:"walking"},gn={[xt.BOARDING]:{icon:kt,titleKey:"bookingScreen.serviceTypes.boarding.name",descKey:"bookingScreen.serviceTypes.boarding.description",defaultTitle:"Передержка",defaultDesc:"Ваш питомец ночует у ситтера"},[xt.HOUSE_SITTING]:{icon:Xt,titleKey:"bookingScreen.serviceTypes.house_sitting.name",descKey:"bookingScreen.serviceTypes.house_sitting.description",defaultTitle:"Няня (у вас дома)",defaultDesc:"Ситтер присматривает за питомцем у вас дома"},[xt.DROP_IN_VISIT]:{icon:Zt,titleKey:"bookingScreen.serviceTypes.drop_in_visit.name",descKey:"bookingScreen.serviceTypes.drop_in_visit.description",defaultTitle:"Визиты",defaultDesc:"Ситтер заходит покормить и поиграть"},[xt.DOGGY_DAY_CARE]:{icon:Qt,titleKey:"bookingScreen.serviceTypes.doggy_day_care.name",descKey:"bookingScreen.serviceTypes.doggy_day_care.description",defaultTitle:"Дневной уход",defaultDesc:"Питомец проводит день у ситтера, ночует дома"},[xt.WALKING]:{icon:Yt,titleKey:"bookingScreen.serviceTypes.walking.name",descKey:"bookingScreen.serviceTypes.walking.description",defaultTitle:"Выгул",defaultDesc:"Прогулка с вашей собакой в вашем районе"}},Of=[xt.BOARDING,xt.HOUSE_SITTING],Df=[xt.DROP_IN_VISIT,xt.WALKING],Wf=xt.DOGGY_DAY_CARE,rt={ONE_TIME:"one_time",RECURRING:"recurring"},zf=[{id:1,key:"mon",label:"Пн"},{id:2,key:"tue",label:"Вт"},{id:3,key:"wed",label:"Ср"},{id:4,key:"thu",label:"Чт"},{id:5,key:"fri",label:"Пт"},{id:6,key:"sat",label:"Сб"},{id:0,key:"sun",label:"Вс"}],Gf=[{id:"15m",key:"min15",label:"15 мин"},{id:"30m",key:"min30",label:"30 мин"},{id:"1h",key:"hr1",label:"1 час"}],Uf=Array.from({length:14},(t,s)=>`${String(s+7).padStart(2,"0")}:00`),Hf=3,qf=()=>{const{t}=ae(),s=nt(),{activeServices:n,isConfigLoaded:i}=Be(M=>M.config),[a,r]=c.useState(null),[l,d]=c.useState(rt.ONE_TIME),[o,h]=c.useState(""),[x,w]=c.useState(""),[N,v]=c.useState(""),[m,j]=c.useState([]),[P,g]=c.useState(null),[u,y]=c.useState(1),[_,S]=c.useState({}),[B,b]=c.useState([]),[p,L]=c.useState([]),[O,F]=c.useState(""),[A,T]=c.useState(null),[E,C]=c.useState(!1),[f,k]=c.useState(!1),[D,W]=c.useState({}),[H,Q]=c.useState(!0),$=c.useMemo(()=>a&&Of.includes(a),[a]),R=c.useMemo(()=>a&&Df.includes(a),[a]),X=c.useMemo(()=>a===Wf,[a]),te=$?rt.ONE_TIME:l;c.useEffect(()=>{In().then(M=>{b(M),Q(!1)}).catch(M=>{console.error(M),Q(!1)})},[]);const oe=c.useMemo(()=>{const M=Object.values(xt);return i?M.filter(K=>n.includes(K)):M},[n,i]),Me=M=>{a!==M&&(r(M),h(""),w(""),v(""),j([]),g(null),y(1),S({}),W({}))},ge=M=>{if(!R&&!X)return!1;const K=te===rt.RECURRING?N:o;if(!K||!Le(K).isSame(Le(),"day"))return!1;const fe=Le(`${K} ${M}`,"YYYY-MM-DD HH:mm"),q=Le().add(Hf,"hours");return fe.isBefore(q)},ve=()=>{const M={};return a||(M.service=t("bookingScreen.errors.selectService","Выберите услугу")),a&&(te===rt.RECURRING?(N||(M.when=t("bookingScreen.errors.selectStartDate","Выберите дату начала")),m.length===0&&(M.when=t("bookingScreen.errors.selectRecurringDays","Выберите дни повторения")),(R||X)&&!P&&(M.when=t("bookingScreen.errors.selectDuration","Выберите длительность"))):(o||(M.when=t("bookingScreen.errors.selectStartDate","Выберите дату начала")),!x&&!R&&!X&&(M.when=t("bookingScreen.errors.selectEndDate","Выберите дату окончания")),x&&Le(x).isBefore(o)&&(M.when=t("bookingScreen.errors.endDateBeforeStart","Дата окончания не может быть раньше начала")),(R||X)&&!P&&(M.when=t("bookingScreen.errors.selectDuration","Выберите длительность"))),(R||X)&&u>0&&Object.keys(_).length<u&&(M.when=t("bookingScreen.errors.setVisitTime","Укажите время визита"))),p.length===0&&(M.pets=t("bookingScreen.errors.selectPet","Выберите питомца")),W(M),Object.keys(M).length===0},Fe=async()=>{var K;if(!ve())return;k(!0);const M={service_type:a,schedule_type:te,pets:p,start_date:te===rt.RECURRING?N:o,end_date:te===rt.RECURRING?null:$||R?x:o,recurring_days:te===rt.RECURRING?m:null,duration:P,visits_per_day:R||X?u:null,visit_times:(R||X)&&u>0?_:null,promo_code:(A==null?void 0:A.code)||O.trim()||null};try{const fe=await ti(M);fe.status==="success"||(K=fe.data)!=null&&K.id?(typeof AppMetrica<"u"&&AppMetrica.reportEvent("booking_create_order_succeeded",{service:a}),s("/cabinet/orders")):alert(fe.message||t("bookingScreen.errors.unknownError","Неизвестная ошибка"))}catch(fe){console.error(fe),alert(fe.message||t("bookingScreen.errors.unknownError"))}finally{k(!1)}},ye=async()=>{if(O.trim()){C(!0);try{const M=await ei({code:O});M&&M.data&&(T(M.data),W(K=>({...K,promo:""})))}catch{W(K=>({...K,promo:t("bookingScreen.errors.promoCodeInvalid","Неверный промокод")})),T(null)}finally{C(!1)}}},Ce=M=>{const K=gn[M];return t(K==null?void 0:K.titleKey,(K==null?void 0:K.defaultTitle)||M)};return e.jsxs("div",{className:z.container,children:[e.jsx("h1",{className:z.pageTitle,children:t("bookingScreen.title","Бронирование")}),e.jsxs("div",{className:z.contentGrid,children:[e.jsxs("div",{className:z.mainColumn,children:[e.jsxs("div",{className:`${z.card} ${D.service?z.errorBorder:""}`,children:[e.jsx("h3",{className:z.cardTitle,children:t("bookingScreen.sections.service.title","Что нужно?")}),e.jsx("div",{className:z.servicesGrid,children:oe.map(M=>{const K=gn[M],fe=(K==null?void 0:K.icon)||xn,q=a===M;return e.jsxs("div",{className:`${z.serviceItem} ${q?z.selected:""}`,onClick:()=>Me(M),children:[e.jsx("div",{className:z.serviceIcon,children:e.jsx(fe,{width:28,height:28,color:q?"#3598FE":"#718096"})}),e.jsx("span",{className:z.serviceName,children:t(K==null?void 0:K.titleKey,K==null?void 0:K.defaultTitle)}),e.jsx("p",{className:z.serviceDesc,children:t(K==null?void 0:K.descKey,K==null?void 0:K.defaultDesc)})]},M)})}),D.service&&e.jsx("div",{className:z.errorText,children:D.service})]}),a&&e.jsxs("div",{className:`${z.card} ${D.when?z.errorBorder:""}`,children:[e.jsx("h3",{className:z.cardTitle,children:t("bookingScreen.sections.schedule.title","Когда?")}),!$&&e.jsxs("div",{className:z.tabs,children:[e.jsx("button",{className:`${z.tab} ${l===rt.ONE_TIME?z.active:""}`,onClick:()=>d(rt.ONE_TIME),children:t("bookingScreen.sections.schedule.oneTime","Разовая")}),e.jsx("button",{className:`${z.tab} ${l===rt.RECURRING?z.active:""}`,onClick:()=>d(rt.RECURRING),children:t("bookingScreen.sections.schedule.recurring","Регулярная")})]}),e.jsx("div",{className:z.dateInputs,children:te===rt.RECURRING?e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{children:t("bookingScreen.sections.schedule.recurringStartDateInstruction","Выберите дату начала")}),e.jsx("input",{type:"date",className:z.input,value:N,min:Le().format("YYYY-MM-DD"),onChange:M=>v(M.target.value)})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{children:t("bookingScreen.sections.schedule.selectStartDate","Дата начала")}),e.jsx("input",{type:"date",className:z.input,value:o,min:Le().format("YYYY-MM-DD"),onChange:M=>h(M.target.value)})]}),!R&&!X&&e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{children:t("bookingScreen.sections.schedule.selectEndDate","Дата окончания")}),e.jsx("input",{type:"date",className:z.input,value:x,min:o||Le().format("YYYY-MM-DD"),onChange:M=>w(M.target.value)})]})]})}),te===rt.RECURRING&&e.jsxs("div",{className:z.weekdaysBlock,children:[e.jsx("label",{className:z.subLabel,children:t("bookingScreen.sections.schedule.repeatOnLabel","Повторять по")}),e.jsx("div",{className:z.weekdaysRow,children:zf.map(M=>e.jsx("button",{className:`${z.weekdayBtn} ${m.includes(M.id)?z.selected:""}`,onClick:()=>{m.includes(M.id)?j(K=>K.filter(fe=>fe!==M.id)):j(K=>[...K,M.id])},children:M.label},M.id))})]}),(R||X)&&e.jsxs("div",{className:z.visitSettings,children:[e.jsx("label",{className:z.subLabel,children:t("bookingScreen.sections.schedule.durationLabel","Длительность")}),e.jsx("div",{className:z.chipsRow,children:Gf.map(M=>e.jsx("button",{className:`${z.chip} ${P===M.id?z.selected:""}`,onClick:()=>g(M.id),children:t(`bookingScreen.durations.${M.key}`,M.label)},M.id))}),R&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:z.subLabel,children:t("bookingScreen.sections.schedule.visitsPerDayLabel","Визитов в день")}),e.jsx("div",{className:z.chipsRow,children:[1,2,3].map(M=>e.jsx("button",{className:`${z.chip} ${u===M?z.selected:""}`,onClick:()=>y(M),children:M},M))}),Array.from({length:u}).map((M,K)=>e.jsxs("div",{className:z.timeSelectRow,children:[e.jsxs("span",{children:[t("bookingScreen.sections.schedule.visitTimeLabel",{count:K+1,defaultValue:"Время визита"})," ",K+1]}),e.jsxs("div",{className:z.selectWrapper,children:[e.jsxs("select",{className:z.select,value:_[K+1]||"",onChange:fe=>S(q=>({...q,[K+1]:fe.target.value})),children:[e.jsx("option",{value:"",children:"--:--"}),Uf.map(fe=>e.jsxs("option",{value:fe,disabled:ge(fe),children:[fe," ",ge(fe)?"(занято)":""]},fe))]}),e.jsx("div",{className:z.chevronIcon,children:e.jsx(Ff,{})})]})]},K))]})]}),D.when&&e.jsx("div",{className:z.errorText,children:D.when})]}),e.jsxs("div",{className:`${z.card} ${D.pets?z.errorBorder:""}`,children:[e.jsxs("div",{className:z.cardHeaderRow,children:[e.jsx("h3",{className:z.cardTitle,children:t("bookingScreen.sections.pets.title","Кого доверим?")}),e.jsxs("button",{className:z.linkBtn,onClick:()=>s("/cabinet/pets/add"),children:["+ ",t("bookingScreen.addPetButton","Добавить")]})]}),H?e.jsx("div",{className:z.loader,children:t("loading")}):B.length===0?e.jsx("p",{className:z.emptyText,children:t("bookingScreen.sections.pets.noPetsFound","Питомцы не найдены")}):e.jsx("div",{className:z.petsGrid,children:B.map(M=>{var fe,q;const K=p.includes(M.id);return e.jsxs("div",{className:`${z.petCard} ${K?z.selected:""}`,onClick:()=>L(K?se=>se.filter(me=>me!==M.id):se=>[...se,M.id]),children:[e.jsxs("div",{className:z.petAvatar,children:[M.avatar?e.jsx("img",{src:((fe=M.avatar.data)==null?void 0:fe.preview_url)||((q=M.avatar.data)==null?void 0:q.url),alt:M.name}):e.jsx("div",{className:z.placeholder,children:e.jsx(xn,{})}),K&&e.jsx("div",{className:z.checkBadge,children:e.jsx($f,{})})]}),e.jsx("span",{className:z.petName,children:M.name})]},M.id)})}),D.pets&&e.jsx("div",{className:z.errorText,children:D.pets})]}),e.jsxs("div",{className:z.card,children:[e.jsx("h3",{className:z.cardTitle,children:t("bookingScreen.sections.promo.title","Промокод")}),e.jsxs("div",{className:z.promoRow,children:[e.jsx("input",{className:z.input,value:O,onChange:M=>{F(M.target.value.toUpperCase()),T(null),W(K=>({...K,promo:""}))},placeholder:t("bookingScreen.promoCodePlaceholder","Введите промокод"),disabled:!!A}),A?e.jsx("button",{className:z.btnDanger,onClick:()=>{T(null),F("")},children:t("bookingScreen.removeButton","Удалить")}):e.jsx("button",{className:z.btnSecondary,onClick:ye,disabled:!O||E,children:E?"...":t("bookingScreen.applyButton","Применить")})]}),A&&e.jsxs("p",{className:z.successText,children:[t("bookingScreen.sections.promo.appliedMessage")," ",A.display_text]}),D.promo&&e.jsx("div",{className:z.errorText,children:D.promo})]})]}),e.jsx("div",{className:z.sidebar,children:e.jsxs("div",{className:z.summaryCard,children:[e.jsx("h3",{className:z.summaryTitle,children:t("bookingScreen.scheduleTitle","Расписание")}),e.jsxs("div",{className:z.summaryRow,children:[e.jsxs("span",{children:[t("bookingScreen.sections.service.title","Услуга"),":"]}),e.jsx("span",{children:a?Ce(a):"-"})]}),a&&e.jsxs("div",{className:z.summaryRow,children:[e.jsxs("span",{children:[t("bookingScreen.sections.schedule.title","Когда"),":"]}),e.jsx("span",{children:te===rt.ONE_TIME?o?Le(o).format("D MMM"):"-":N?`${Le(N).format("D MMM")}`:"-"})]}),e.jsxs("div",{className:z.summaryRow,children:[e.jsxs("span",{children:[t("bookingScreen.petsTitle","Питомцы"),":"]}),e.jsx("span",{children:p.length>0?p.length:"-"})]}),e.jsx("div",{className:z.divider}),e.jsx("button",{className:z.btnPrimary,onClick:Fe,disabled:f,children:f?t("loading"):t("bookingScreen.createRequestButton","Создать заявку")})]})})]})]})},Vf="_pageWrapper_14d2u_1",Kf="_heroSection_14d2u_7",Yf="_title_14d2u_19",Zf="_subtitle_14d2u_32",Qf="_searchContainer_14d2u_38",Xf="_searchInput_14d2u_44",Jf="_searchIcon_14d2u_59",ej="_contentContainer_14d2u_67",tj="_categoriesList_14d2u_73",sj="_categoryTab_14d2u_89",nj="_active_14d2u_103",aj="_faqList_14d2u_110",ij="_faqItem_14d2u_116",rj="_open_14d2u_126",oj="_faqHeader_14d2u_131",cj="_chevron_14d2u_146",lj="_rotated_14d2u_152",dj="_faqBody_14d2u_157",hj="_faqContent_14d2u_165",pj="_contactSection_14d2u_170",uj="_contactBtn_14d2u_187",qe={pageWrapper:Vf,heroSection:Kf,title:Yf,subtitle:Zf,searchContainer:Qf,searchInput:Xf,searchIcon:Jf,contentContainer:ej,categoriesList:tj,categoryTab:sj,active:nj,faqList:aj,faqItem:ij,open:rj,faqHeader:oj,chevron:cj,rotated:lj,faqBody:dj,faqContent:hj,contactSection:pj,contactBtn:uj},mj=({className:t})=>e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),_j=({question:t,answer:s})=>{const[n,i]=c.useState(!1);return e.jsxs("div",{className:`${qe.faqItem} ${n?qe.open:""}`,children:[e.jsxs("div",{className:qe.faqHeader,onClick:()=>i(!n),children:[e.jsx("h3",{children:t}),e.jsx(mj,{className:`${qe.chevron} ${n?qe.rotated:""}`})]}),e.jsx(Sa,{children:n&&e.jsx(de.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:qe.faqBody,children:e.jsx("div",{className:qe.faqContent,children:s})})})]})},xj=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),gj=()=>{const{t}=ae(),[s,n]=c.useState("all"),[i,a]=c.useState(""),r=[{id:1,category:"clients",questionKey:"helpPage.q1",answerKey:"helpPage.a1"},{id:2,category:"sitters",questionKey:"helpPage.q2",answerKey:"helpPage.a2"},{id:3,category:"safety",questionKey:"helpPage.q3",answerKey:"helpPage.a3"},{id:4,category:"payments",questionKey:"helpPage.q4",answerKey:"helpPage.a4"},{id:5,category:"clients",questionKey:"Как отменить заказ?",answerKey:"Отменить заказ можно в личном кабинете. Если до начала осталось более 24 часов, возврат полный."},{id:6,category:"sitters",questionKey:"Сколько я заработаю?",answerKey:"Вы сами устанавливаете цены. Сервис не берет комиссию с ситтеров."}],l=[{key:"all",labelKey:"helpPage.categories.all"},{key:"clients",labelKey:"helpPage.categories.clients"},{key:"sitters",labelKey:"helpPage.categories.sitters"},{key:"safety",labelKey:"helpPage.categories.safety"},{key:"payments",labelKey:"helpPage.categories.payments"}],d=c.useMemo(()=>r.filter(o=>{if(s!=="all"&&o.category!==s)return!1;if(i){const h=o.questionKey.includes("helpPage.")?t(o.questionKey):o.questionKey,x=o.answerKey.includes("helpPage.")?t(o.answerKey):o.answerKey,w=i.toLowerCase();return h.toLowerCase().includes(w)||x.toLowerCase().includes(w)}return!0}),[s,i,r,t]);return e.jsxs("div",{className:qe.pageWrapper,children:[e.jsxs(Nt,{children:[e.jsx("title",{children:"Помощь и поддержка - PetsOk"}),e.jsx("meta",{name:"description",content:"Ответы на частые вопросы о сервисе PetsOk"})]}),e.jsxs("div",{className:qe.heroSection,children:[e.jsx("h1",{className:qe.title,children:t("helpPage.title")}),e.jsx("p",{className:qe.subtitle,children:t("helpPage.subtitle")}),e.jsxs("div",{className:qe.searchContainer,children:[e.jsx("div",{className:qe.searchIcon,children:e.jsx(xj,{})}),e.jsx("input",{type:"text",className:qe.searchInput,placeholder:t("helpPage.searchPlaceholder"),value:i,onChange:o=>a(o.target.value)})]})]}),e.jsxs("div",{className:qe.contentContainer,children:[e.jsx("div",{className:qe.categoriesList,children:l.map(o=>e.jsx("button",{className:`${qe.categoryTab} ${s===o.key?qe.active:""}`,onClick:()=>n(o.key),children:t(o.labelKey)},o.key))}),e.jsx("div",{className:qe.faqList,children:d.length>0?d.map(o=>e.jsx(_j,{question:o.questionKey.includes("helpPage.")?t(o.questionKey):o.questionKey,answer:o.answerKey.includes("helpPage.")?t(o.answerKey):o.answerKey},o.id)):e.jsxs("div",{style:{textAlign:"center",color:"#888",padding:"40px"},children:['Ничего не найдено по запросу "',i,'"']})}),e.jsxs("div",{className:qe.contactSection,children:[e.jsx("h2",{children:t("helpPage.contactTitle")}),e.jsx("p",{children:t("helpPage.contactText")}),e.jsx("a",{href:"mailto:support@petsok.ru",className:qe.contactBtn,children:t("helpPage.contactBtn")})]})]})]})},vj="_container_5j1dv_1",fj="_topGrid_5j1dv_5",jj="_balanceCard_5j1dv_17",yj="_amount_5j1dv_46",wj="_balanceFooter_5j1dv_52",bj="_cardsSection_5j1dv_57",Nj="_header_5j1dv_66",Sj="_addCardBtn_5j1dv_79",kj="_cardsList_5j1dv_97",Cj="_cardItem_5j1dv_103",Ij="_cardIcon_5j1dv_121",Aj="_cardInfo_5j1dv_133",Bj="_defaultBadge_5j1dv_145",Pj="_cardActions_5j1dv_160",Tj="_actionBtn_5j1dv_165",Lj="_historySection_5j1dv_187",Mj="_transactionsList_5j1dv_201",Ej="_transactionItem_5j1dv_206",Rj="_txLeft_5j1dv_224",$j="_txIcon_5j1dv_230",Fj="_credit_5j1dv_239",Oj="_debit_5j1dv_243",Dj="_neutral_5j1dv_247",Wj="_txInfo_5j1dv_252",zj="_txRight_5j1dv_263",Gj="_txAmount_5j1dv_272",Uj="_txDate_5j1dv_283",Hj="_emptyState_5j1dv_288",qj="_loader_5j1dv_295",je={container:vj,topGrid:fj,balanceCard:jj,amount:yj,balanceFooter:wj,cardsSection:bj,header:Nj,addCardBtn:Sj,cardsList:kj,cardItem:Cj,default:"_default_5j1dv_116",cardIcon:Ij,cardInfo:Aj,defaultBadge:Bj,cardActions:Pj,actionBtn:Tj,delete:"_delete_5j1dv_182",historySection:Lj,transactionsList:Mj,transactionItem:Ej,txLeft:Rj,txIcon:$j,credit:Fj,debit:Oj,neutral:Dj,txInfo:Wj,txRight:zj,txAmount:Gj,txDate:Uj,emptyState:Hj,loader:qj},Vj=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"}),e.jsx("path",{d:"M4 6v12a2 2 0 0 0 2 2h14v-4"}),e.jsx("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4h-4z"})]}),Kj=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),Yj=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Zj=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Qj=()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),Xj=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),e.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Jj=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("polyline",{points:"19 12 12 19 5 12"})]}),ey=()=>{const{t}=ae(),{user:s}=Be(g=>g.auth),[n,i]=c.useState({amount:"0.00",currency_symbol:"₽"}),[a,r]=c.useState([]),[l,d]=c.useState([]),[o,h]=c.useState(!0),[x,w]=c.useState(null),N=c.useCallback(async()=>{try{const[g,u,y]=await Promise.all([Tn(),Fs(),hi(1)]);g!=null&&g.data&&i(g.data),u!=null&&u.data&&r(u.data),y!=null&&y.data&&d(y.data)}catch(g){console.error(g)}finally{h(!1)}},[]);c.useEffect(()=>{N()},[N]);const v=async()=>{try{const g=window.location.href,u=await Os({return_url_mobile_base:g});(u.checkout_url||u.webview_url)&&(window.location.href=u.checkout_url||u.webview_url)}catch(g){console.error(g),alert(t("wallet.errorAddCard","Ошибка добавления карты"))}},m=async g=>{if(!x){w(g);try{await ks(g),await N()}catch(u){console.error(u),alert("Ошибка установки основной карты")}finally{w(null)}}},j=async g=>{if(window.confirm(t("wallet.deleteCardConfirm","Удалить эту карту?"))&&!x){w(g);try{await pi(g),r(u=>u.filter(y=>y.id!==g))}catch(u){console.error(u),alert("Ошибка удаления карты")}finally{w(null)}}},P=g=>{const u=["credit_admin","order_cancel_refund","payout_reversal"],y=["debit_admin","payment_debit","order_payment_balance"];return u.includes(g)?{icon:e.jsx(Xj,{}),className:je.credit,sign:"+"}:y.includes(g)?{icon:e.jsx(Jj,{}),className:je.debit,sign:"-"}:{icon:e.jsx(Vj,{}),className:je.neutral,sign:""}};return o?e.jsx("div",{className:je.loader,children:t("loading")}):e.jsxs("div",{className:je.container,children:[e.jsxs("div",{className:je.topGrid,children:[e.jsxs("div",{className:je.balanceCard,children:[e.jsxs("div",{children:[e.jsx("h3",{children:t("wallet.balanceTitle","Текущий баланс")}),e.jsxs("div",{className:je.amount,children:[n.amount," ",n.currency_symbol]})]}),e.jsx("div",{className:je.balanceFooter,children:s==null?void 0:s.email})]}),e.jsxs("div",{className:je.cardsSection,children:[e.jsxs("div",{className:je.header,children:[e.jsx("h3",{children:t("wallet.cardsTitle","Способы оплаты")}),e.jsxs("button",{className:je.addCardBtn,onClick:v,children:[e.jsx(Yj,{})," ",t("wallet.addCard","Добавить")]})]}),e.jsxs("div",{className:je.cardsList,children:[a.length===0&&e.jsx("p",{className:je.emptyState,style:{padding:10},children:t("wallet.noCards","Нет привязанных карт")}),a.map(g=>e.jsxs("div",{className:`${je.cardItem} ${g.is_default?je.default:""}`,children:[e.jsx("div",{className:je.cardIcon,children:e.jsx(Kj,{})}),e.jsxs("div",{className:je.cardInfo,children:[e.jsxs("h4",{children:["•••• ",g.last4,g.is_default&&e.jsx("span",{className:je.defaultBadge,children:t("wallet.defaultCard","Основная")})]}),e.jsxs("p",{children:[g.brand," • ",t("wallet.expires","Годен до")," ",g.exp_month,"/",g.exp_year]})]}),e.jsxs("div",{className:je.cardActions,children:[!g.is_default&&e.jsx("button",{className:je.actionBtn,title:"Сделать основной",onClick:()=>m(g.id),disabled:x===g.id,children:e.jsx(Qj,{})}),e.jsx("button",{className:`${je.actionBtn} ${je.delete}`,title:"Удалить",onClick:()=>j(g.id),disabled:x===g.id,children:e.jsx(Zj,{})})]})]},g.id))]})]})]}),e.jsxs("div",{className:je.historySection,children:[e.jsx("h3",{children:t("wallet.historyTitle","История операций")}),e.jsx("div",{className:je.transactionsList,children:l.length===0?e.jsx("div",{className:je.emptyState,children:t("wallet.noTransactions","История операций пуста")}):l.map(g=>{const u=P(g.type);return e.jsxs("div",{className:je.transactionItem,children:[e.jsxs("div",{className:je.txLeft,children:[e.jsx("div",{className:`${je.txIcon} ${u.className}`,children:u.icon}),e.jsxs("div",{className:je.txInfo,children:[e.jsx("h4",{children:g.description||"Операция"}),e.jsx("span",{children:g.type})]})]}),e.jsxs("div",{className:je.txRight,children:[e.jsxs("span",{className:`${je.txAmount} ${u.className}`,children:[u.sign,g.amount," ",g.currency_code]}),e.jsx("div",{className:je.txDate,children:Le(g.created_at).format("D MMM YYYY, HH:mm")})]})]},g.id)})})]})]})},ty="_container_1570d_1",sy="_tabsHeader_1570d_5",ny="_tabBtn_1570d_13",ay="_active_1570d_28",iy="_servicesGrid_1570d_33",ry="_saveBtn_1570d_41",oy="_profileForm_1570d_69",cy="_sectionCard_1570d_76",ly="_sectionTitle_1570d_89",dy="_formGroup_1570d_98",hy="_input_1570d_108",py="_textarea_1570d_109",uy="_disabled_1570d_126",my="_togglesRow_1570d_150",_y="_toggleItem_1570d_156",xy="_slider_1570d_187",gy="_mediaHeader_1570d_221",vy="_addMediaBtn_1570d_228",fy="_mediaGrid_1570d_246",jy="_mediaItem_1570d_252",yy="_isMain_1570d_267",wy="_mainBadge_1570d_286",by="_deleteBtn_1570d_298",Ny="_makeMainBtn_1570d_319",Sy="_uploadLabel_1570d_338",ky="_mediaHint_1570d_364",Cy="_banner_1570d_371",Iy="_pending_1570d_380",Ay="_rejected_1570d_388",By="_hiddenInput_1570d_438",ce={container:ty,tabsHeader:sy,tabBtn:ny,active:ay,servicesGrid:iy,saveBtn:ry,profileForm:oy,sectionCard:cy,sectionTitle:ly,formGroup:dy,input:hy,textarea:py,disabled:uy,togglesRow:my,toggleItem:_y,switch:"_switch_1570d_175",slider:xy,mediaHeader:gy,addMediaBtn:vy,mediaGrid:fy,mediaItem:jy,isMain:yy,mainBadge:wy,deleteBtn:by,makeMainBtn:Ny,uploadLabel:Sy,mediaHint:ky,banner:Cy,pending:Iy,rejected:Ay,hiddenInput:By},Py=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),Ty=()=>e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Ly=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),My=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),Ey=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#3598FE",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Ry=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),ft={BOARDING:"boarding",HOUSE_SITTING:"house_sitting",DROP_IN_VISIT:"drop_in_visit",DAY_CARE:"doggy_day_care",WALKING:"walking"},as={[ft.BOARDING]:"night",[ft.HOUSE_SITTING]:"night",[ft.DAY_CARE]:"day",[ft.DROP_IN_VISIT]:"visit",[ft.WALKING]:"walk_60"},$y=()=>{const{t}=ae(),[s,n]=c.useState("services");return s==="tests"?e.jsx(Ds,{onNext:()=>n("services")}):e.jsxs("div",{className:ce.container,children:[e.jsxs("div",{className:ce.tabsHeader,children:[e.jsx("button",{className:`${ce.tabBtn} ${s==="services"?ce.active:""}`,onClick:()=>n("services"),children:t("sitterSettings.tabs.services","Услуги и цены")}),e.jsx("button",{className:`${ce.tabBtn} ${s==="profile"?ce.active:""}`,onClick:()=>n("profile"),children:t("sitterSettings.tabs.profile","Анкета и фото")})]}),s==="services"?e.jsx(Fy,{onGoToTests:()=>n("tests")}):e.jsx(Oy,{})]})},Fy=({onGoToTests:t})=>{const{t:s}=ae(),{activeServices:n}=Be(u=>u.config),[i,a]=c.useState({}),[r,l]=c.useState("₽"),[d,o]=c.useState(!0),[h,x]=c.useState(!1),[w,N]=c.useState([]);c.useEffect(()=>{(async()=>{var y,_,S,B;o(!0);try{const[b,p]=await Promise.all([ui(),Pn()]),L=((y=b.data)==null?void 0:y.data)||b.data||[],O=p.data||[],F=((B=(S=(_=b.data)==null?void 0:_.meta)==null?void 0:S.currency)==null?void 0:B.symbol)||"₽";l(F);const A=[ft.BOARDING,ft.WALKING,ft.DAY_CARE,ft.HOUSE_SITTING,ft.DROP_IN_VISIT],T=n.length>0?A.filter(C=>n.includes(C)):A;N(T);const E={};T.forEach(C=>{var R,X,te,oe,Me,ge,ve,Fe;const f=L.find(ye=>ye.service_key===C),k=O.find(ye=>ye.service_key===C),D=(f==null?void 0:f.test_details)||(k==null?void 0:k.test_details_for_activation)||{status:"not_defined"},W=D.status==="required_passed"||D.status==="completed_passed"||D.status==="not_required"||D.status==="not_defined",H=(((R=f==null?void 0:f.allowedPetTypes)==null?void 0:R.data)||[]).map(ye=>ye.id).filter(Boolean),Q=(((X=f==null?void 0:f.allowedDogSizes)==null?void 0:X.data)||[]).map(ye=>ye.id).filter(Boolean),$=(((te=f==null?void 0:f.allowedCatSizes)==null?void 0:te.data)||[]).map(ye=>ye.id).filter(Boolean);f?E[C]={service_key:C,price_per_unit:((oe=f.price_per_unit)==null?void 0:oe.toString())??((Me=k==null?void 0:k.recommended_price)==null?void 0:Me.toString())??"",unit:f.unit||(k==null?void 0:k.default_unit)||as[C],price_per_additional_pet:((ge=f.price_per_additional_pet)==null?void 0:ge.toString())??"",max_pets:((ve=f.max_pets)==null?void 0:ve.toString())??"",allowed_pet_types:H,allowed_dog_sizes:Q,allowed_cat_sizes:$,is_active:!!f.is_active,can_be_activated_from_api:W,test_details_from_api:D,recommended_price_from_api:(k==null?void 0:k.recommended_price)??null,default_unit_from_api:(k==null?void 0:k.default_unit)||as[C]}:E[C]={service_key:C,price_per_unit:((Fe=k==null?void 0:k.recommended_price)==null?void 0:Fe.toString())??"",unit:(k==null?void 0:k.default_unit)||as[C],price_per_additional_pet:"",max_pets:"",allowed_pet_types:[],allowed_dog_sizes:[],allowed_cat_sizes:[],is_active:!1,can_be_activated_from_api:W,test_details_from_api:D,recommended_price_from_api:(k==null?void 0:k.recommended_price)??null,default_unit_from_api:(k==null?void 0:k.default_unit)||as[C]}}),a(E)}catch(b){console.error("Error loading services:",b)}finally{o(!1)}})()},[n]);const v=(u,y,_)=>{let S=_;["price_per_unit","price_per_additional_pet","max_pets"].includes(y)&&(S=_.replace(/[^0-9.]/g,"")),a(B=>({...B,[u]:{...B[u]||{},[y]:S}}))},m=u=>{var _;const y=i[u];if(y){if(!y.is_active&&!y.can_be_activated_from_api){const S=((_=y.test_details_from_api)==null?void 0:_.message)||s("sitterSettings.services.testRequired","Для активации нужно сдать тест.");window.confirm(`${S}

${s("GoToTestsButton","Перейти к тестам")}?`)&&t();return}a(S=>({...S,[u]:{...S[u],is_active:!S[u].is_active}}))}},j=(u,y,_)=>{a(S=>({...S,[u]:{...S[u]||{},[y]:_}}))},P=async()=>{x(!0);try{const u=w.map(y=>{const _=i[y];return{service_key:y,is_active:_.is_active,price_per_unit:parseFloat(_.price_per_unit)||0,unit:_.unit,price_per_additional_pet:_.price_per_additional_pet?parseFloat(_.price_per_additional_pet):null,max_pets:_.max_pets?parseInt(_.max_pets,10):null,allowed_pet_types:_.allowed_pet_types,allowed_dog_sizes:_.allowed_dog_sizes,allowed_cat_sizes:_.allowed_cat_sizes}});await mi({services:u}),alert(s("sitterSettings.services.successSaved","Настройки сохранены!"))}catch(u){console.error(u),alert(u.message||"Ошибка сохранения")}finally{x(!1)}},g=u=>s(`header.services.${u}`,u);return d?e.jsx("div",{style:{padding:40,textAlign:"center"},children:s("loading")}):e.jsxs("div",{children:[e.jsx("div",{className:ce.servicesGrid,children:w.map(u=>e.jsx(Yn,{serviceKey:u,serviceName:g(u),settings:i[u],currencySymbol:r,onToggleActive:m,onChangeSetting:v,onMultiSelectChange:j,onGoToTests:t},u))}),e.jsx("button",{className:ce.saveBtn,onClick:P,disabled:h,children:h?"...":s("sitterSettings.services.save","Сохранить настройки")})]})},Oy=()=>{const{t}=ae();ot();const[s,n]=c.useState(""),[i,a]=c.useState(""),[r,l]=c.useState(""),[d,o]=c.useState(!1),[h,x]=c.useState(!1),[w,N]=c.useState(""),[v,m]=c.useState([]),[j,P]=c.useState([]),[g,u]=c.useState([]),[y,_]=c.useState("approved"),[S,B]=c.useState(null),[b,p]=c.useState(!1),[L,O]=c.useState(0),[F,A]=c.useState(!0),[T,E]=c.useState(!1);c.useEffect(()=>{(async()=>{var R,X;A(!0);try{const te=await _i(),oe=te.data||te;_(oe.moderation_status||"approved"),B(oe.moderation_notes);const Me=oe.moderation_status==="pending",ge=oe.pending_changes||{};n(Me&&ge.title?ge.title:oe.title||""),a(Me&&ge.description?ge.description:oe.description||""),l(oe.care_experience!==void 0?String(oe.care_experience):""),o(!!oe.children_under_twelve_yo),x(!!oe.constant_supervision),N(oe.address_q||oe.address||"Адрес не указан");const ve=((R=oe.media)==null?void 0:R.data)||[];let Fe=[];Me&&((X=ge.pending_media_order)==null?void 0:X.length)>0?(ge.pending_media_order.map(String).forEach(Ce=>{const M=ve.find(K=>String(K.id)===Ce);M&&Fe.push(C(M))}),ve.forEach(Ce=>{Fe.find(M=>String(M.id)===String(Ce.id))||Fe.push(C(Ce))})):Fe=ve.sort((ye,Ce)=>(ye.pivot_order_column||0)-(Ce.pivot_order_column||0)).map(C),m(Fe)}catch(te){console.error("Failed to load profile:",te)}finally{A(!1)}})()},[]);const C=$=>{var R,X;return{id:$.id,key:`server-${$.id}`,url:$.preview_url||$.url,type:(R=$.mime_type)!=null&&R.startsWith("video/")||(X=$.url)!=null&&X.endsWith(".mp4")?"video":"photo",isNew:!1,isServer:!0}},f=$=>{if($.target.files){const R=Array.from($.target.files);if(v.length+R.length>20)return alert(t("mediaPicker.limitReached","Максимум 20 файлов"));u(te=>[...te,...R]);const X=R.map((te,oe)=>({id:`new-${Date.now()}-${oe}`,key:`local-${Date.now()}-${oe}`,url:URL.createObjectURL(te),type:te.type.startsWith("video")?"video":"photo",isNew:!0,isServer:!1,fileObj:te}));m(te=>[...te,...X])}$.target.value=""},k=$=>{const R=v[$];R.isServer?P(X=>[...X,R.id]):u(X=>X.filter(te=>te!==R.fileObj)),m(X=>X.filter((te,oe)=>oe!==$))},D=$=>{if(y==="pending"||$===0)return;const R=[...v],[X]=R.splice($,1);R.unshift(X),m(R)},W=async()=>{var $,R,X;if(!s.trim()||!i.trim())return alert(t("validationErrors.titleRequired","Заполните заголовок и описание"));E(!0);try{const te=v.filter(ve=>ve.isServer).map(ve=>ve.id),oe=v.filter(ve=>ve.isNew).map(ve=>ve.fileObj),Me={title:s,description:i,care_experience:parseInt(r)||0,children_under_twelve_yo:d?"1":"0",constant_supervision:h?"1":"0"},ge=await xi(Me,oe,te,j);($=ge.data)!=null&&$.moderation_status&&_(ge.data.moderation_status),alert(t("sitterSettings.profile.successProfile","Профиль обновлен!")),u([]),P([])}catch(te){console.error(te),alert(((X=(R=te.response)==null?void 0:R.data)==null?void 0:X.message)||"Ошибка сохранения")}finally{E(!1)}};if(F)return e.jsx("div",{style:{padding:40,textAlign:"center"},children:t("loading")});const H=y==="pending",Q=y==="rejected";return e.jsxs("div",{className:ce.profileForm,children:[H&&e.jsxs("div",{className:`${ce.banner} ${ce.pending}`,children:[e.jsx(Ly,{}),e.jsx("p",{children:t("editSitterProfile.statusPending","Анкета на проверке. Вы не можете менять данные.")})]}),Q&&e.jsxs("div",{className:`${ce.banner} ${ce.rejected}`,children:[e.jsx(My,{}),e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"bold"},children:t("editSitterProfile.statusRejected","Анкета отклонена. Исправьте ошибки.")}),S&&e.jsxs("p",{style:{marginTop:4,fontSize:"0.9em"},children:[t("editSitterProfile.moderationReason","Причина:")," ",S]})]})]}),e.jsxs("div",{className:ce.sectionCard,children:[e.jsxs("div",{className:ce.mediaHeader,children:[e.jsx("h3",{className:ce.sectionTitle,children:t("sitterSettings.profile.media","Фото и Видео")}),!H&&e.jsxs("label",{className:ce.addMediaBtn,children:["+ ",t("common.add","Добавить"),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",className:ce.hiddenInput,onChange:f})]})]}),e.jsxs("div",{className:ce.mediaGrid,children:[v.map(($,R)=>e.jsxs("div",{className:`${ce.mediaItem} ${R===0?ce.isMain:""}`,onClick:()=>{O(R),p(!0)},children:[$.type==="video"?e.jsx("video",{src:$.url}):e.jsx("img",{src:$.url,alt:"media"}),!H&&e.jsx("button",{type:"button",className:ce.deleteBtn,onClick:X=>{X.stopPropagation(),k(R)},children:e.jsx(Ty,{})}),R!==0&&!H&&e.jsx("button",{type:"button",className:ce.makeMainBtn,onClick:X=>{X.stopPropagation(),D(R)},children:"Сделать главным"}),R===0&&e.jsx("div",{className:ce.mainBadge,children:t("editSitterProfile.mainPhoto","Главное")})]},$.key||$.id)),!H&&v.length<20&&e.jsxs("label",{className:ce.uploadLabel,children:[e.jsx(Py,{}),e.jsx("span",{children:t("sitterSettings.profile.uploadBtn","Загрузить")}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:f})]})]}),e.jsx("p",{className:ce.mediaHint,children:t("sitterSettings.profile.mediaHint","Загрузите фото. Первое будет главным в поиске.")}),e.jsxs("p",{className:ce.mediaHint,style:{color:"#718096",fontSize:"0.8rem",marginTop:4},children:[e.jsx(Ey,{})," ",t("sitterSettings.profile.mediaPublicHint","Фотографии будут доступны в публичной галерее профиля.")]})]}),e.jsxs("div",{className:ce.sectionCard,children:[e.jsx("h3",{className:ce.sectionTitle,children:t("sitterSettings.profile.mainInfo","Основная информация")}),e.jsxs("div",{className:ce.formGroup,children:[e.jsx("label",{children:t("sitterSettings.profile.titleLabel","Заголовок профиля")}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#718096",marginBottom:"8px",lineHeight:"1.4"},children:t("sitterSettings.profile.publicVisibilityHint","Эта информация будет видна всем в вашем публичном профиле.")}),e.jsx("input",{className:`${ce.input} ${H?ce.disabled:""}`,value:s,onChange:$=>n($.target.value),placeholder:"Опытный догситтер",maxLength:75,disabled:H})]}),e.jsxs("div",{className:ce.formGroup,children:[e.jsx("label",{children:t("sitterSettings.profile.aboutLabel","О себе")}),e.jsx("textarea",{className:`${ce.textarea} ${H?ce.disabled:""}`,value:i,onChange:$=>a($.target.value),placeholder:"Расскажите о себе...",maxLength:5e3,disabled:H})]}),e.jsxs("div",{className:ce.formGroup,style:{backgroundColor:"#F8F9FB",padding:"16px",borderRadius:"10px",border:"1px solid #E2E8F0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"#718096"},children:[e.jsx(Ry,{}),e.jsx("label",{style:{margin:0,color:"inherit"},children:t("sitterSettings.profile.addressLabel","Район / Метро")})]}),e.jsxs("div",{style:{paddingLeft:"28px"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.05rem",color:"#1A202C",marginBottom:"8px"},children:w}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#718096",margin:"0 0 8px 0",lineHeight:1.4},children:t("sitterSettings.profile.addressReadOnlyHint","Адрес привязан к вашему основному аккаунту.")}),e.jsxs(Ge,{to:"/cabinet/profile",style:{fontSize:"0.9rem",color:"#3598FE",fontWeight:600,textDecoration:"none",display:"inline-flex",alignItems:"center",gap:4},children:[t("sitterSettings.profile.addressEditLink","Редактировать адрес в профиле пользователя")," →"]})]})]}),e.jsxs("div",{className:ce.formGroup,children:[e.jsx("label",{children:t("sitterSettings.profile.experienceLabel","Опыт (лет)")}),e.jsx("input",{type:"text",className:`${ce.input} ${H?ce.disabled:""}`,value:r,onChange:$=>l($.target.value.replace(/[^0-9]/g,"")),style:{width:"100px"},disabled:H,maxLength:2})]})]}),e.jsxs("div",{className:ce.sectionCard,children:[e.jsx("h3",{className:ce.sectionTitle,children:t("sitterSettings.profile.conditions","Условия")}),e.jsxs("div",{className:ce.togglesRow,children:[e.jsxs("label",{className:ce.toggleItem,children:[e.jsx("span",{children:t("sitterSettings.profile.kidsLabel","Есть дети до 12 лет")}),e.jsxs("div",{className:ce.switch,children:[e.jsx("input",{type:"checkbox",checked:d,onChange:$=>o($.target.checked),disabled:H}),e.jsx("span",{className:ce.slider})]})]}),e.jsxs("label",{className:ce.toggleItem,children:[e.jsx("span",{children:t("sitterSettings.profile.supervisionLabel","Постоянный присмотр")}),e.jsxs("div",{className:ce.switch,children:[e.jsx("input",{type:"checkbox",checked:h,onChange:$=>x($.target.checked),disabled:H}),e.jsx("span",{className:ce.slider})]})]})]})]}),!H&&e.jsx("button",{className:ce.saveBtn,onClick:W,disabled:T,children:T?"...":t("sitterSettings.profile.saveProfile","Сохранить профиль")}),e.jsx(Ms,{open:b,close:()=>p(!1),index:L,slides:v.map($=>$.type==="video"?{type:"video",width:1280,height:720,sources:[{src:$.url,type:"video/mp4"}]}:{src:$.url}),plugins:[Es]})]})},Dy="_container_1i2p6_1",Wy="_header_1i2p6_8",zy="_backBtn_1i2p6_22",Gy="_section_1i2p6_37",Uy="_list_1i2p6_49",Hy="_emptyState_1i2p6_55",qy="_card_1i2p6_73",Vy="_cardInactive_1i2p6_81",Ky="_cardHeader_1i2p6_86",Yy="_userInfo_1i2p6_93",Zy="_avatar_1i2p6_100",Qy="_userText_1i2p6_109",Xy="_userName_1i2p6_114",Jy="_ratingRow_1i2p6_121",ew="_ratingVal_1i2p6_132",tw="_reviewsCount_1i2p6_137",sw="_statusBadge_1i2p6_142",nw="_badgeNew_1i2p6_150",aw="_badgeError_1i2p6_154",iw="_badgeDefault_1i2p6_158",rw="_cardBody_1i2p6_163",ow="_messageBubble_1i2p6_173",cw="_priceRow_1i2p6_184",lw="_priceValue_1i2p6_184",dw="_cardFooter_1i2p6_190",hw="_chatBtn_1i2p6_198",pw="_selectBtn_1i2p6_216",uw="_modalOverlay_1i2p6_234",mw="_modalContent_1i2p6_256",_w="_modalHeader_1i2p6_276",xw="_closeBtn_1i2p6_290",gw="_modalBody_1i2p6_301",vw="_workerName_1i2p6_305",fw="_receiptBox_1i2p6_316",jw="_receiptRow_1i2p6_324",yw="_promoRow_1i2p6_334",ww="_totalRow_1i2p6_338",bw="_divider_1i2p6_345",Nw="_infoBox_1i2p6_351",Sw="_confirmBtn_1i2p6_377",le={container:Dy,header:Wy,backBtn:zy,section:Gy,list:Uy,emptyState:Hy,card:qy,cardInactive:Vy,cardHeader:Ky,userInfo:Yy,avatar:Zy,userText:Qy,userName:Xy,ratingRow:Jy,ratingVal:ew,reviewsCount:tw,statusBadge:sw,badgeNew:nw,badgeError:aw,badgeDefault:iw,cardBody:rw,messageBubble:ow,priceRow:cw,priceValue:lw,cardFooter:dw,chatBtn:hw,selectBtn:pw,modalOverlay:uw,modalContent:mw,modalHeader:_w,closeBtn:xw,modalBody:gw,workerName:vw,receiptBox:fw,receiptRow:jw,promoRow:yw,totalRow:ww,divider:bw,infoBox:Nw,confirmBtn:Sw},kw=()=>e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"#FFC107",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),Cw=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Iw=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),bs={WORKER_OFFER:"worker_offer"},Ns=({item:t,currencySymbol:s,onSelect:n,onChat:i,onProfile:a})=>{var j,P;const{t:r}=ae(),l=t.request_type===bs.WORKER_OFFER?t.sender.data:t.recipient.data,d=l.id,o=l.first_name||l.name,h=t.proposed_price?`${Math.round(t.proposed_price)} ${s}`:r("responses.card.priceDiscussion"),x=t.status==="pending",w=t.status==="awaiting_client_confirmation",N=x&&t.request_type===bs.WORKER_OFFER||w;let v=le.badgeDefault,m=r("responses.card.status.waiting");return t.request_type===bs.WORKER_OFFER&&x?(v=le.badgeNew,m=r("responses.card.status.pending")):t.status==="declined"?(v=le.badgeError,m=r("responses.card.status.declined")):w&&(v=le.badgeNew,m=r("responses.card.status.accepted")),e.jsxs("div",{className:`${le.card} ${!N&&!x?le.cardInactive:""}`,children:[e.jsxs("div",{className:le.cardHeader,children:[e.jsxs("div",{className:le.userInfo,onClick:()=>a(d),children:[e.jsx("img",{src:((P=(j=l.avatar)==null?void 0:j.data)==null?void 0:P.preview_url)||"/placeholder-user.jpg",alt:o,className:le.avatar}),e.jsxs("div",{className:le.userText,children:[e.jsx("h3",{className:le.userName,children:o}),e.jsxs("div",{className:le.ratingRow,children:[e.jsx(kw,{}),e.jsx("span",{className:le.ratingVal,children:l.calculated_rating||"5.0"}),e.jsxs("span",{className:le.reviewsCount,children:["(",l.reviews_count||0," ",r("common.reviewsShort","отз."),")"]})]})]})]}),e.jsx("div",{className:`${le.statusBadge} ${v}`,children:m})]}),e.jsxs("div",{className:le.cardBody,children:[t.message&&e.jsxs("div",{className:le.messageBubble,children:['"',t.message,'"']}),e.jsx("div",{className:le.priceRow,children:e.jsx("span",{className:le.priceValue,children:h})})]}),e.jsxs("div",{className:le.cardFooter,children:[e.jsxs("button",{className:le.chatBtn,onClick:()=>i(d,o),children:[e.jsx(Cw,{})," ",r("responses.card.chatBtn")]}),N&&e.jsxs("button",{className:le.selectBtn,onClick:()=>n(t),children:[e.jsx(Iw,{})," ",r("responses.card.selectBtn")]})]})]})},Aw=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Bw=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),vn=document.getElementById("modal-root"),Pw=({isOpen:t,onClose:s,onConfirm:n,calculation:i,currencySymbol:a})=>{const{t:r}=ae();if(!t||!vn||!i)return null;const{workerName:l,priceSummary:d}=i,o=Math.round((d==null?void 0:d.final_price)||0),h=Math.round((d==null?void 0:d.original_price)||0),x=d==null?void 0:d.promo_details;return Tt.createPortal(e.jsx("div",{className:le.modalOverlay,onClick:s,children:e.jsxs("div",{className:le.modalContent,onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:le.modalHeader,children:[e.jsx("h3",{children:r("responses.selectionModal.title")}),e.jsx("button",{className:le.closeBtn,onClick:s,children:e.jsx(Aw,{})})]}),e.jsxs("div",{className:le.modalBody,children:[e.jsxs("p",{className:le.workerName,children:["Исполнитель: ",e.jsx("strong",{children:l})]}),e.jsxs("div",{className:le.receiptBox,children:[e.jsxs("div",{className:le.receiptRow,children:[e.jsx("span",{children:r("responses.selectionModal.serviceCost")}),e.jsxs("span",{children:[h," ",a]})]}),x&&e.jsxs("div",{className:`${le.receiptRow} ${le.promoRow}`,children:[e.jsx("span",{children:r("responses.selectionModal.promoCode",{code:x.code})}),e.jsxs("span",{children:["- ",Math.round(x.discount_amount||0)," ",a]})]}),e.jsx("div",{className:le.divider}),e.jsxs("div",{className:`${le.receiptRow} ${le.totalRow}`,children:[e.jsx("span",{children:r("responses.selectionModal.total")}),e.jsxs("span",{className:le.totalValue,children:[o," ",a]})]})]}),e.jsxs("div",{className:le.infoBox,children:[e.jsx(Bw,{}),e.jsxs("div",{children:[e.jsx("h4",{children:r("responses.selectionModal.paymentNoteTitle")}),e.jsx("p",{children:r("responses.selectionModal.paymentNote")})]})]}),e.jsx("button",{className:le.confirmBtn,onClick:n,children:r("responses.selectionModal.confirmBtn")})]})]})}),vn)},Tw=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),Ht={WORKER_OFFER:"worker_offer",CLIENT_INVITE:"client_invite",ADMIN_SUGGESTION:"admin_suggestion"},Lw=()=>{const{id:t}=Lt(),s=nt(),{t:n}=ae(),[i,a]=c.useState([]),[r,l]=c.useState(null),[d,o]=c.useState(!0),[h,x]=c.useState(null),[w,N]=c.useState(!1);c.useEffect(()=>{t&&v()},[t]);const v=async()=>{var S;o(!0);try{const B=await gi(t);B.data&&(a(B.data),B.data.length>0&&((S=B.data[0].order)!=null&&S.data)&&l(B.data[0].order.data))}catch(B){console.error(B)}finally{o(!1)}},m=c.useMemo(()=>{const S=i.filter(p=>p.request_type===Ht.WORKER_OFFER),B=i.filter(p=>p.request_type===Ht.ADMIN_SUGGESTION),b=i.filter(p=>p.request_type===Ht.CLIENT_INVITE);return{admin:B,offers:S,invites:b}},[i]),j=async(S,B)=>{try{const b=await Ln(t,S);b!=null&&b.id?s(`/cabinet/chat/${b.id}`):s("/cabinet/chat")}catch{alert("Не удалось открыть чат")}},P=S=>{s(`/sitter/${S}`)},g=S=>{x(S)},u=async()=>{if(!h||!t||w)return;N(!0);const B=(h.request_type===Ht.WORKER_OFFER?h.sender.data:h.recipient.data).id;try{await vi(t,B,h.id),alert(n("common.success")),s(`/cabinet/orders/${t}`)}catch(b){alert(b.message||"Ошибка выбора")}finally{N(!1),x(null)}},y=c.useMemo(()=>{if(!h)return null;const S=h.request_type===Ht.WORKER_OFFER?h.sender.data:h.recipient.data;let B;return h.potential_calculation?B=h.potential_calculation.client_price_summary:B={original_price:h.proposed_price||"0",final_price:h.proposed_price||"0",promo_details:null},{workerName:S.first_name||S.name,priceSummary:B}},[h]);if(d)return e.jsx("div",{style:{padding:40,textAlign:"center"},children:n("loading")});const _=(r==null?void 0:r.currency)==="RUB"?"₽":(r==null?void 0:r.currency)||"₽";return e.jsxs("div",{className:le.container,children:[e.jsxs("div",{className:le.header,children:[e.jsxs("button",{className:le.backBtn,onClick:()=>s(`/cabinet/orders/${t}`),children:[e.jsx(Tw,{})," ",e.jsx("span",{children:n("common.back")})]}),e.jsx("h1",{children:n("responses.title")})]}),e.jsxs("div",{className:le.content,children:[i.length===0&&e.jsxs("div",{className:le.emptyState,children:[e.jsx("h3",{children:n("responses.noResponses")}),e.jsx("p",{children:n("responses.noResponsesSub")})]}),m.admin.length>0&&e.jsxs("div",{className:le.section,children:[e.jsx("h2",{children:n("responses.adminSuggestions")}),e.jsx("div",{className:le.list,children:m.admin.map(S=>e.jsx(Ns,{item:S,currencySymbol:_,onSelect:g,onChat:j,onProfile:P},S.id))})]}),m.offers.length>0&&e.jsxs("div",{className:le.section,children:[e.jsx("h2",{children:n("responses.workerOffers")}),e.jsx("div",{className:le.list,children:m.offers.map(S=>e.jsx(Ns,{item:S,currencySymbol:_,onSelect:g,onChat:j,onProfile:P},S.id))})]}),m.invites.length>0&&e.jsxs("div",{className:le.section,children:[e.jsx("h2",{children:n("responses.clientInvites")}),e.jsx("div",{className:le.list,children:m.invites.map(S=>e.jsx(Ns,{item:S,currencySymbol:_,onSelect:g,onChat:j,onProfile:P},S.id))})]})]}),e.jsx(Pw,{isOpen:!!h,onClose:()=>x(null),onConfirm:u,calculation:y,currencySymbol:_})]})},fn=()=>{const{user:t}=Be(s=>s.auth);return e.jsx(Sn,{to:t!=null&&t.isSitter?"/cabinet/sitter-dashboard":"/cabinet/profile",replace:!0})},Mw=({children:t})=>{const{isAuthenticated:s,isLoading:n,token:i}=Be(r=>r.auth),a=Kt();return n&&i&&!s?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Загрузка..."}):!s&&!n&&!i?e.jsx(Sn,{to:"/",state:{from:a},replace:!0}):e.jsx(e.Fragment,{children:t})},Ew=()=>{const{t}=ae(),s=Kt(),n=`${Re.siteUrl}${s.pathname}`;return e.jsxs(Nt,{children:[e.jsx("html",{lang:t("seo.html_lang","ru")}),e.jsx("link",{rel:"canonical",href:n}),Dt.map(i=>e.jsx("link",{rel:"alternate",hrefLang:i.code,href:`${Re.siteUrl}${s.pathname}?lng=${i.code}`},i.code)),e.jsx("link",{rel:"alternate",hrefLang:"x-default",href:`${Re.siteUrl}${s.pathname}`})]})},Rw=()=>At.get(Re.referralParamName),$w=({onAuthClick:t})=>e.jsxs(sc,{children:[e.jsx(Ew,{}),e.jsx(Ro,{onAuthClick:t}),e.jsx(Rs,{context:{onAuthClick:t}})]}),Fw=()=>{const t=ot(),{token:s,user:n,isAuthenticated:i}=Be(j=>j.auth),{maintenance:a}=Be(j=>j.config),[r,l]=c.useState(!1),[d,o]=c.useState("register"),[h,x]=c.useState("client"),w=document.getElementById("modal-root"),N=c.useCallback((j,P="client")=>{o(j),x(P),l(!0),t(pt())},[t]),v=c.useCallback(()=>{l(!1)},[]);if(c.useEffect(()=>{t(os());const j=new URLSearchParams(window.location.search);["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(u=>{const y=j.get(u);y&&At.set(u,y,{expires:30,path:"/"})});const g=j.get(Re.referralParamName);if(g){const u=At.get(Re.referralParamName);(!u||u!==g)&&At.set(Re.referralParamName,g,{expires:30,path:"/"})}},[t]),c.useEffect(()=>{s&&(!n||!i)&&t(Bt()).unwrap().catch(j=>{console.log("App.tsx: User load failed or token invalid on app start.",j)})},[t,s,n,i]),c.useEffect(()=>{const j=()=>{console.log("AuthError401 event caught in App.tsx, dispatching logout."),t(Jt())};return window.addEventListener("authError401",j),()=>{window.removeEventListener("authError401",j)}},[t]),a!=null&&a.enabled)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center",padding:"20px",fontFamily:"sans-serif"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"Технические работы"}),e.jsx("p",{style:{color:"#666",fontSize:"1.2rem"},children:a.message||"Сервис временно недоступен. Пожалуйста, зайдите позже."})]});const m=!1;return e.jsx(sa,{children:e.jsxs(e.Fragment,{children:[e.jsx(Er,{}),e.jsxs(na,{children:[e.jsx(Ne,{path:"/app",element:e.jsx(gc,{})}),e.jsxs(Ne,{element:e.jsx($w,{onAuthClick:N}),children:[e.jsx(Ne,{path:"/",element:e.jsx(dr,{isPreloading:m})}),e.jsx(Ne,{path:"/help",element:e.jsx(gj,{})}),e.jsx(Ne,{path:"/become-a-sitter",element:e.jsx(Br,{isPreloading:m})}),e.jsx(Ne,{path:"/search",element:e.jsx(kd,{})}),e.jsx(Ne,{path:"/sitter/:id",element:e.jsx(Dh,{})}),e.jsx(Ne,{path:"/terms",element:e.jsx(vs,{contentKey:"terms"})}),e.jsx(Ne,{path:"/privacy-policy",element:e.jsx(vs,{contentKey:"privacy"})}),e.jsx(Ne,{path:"/cookie-policy",element:e.jsx(vs,{contentKey:"cookie"})}),e.jsx(Ne,{path:"*",element:e.jsx(On,{})})]}),e.jsxs(Ne,{path:"/cabinet",element:e.jsx(Mw,{children:e.jsx(gp,{children:e.jsx(Rs,{})})}),children:[e.jsx(Ne,{index:!0,element:e.jsx(fn,{})}),e.jsx(Ne,{path:"orders/create",element:e.jsx(qf,{})}),e.jsx(Ne,{path:"chat",element:e.jsx(nn,{})}),e.jsx(Ne,{path:"chat/:id",element:e.jsx(nn,{})}),e.jsx(Ne,{path:"profile",element:e.jsx(Im,{})}),e.jsx(Ne,{path:"orders/:id",element:e.jsx(Ov,{})}),e.jsx(Ne,{path:"orders/:id/responses",element:e.jsx(Lw,{})}),e.jsx(Ne,{path:"pets",element:e.jsx(Om,{})}),e.jsx(Ne,{path:"pets/add",element:e.jsx(dn,{mode:"create"})}),e.jsx(Ne,{path:"pets/:id",element:e.jsx(h_,{})}),e.jsx(Ne,{path:"pets/:id/edit",element:e.jsx(dn,{mode:"edit"})}),e.jsx(Ne,{path:"become-sitter",element:e.jsx(N0,{})}),e.jsx(Ne,{path:"orders",element:e.jsx(D1,{})}),e.jsx(Ne,{path:"wallet",element:e.jsx(ey,{})}),e.jsx(Ne,{path:"sitter-settings",element:e.jsx($y,{})}),e.jsx(Ne,{path:"sitter-dashboard",element:e.jsx(W1,{})}),e.jsx(Ne,{path:"sitter-jobs",element:e.jsx("div",{style:{padding:20,textAlign:"center",color:"#666"},children:"Список работ в разработке."})}),e.jsx(Ne,{path:"*",element:e.jsx(fn,{})})]})]}),w&&r&&Tt.createPortal(e.jsx(qc,{isOpen:r,onClose:v,initialMode:d,registrationType:h}),w)]})})},Ow={key:"root",storage:ma,whitelist:["config","auth"]},Dw=aa({auth:Or,config:Wr,dialogues:yp,websocket:bp,search:Kc}),Ww=oa(Ow,Dw),Zn=ia({reducer:Ww,middleware:t=>t({serializableCheck:{ignoredActions:[ca,la,da,ha,pa,ua]}}).concat(kp)}),zw=ra(Zn),Gw=Re.googleClientIdWeb;_a.createRoot(document.getElementById("root")).render(e.jsx(qt.StrictMode,{children:e.jsx(xa,{children:e.jsx(ga,{store:Zn,children:e.jsx(va,{loading:null,persistor:zw,children:e.jsx(fa,{clientId:Gw,children:e.jsx(Fw,{})})})})})}));
